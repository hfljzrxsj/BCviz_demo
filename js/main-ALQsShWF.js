import{r as M,j as t}from"./react-oik9md-E.js";import{u as ns,a as rt,b as U,c as Qt,d as ss,e as rs,f as at,g as te,h as as,i as en,j as tn,k as ye,l as os,m as fe,n as jt,o as St}from"./ahooks-rsxkj2vD.js";import{i as is}from"./react-fast-compare-751UTDWK.js";import{u as ls,g as yt,i as cs,a as us,b as ds,c as hs,d as ms,e as ps,f as fs,h as gs,j as xs,k as bs,l as vs,m as _s,n as js,o as Ss,p as ys,q as Cs,r as ws,s as Ns,t as Ds,v as Ms}from"./echarts-Vo_PYHjZ.js";import{P as D,T as ke,d as Es,D as ce,L as Ee,B as J,a as Is,b as Ts,c as G,e as ks,f as Fs,g as Ps,h as zs,i as $s,C as nn,j as Fe,I as sn,k as Ls,l as rn,F as As,m as an,n as Pe,o as Bs,M as ot,A as on,p as Os,q as Rs,r as Vs,s as Ws,t as Us,u as ln,S as cn,v as qs,w as Ct,x as Gs,y as Ue,z as Hs,E as un,G as dn,H as hn,J as mn,K as Ks,N as Xs,O as Js}from"./@mui-aSa7pBhJ.js";import{d as it}from"./immer-U6fk-Zvt.js";import{a as pn,r as ze,c as Ys}from"./react-dom-tVoZXIl-.js";import{Q as Ie,k as fn}from"./react-toastify-5bXptfeX.js";import{d as Zs}from"./@algolia-kof8UNv8.js";import{u as Qs,H as er}from"./react-router-dom-GFem2kaG.js";import{u as tr,b as nr,c as sr}from"./react-router-I1NCjZ8i.js";import"./@babel-_Kefij6Y.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./zrender-6ibt0cUB.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";import"./scheduler-Xt5_ASe0.js";import"./@remix-run-wEAHOncH.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();function rr(e,n){return e>>n&1}const lt=Object.freeze(["rgb(255, 0, 0)","rgb(255, 115, 0)","rgb(255, 251, 0)","rgb(72, 255, 0)","rgb(0, 255, 213)","rgb(0, 43, 255)","rgb(122, 0, 255)","rgb(255, 0, 200)"]),ar="_Main_1ppnf_15",or="_Table_1ppnf_22",ir="_table_1ppnf_26",lr="_SVG_1ppnf_31",cr="_Accordion_1ppnf_38",ur="_line_1ppnf_70",dr="_circle_1ppnf_71",hr="_text_1ppnf_94",mr="_svg_1ppnf_94",pr="_highlight_1ppnf_100",fr="_g_1ppnf_52",gr="_line_how_1ppnf_1",E={Main:ar,Table:or,table:ir,SVG:lr,Accordion:cr,"Accordion-Summary":"_Accordion-Summary_1ppnf_42","Accordion-Details":"_Accordion-Details_1ppnf_48","graph-svg":"_graph-svg_1ppnf_52",line:ur,circle:dr,"no-highlight":"_no-highlight_1ppnf_84",text:hr,svg:mr,"axis-text":"_axis-text_1ppnf_94",highlight:pr,"more-highlight":"_more-highlight_1ppnf_116",g:fr,"hover-click-line":"_hover-click-line_1ppnf_273","hover-x":"_hover-x_1ppnf_273","hover-x--no-show":"_hover-x--no-show_1ppnf_273","hover-y":"_hover-y_1ppnf_274",line_how:gr,"coordinate-axis-y":"_coordinate-axis-y_1ppnf_282","coordinate-axis-x":"_coordinate-axis-x_1ppnf_282","pulse-signup-button":"_pulse-signup-button_1ppnf_1"},{error:q}=console,wt=e=>(e.addEventListener("abort",n=>{e.close(),q("abort",n)}),e.addEventListener("close",n=>{e.close(),q("close",n)}),e.addEventListener("error",n=>{e.close(),q("error",n)}),e.addEventListener("versionchange",n=>{e.close(),q("versionchange",n)}),e),xr=(e,n)=>(n.addEventListener("complete",()=>{e.close()}),n.addEventListener("abort",s=>{n.abort(),e.close(),q("abort",s)}),n.addEventListener("error",s=>{n.abort(),e.close(),q("error",s)}),n),gn=e=>new Promise(async(n,s)=>{const{DBname:r,version:a,storeName:o,keyPath:i,mode:l}=e,u=indexedDB.open(r,a);u.addEventListener("success",()=>{const c=wt(u.result);if(c.objectStoreNames.contains(o))return n(xr(c,c.transaction(o,l,{durability:"strict"})).objectStore(o))}),u.addEventListener("upgradeneeded",()=>{const c=wt(u.result);if(!c.objectStoreNames.contains(o))return c.createObjectStore(o,{autoIncrement:!0,...i?{keyPath:i}:null})}),u.addEventListener("error",c=>{s(c),q("error",c,u)}),u.addEventListener("blocked",c=>{s(c),q("blocked",c,u)})}).catch(q),ct=e=>{const{IDBValidKey:n,data:s}=e;return gn({...e,mode:"readwrite"}).then(r=>(r&&s&&r.add(s,...r.keyPath?[]:[n]).addEventListener("error",q),r),q).catch(q)},br=async e=>new Promise((n,s)=>{const{query:r}=e;return gn({...e,mode:"readonly"}).then(a=>{if(a){const o=r?a.get(r):a.getAll();o.addEventListener("success",()=>{n(o.result)}),o.addEventListener("error",i=>{q(i,o),s(o.error)})}return a},s).catch(s)}),vr=()=>indexedDB.databases().then(e=>e.filter(({name:n})=>n).map(({name:n})=>n?indexedDB.deleteDatabase(n):new IDBOpenDBRequest),q).catch(q);var _r={VITE_resumeFolder:"resume",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{DEV:jr,PROD:et}=_r,{freeze:$e,entries:Sr,values:Yo}=Object,yr=e=>!!(et&&e&&_.isPlainObject(e));var $=(e=>(e["Maximum Biclique"]="Maximum Biclique",e["Maximal Biclique Enumeration"]="Maximal Biclique Enumeration",e["(p,q)-biclique Counting"]="(p,q)-biclique Counting",e["Hierarchical Subgraphs Search"]="Hierarchical Subgraphs Search",e))($||{});const ut=$e({"Maximum Biclique":"MEB","Maximal Biclique Enumeration":"MBE","(p,q)-biclique Counting":"PQB","Hierarchical Subgraphs Search":""}),Cr=$e({DBname:"HJX",storeName:"HXJ"}),xn=e=>br({...Cr,query:e}).then(n=>{if(yr(n))return n;throw new Error(n)});var L=(e=>(e[e.table=0]="table",e[e.graph=1]="graph",e[e.result=2]="result",e))(L||{});$e({0:"Cohesion"});const wr=e=>Sr(e).map(Ae),ee="tanContent",ge=({k:e,kInd:n})=>`${e}${n}`,Nr=(e,n)=>{if(!n||n.length===0)return e;const s=ft(n);return e?.map(a=>{const{k:o,kInd:i}=a,l=s[o][i]?Gn:void 0;return{...a,...l?{color:l}:null}})},Nt=40,Dr=80,Mr=e=>{const s=_.sortBy(e,({v:a})=>a).slice(vt*-1);return _.sortBy(s,({i:a})=>a)},Dt=(e,n)=>{if(!n)return[];if(e)return n;const s=n.map((r,a)=>({...r,i:a}));return n.length<=vt?s:Mr(s)},Er=(e,n,{svgWidth:s,svgHeight:r})=>pt(e,n,Be(e,{svgWidth:s,svgHeight:r}),r),bn=$e({svgHeight:innerHeight,svgWidth:innerWidth}),Ir="_Main_1idkx_15",Tr="_Select_1idkx_38",kr="_TabPanel_1idkx_41",Fr="_Tab_1idkx_41",Pr="_hidden_1idkx_83",zr="_Chart_1idkx_87",$r="_Modal_1idkx_92",Lr="_CircularProgress_1idkx_99",k={Main:Ir,"Main-Left":"_Main-Left_1idkx_33",Select:Tr,TabPanel:kr,"Paper-text":"_Paper-text_1idkx_44","Main-Mid":"_Main-Mid_1idkx_51",Tab:Fr,"Main-Right":"_Main-Right_1idkx_62","Main-Right--Show":"_Main-Right--Show_1idkx_69","Main-Right--Show--Text":"_Main-Right--Show--Text_1idkx_75","Main-Right--Show--Num":"_Main-Right--Show--Num_1idkx_80",hidden:Pr,Chart:zr,Modal:$r,CircularProgress:Lr,"pulse-signup-button":"_pulse-signup-button_1idkx_1"},Mt=(e=()=>{})=>Rr?.(()=>Vr?.(()=>Or?.(()=>Br?.(()=>vn?.resolve?.()?.then?.(()=>{const{port1:n,port2:s}=new Ar;n?.postMessage?.(null),s.onmessage=e}).catch?.(_n))))),Le=(e=()=>{})=>new vn(n=>Mt?.(n))?.then?.(()=>Mt?.(e)).catch?.(_n),{Promise:vn,addEventListener:Zo,console:{error:_n}={},MessageChannel:Ar,queueMicrotask:Br,requestAnimationFrame:Or,requestIdleCallback:Rr,setTimeout:Vr}=window??self??globalThis??void 0;ls([us,ds,hs,ms,ps,fs,gs,xs,bs,vs,_s,js,Ss,ys,Cs,ws,Ns,Ds]);const jn=window??self??globalThis??global??void 0??new EventTarget,{addEventListener:Wr,removeEventListener:Ur}=jn,{dispatchEvent:qr}=jn,tt="resize",Gr=new Event(tt),qe=M.memo(e=>{const{option:n,onParams:s=[]}=e,r=M.useRef(null);return ns(()=>{const{current:a}=r;if(!a||!n)return;const o=yt(a)??cs(a);o.showLoading(),Le(()=>{o.setOption(n,!0,!0),s.map(c=>o.on(...c)),o.hideLoading()});const i=An(o.resize),l=()=>i(),u=new ResizeObserver(l);return u.observe(a),Wr(tt,l),()=>{s.map(([c,,x])=>o.off(c,x)),u.disconnect(),i.cancel?.(),i.clear?.(),Ur(tt,l)}},[n]),rt(()=>{const{current:a}=r;if(!a)return;const o=yt(a);o&&(o.clear(),o.dispose())}),t.jsx(t.Fragment,{children:t.jsx(D,{elevation:24,ref:r,className:k.Chart??""})})},is),{error:Hr}=console;function dt(...e){if(e.length===0)return!0;const n=_.head(e);return e.every(s=>_.isEqual(s,n))}const Kr=(e,n)=>n.every(s=>s===e),Et=e=>{if(!(e instanceof HTMLDivElement))return!1;const{childElementCount:n,childNodes:s,children:r,firstChild:a,lastChild:o,firstElementChild:i,lastElementChild:l}=e;return!e.hasChildNodes()||!Kr(1,[n,s.length,r.length])?!1:dt(a,o,i,l,s.item(0),r.item(0))},It="mouseup",Xr=["ctrl","alt","shift","meta"].map(e=>`${e}.f11`);function Se({children:e,...n}){const s=M.useRef(null),{current:r}=s,a=U(u=>{if(!Et(u))return null;const c=u?.firstChild;return Et(c)?c:null}),o=U(An(u=>u instanceof HTMLDivElement&&!document.fullscreenElement?u.requestFullscreen({navigationUI:"hide"}).catch(Hr):Promise.reject(u)));rt(()=>{o.cancel?.(),o.clear?.()});const i=U(u=>{const c=a(r),{target:x,currentTarget:m}=u;if(!(!c||!dt(r,x,m))){if(u instanceof MouseEvent){const{button:f,altKey:b,ctrlKey:S,metaKey:h,shiftKey:p,relatedTarget:v,type:d}=u;if(d===It&&f===0&&!b&&!S&&!h&&!p&&!v)return}return u.preventDefault(),o(c)}});Qt(["contextmenu","dblclick","auxclick",It],i,{enable:!!r,target:r}),ss(Xr,u=>{const c=a(r);return o(c)},{exactMatch:!0});const l=rs();return at(()=>{Le(()=>{r||l()})}),t.jsx(ke,{...n,ref:s,children:t.jsx(D,{elevation:24,children:e})})}const Tt=Ms.color,{isSafeInteger:kt}=Number,{min:Ft,max:Pt}=Math,Ae=([e,n])=>t.jsxs("div",{children:[t.jsx("span",{children:`${e}: `}),t.jsx("span",{className:ee,children:n?.toString()})]},e),zt=4,Jr=(e,n)=>e.length>n?e.slice(0,n):e,Sn=({k:e,kInd:n,v:s,neighbor:r,color:a},o)=>t.jsxs(t.Fragment,{children:[a&&o&&!gt(o)?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs("span",{className:ee,children:["fetch ",o," result"]})}),t.jsx("br",{})]}):null,[["Vertex Name",`${e+n}`],["Maximum Cohesion",`${s}`],_.isUndefined(r)?void 0:["Neighbors",`${Jr(r,zt).map(({k:i,kInd:l})=>`${i+l}`).join(", ")}${r.length>zt?"...":""}`],["Vertex Degree",`${r?.length}`]].filter(Boolean).map(Ae)]}),Yr=({k:e,kInd:n,v:s,neighbor:r,color:a},o)=>t.jsxs(t.Fragment,{children:[a&&o&&!gt(o)?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs("span",{className:ee,children:["fetch ",o," result"]})}),t.jsx("br",{})]}):null,[["Vertex Name",`${e+n}`],["Contain Vertices",`${s}`]].filter(Boolean).map(Ae)]}),yn=(...e)=>pn(Sn(...e)),Zr=(...e)=>pn(Yr(...e)),Cn={trigger:"item",axisPointer:{type:"cross"},label:{show:!0}},wn=it({label:{show:!0},roam:!0}),Nn={toolbox:{show:!0,feature:{saveAsImage:{},restore:{},dataView:{},dataZoom:{},magicType:{},brush:{}}}},Ge=it({show:!0,snap:!0}),Dn={lineStyle:{shadowColor:"rgba(0,0,0,.5)",shadowBlur:10},scale:!0,label:{show:!0,fontSize:24,fontWeight:"bolder"},labelLine:{show:!0},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:10}},He=(e,n,s,r=void 0,{max:a,min:o}=Be(e,bn),i=!1)=>{if(!e||!n)return{};const l=da(e,n),{symbolSizeMax:u,symbolSizeMin:c}=(()=>{if(i)return{symbolSizeMax:a,symbolSizeMin:o};const h=e.map(({neighbor:d})=>d?.length),p=Ft(...h);return{symbolSizeMax:Pt(...h),symbolSizeMin:p}})(),x=(Dr-Nt)/(u-c),m=h=>(h-c)*x+Nt,f=_.uniq(n.map(({superWidth:h})=>h)),b=(()=>{if(_.isUndefined(_.head(f)))return h=>h;{const h=f,p=Ft(...h),v=Pt(...h),d=10,g=1,y=(d-g)/(v-p);return C=>(C-p)*y+g}})();return{...Nn,tooltip:{},legend:{data:[H.U,H.V]},series:[{type:"graph",...wn,tooltip:{...Cn,formatter(h,p,v){const{dataType:d,dataIndex:g,data:y,name:N}=h;if(d==="edge"){const{source:F,target:O,superWidth:z}=y;return[N,z].filter(Boolean).join("<br/>")}const C=e[g];return C?i?Zr(C,s):yn(C,s):p}},categories:[{name:H.U,base:H.U},{name:H.V,base:H.V}],edgeLabel:{},data:e.map(h=>{const{k:p,kInd:v,graphX:d,graphY:g,v:y,color:N,neighbor:C}=h,F=m(i?y:C?.length??y);return{name:ge(h),value:y,category:p,symbolSize:F,x:d,y:g,...N?{itemStyle:{color:N}}:null}}),links:n?.map(({u:h,v:p,superWidth:v},d)=>{const g=l[d];return{source:`u${h}`,target:`v${p}`,lineStyle:{..._.isUndefined(v)?null:{width:b(v)},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Tt[0]},{offset:1,color:Tt[1]}],global:!1},...g?{color:l[d],width:4}:null},superWidth:v}}),lineStyle:{opacity:1,cap:"round",join:"round",shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},emphasis:{focus:"adjacency",...Dn}}]}},Qr=e=>e?{itemStyle:{color:e,shadowColor:"rgba(0,0,0,.3)",shadowBlur:16},symbolSize:16,symbol:"circle"}:{},Mn=it({[$["Maximum Biclique"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[$["Maximal Biclique Enumeration"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[$["(p,q)-biclique Counting"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"}});_.debounce(()=>{Ie.warn("result is empty")});const Ke=e=>`${En.name}${e}`;function En(e){const{dataArrWithPos:n,graphData:s,size:r,resultGraph:a,selectMode:o,useSetInputST:i,setTab:l,resultTable:u,setSize:c,isEditX:x,commonValueFromTableData:m,clickEChartDotToAddMultiDots:f,superData:b}=e,S=_.isUndefined(r),{dataArrWithPos:h,visualMapSection:p,sections:v}=M.useMemo(()=>{if(x){const{datas:I,visualMapSection:w,sections:P}=Pn({...e});return{dataArrWithPos:I,visualMapSection:w,sections:P}}return{dataArrWithPos:n}},[n]),d=M.useMemo(()=>{if(h)return{...Nn,dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"none"},{type:"slider",yAxisIndex:0,filterMode:"none"},{type:"inside",xAxisIndex:0,filterMode:"none"},{type:"inside",yAxisIndex:0,filterMode:"none"}],tooltip:{...Cn,formatter(I,w){if("dataIndex"in I){const P=h[I.dataIndex];if(P)return yn(P,o)}return w}},xAxis:{type:"category",data:h.map(ge),axisPointer:Ge},yAxis:{type:"value",axisPointer:Ge},series:[{...wn,data:h.map(({v:I,color:w})=>({value:I,...Qr(w)})),type:"line",emphasis:{focus:"self",...Dn},symbolSize:8,...x&&!S&&p?{markLine:{symbol:["circle","circle"],data:[{yAxis:r}]},markArea:{animation:!0,data:p.map(({start:I,end:w,color:P},R)=>{const K=h[I],Y=h[w],he=`${K?.k}${K?.kInd}~${Y?.k}${Y?.kInd}`,me={color:P,opacity:.03},we={show:!0,formatter:he,position:"insideBottom",color:"#000"},Oe={label:we,itemStyle:{opacity:.05}};return[{itemStyle:me,label:we,xAxis:I,emphasis:Oe},{itemStyle:me,label:we,xAxis:w,emphasis:Oe}]})}}:null}],axisPointer:Ge,...x&&p?{visualMap:{pieces:p.map(({start:I,end:w,color:P})=>{const R=h[I],K=h[w];return{min:I,max:w,color:P,label:`${R?.k}${R?.kInd}~${K?.k}${K?.kInd}`}}),dimension:0,show:!0,outOfRange:{color:"Gray",colorAlpha:.8},inverse:!0}}:null}},[h]),g=M.useMemo(()=>{if(!h)return;if(b){const{tableData:w,graphData:P}=b;if(w&&P){const R=Be(w,bn),K=pt(w,P,R,innerHeight);return He(K,P,o,void 0,R,!0)}}return He(h,s,o,void 0,m)},[h,b]),y=M.useMemo(()=>{if(!S&&!a?.length){const I=Mn[o];return{title:{text:`${o} result is empty`,subtext:`${_.map(i[0],(w,P)=>`${I?.[P]}: ${w}`).join(`
`)}`,left:"center",top:"center",textStyle:{fontSize:30,lineHeight:60},subtextStyle:{fontSize:20,lineHeight:40}}}}return He(u,a)},[a]),N=U(Ln({isEditX:x,setSize:c,size:r})),C=["dblclick","series",I=>{const{dataIndex:w,name:P,value:R}=I;kt(w)&&P&&kt(R)&&typeof R=="number"&&N({v:R})()}],F=["click","series",f],O=t.jsx(qe,{option:d,onParams:[C,F]}),z=t.jsx(qe,{option:g,onParams:[C,F]}),be=t.jsx(qe,{option:y}),[de,ne]=te(["line","graph"]);return as(de),U((I,w)=>de.includes(w)?I:null),t.jsxs(t.Fragment,{children:[t.jsx(Se,{value:L.table,children:O},Ke(L.table)),t.jsx(Se,{value:L.graph,children:z},Ke(L.graph)),t.jsx(Se,{value:L.result,children:be},Ke(L.result))]})}const{values:ea,freeze:ht,keys:Qo}=Object;var H=(e=>(e.U="u",e.V="v",e))(H||{});const ta=ht({0:"u",1:"v"}),W=32,na=W/2,Be=(e,{svgWidth:n,svgHeight:s})=>{const r=e?.map(({v:b})=>b)??[],a=Math.min(...r),o=Math.max(...r),i=o-a,{length:l}=r,u=n-W*2,c=s-W*2,x=u/(l-1),m=c/i;return{valuesArr:r,min:a,max:o,diff:i,realHeight:c,xRadix:x,yRadix:m,length:l,getYPos:b=>W+(o-b)*m,svgWidth:n,svgHeight:s}},mt=ht({u:0,v:1}),sa=Object.keys(mt).length,ra=e=>e?{neighbor:e}:{},$t=(e,n,s,r)=>(e[n]||(e[n]=[])).push({k:s,kInd:r}),In=()=>({u:{},v:{}}),aa=e=>{const n=In(),s=n.u,r=n.v;for(const a of e){const{u:o,v:i}=a;s&&r&&!_.isUndefined(o)&&!_.isUndefined(i)&&($t(s,o,"v",i),$t(r,i,"u",o))}return n},pt=(e,n,{xRadix:s,getYPos:r,svgWidth:a,max:o,min:i},l)=>{if(!n||!e)return[];const u=aa(n),c=a-W*2,x=_.groupBy(e,({k:h})=>h),m=_.mapValues(x,h=>c/(h.length-1)),f=(l-W*2)/(sa-1),b=_.mapValues(x,h=>new Map(_.sortBy(h,({kInd:p})=>p).map(({kInd:p},v)=>[p,v])));return e?.map((h,p)=>{const{v,k:d,kInd:g}=h;return{...h,i:p,x:W+p*s,y:r(v),graphX:W+(b[d].get(g)??0)*m[d],graphY:W+mt[d]*f,...ra(u?.[d][g])}})},Ce=ht(["more-highlight","highlight","no-highlight"]),nt=_.last(Ce)??"",Tn=Ce.map(e=>_.camelCase(`is-${e}`)),{length:kn}=Ce,oa=e=>1<<Tn.findIndex(s=>e[s]===!0)+1,ia=(1<<kn)-1,la=e=>{for(let n=1;n<kn;n++)if(rr(e,n)===1)return Ce[n-1]??nt;return nt},ca=e=>{const n=Tn.findIndex(s=>e?.[s]===!0);return Ce[n]??nt},ua=e=>{if(e.includes(Gn)&&e.includes(st))return st;if(e.length!==1)return;const n=_.head(e);if(n)return n},ft=e=>{const n=In();return _.isUndefined(e)||e.length===0?n:{...n,..._.mapValues(_.groupBy({...e},({k:s})=>s),s=>_.keyBy(s,({kInd:r})=>r))}},da=(e,n,s=ft(e))=>!e||!n?[]:n?.map(r=>{const a=_.uniq(_.map(r,(o,i)=>s[i]?.[o]?.color));return ua(a)}),ha=({drawDotData:e,graphData:n})=>{const s=_.mapValues(_.groupBy(e,({k:r})=>r),r=>_.keyBy(r,({kInd:a})=>a));return n?.map(r=>{const a=ea(_.mapValues(r,(u,c)=>s[c]?.[u])),o=a.reduce((u,c,x,m)=>{const{pos:f,highlightLevelNum:b}=u;if(!c)return u;const{graphX:S,graphY:h,color:p}=c;return{pos:[...f,[S,h]],highlightLevelNum:b&oa(c)}},{pos:[],highlightLevelNum:ia,color:""}),{highlightLevelNum:i}=o,l=_.uniq(a.map(u=>u?.color?u.color:""));return{...o,highlightLevel:la(i),...l.length===1?{color:_.head(l)}:null}})},ue=e=>e.v,Fn=lt.length,ma=({isEditX:e,dataArrWithPos:n,commonValueFromTableData:{length:s},size:r})=>{if(!e)return n;const a=_.isNil(r);if(a)return n.map(c=>({...c,color:"",isHighlight:a?!1:c.v>=r}));const o=[];let i=0,l=_.head(n);if(!l)return n;let u=ue(l);for(let c=1;c<=s;c++){const x=[l];for(;c<s;c++){const m=n[c];if(!m)break;const f=ue(m);if(f>=r||f>=u)x.push(m),l=m,u=f;else{l=m,u=f;break}}o.push(...x.map(m=>({...m,color:lt[i%Fn]??""}))),i++}return o.map(c=>({...c,isHighlight:c.v>=r}))},Pn=e=>{const{isEditX:n,dataArrWithPos:s,commonValueFromTableData:{length:r},size:a,colors:o=lt}=e;if(!n)return{datas:s,sections:[]};if(_.isNil(a))return{datas:s,sections:[]};const l=[];let u=0;const c=[],x=[],m=[],f=[];for(let b=0;b<r;b++){const S=s[b];if(!S)break;const h=ue(S),p=s[b+1],v=()=>{m.push(S),f.push(b)},d=()=>{if(h>=a){v();const y=o[u%Fn]??"";return c.push(m),x.push({start:_.head(f)??0,end:_.last(f)??0,color:y}),l.push(...m.map(N=>({...N,color:y}))),m.length=0,f.length=0,u++,1}else return l.push(S),0};if(!p){d();break}ue(p)>=a?v():d()}return{datas:l,sections:c,visualMapSection:x}},pa=({isEditX:e})=>n=>()=>{},zn=e=>({title:Sn(e),arrow:!0}),Lt=({clientWidth:e,clientHeight:n})=>{const s=e-W,r=n-W;return{svgWidth:e,svgHeight:n,xEnd:s,yEnd:r}},fa=e=>()=>{const{current:n}=e;return Lt(n||{clientWidth:innerWidth,clientHeight:innerHeight})},$n=e=>classNames(E.g,E[ca(e)]),Ln=({isEditX:e,setSize:n,size:s})=>({dotData:r,v:a=r?.v})=>()=>{e&&n?.(a===s?void 0:a)},An=e=>Es(_.debounce(Zs(e,0))),gt=e=>e===$["Hierarchical Subgraphs Search"],ga="_title_1tlbs_1",xa="_Paper_1tlbs_5",ba="_Input_1tlbs_8",va="_TextField_1tlbs_14",ie={title:ga,Paper:xa,Input:ba,"input-file":"_input-file_1tlbs_11",TextField:va,"TextField-Paper":"_TextField-Paper_1tlbs_20","TextField-Paper-input":"_TextField-Paper-input_1tlbs_23","FileInfo-Button":"_FileInfo-Button_1tlbs_26"},_a="_Dialog_c2d28_1",ja="_title_c2d28_4",Sa="_Paper_c2d28_7",ya="_FileUploadTeam_c2d28_11",le={Dialog:_a,title:ja,Paper:Sa,FileUploadTeam:ya};function Ca(e){const{fileInfo:n}=e,{name:s,size:r,lastModified:a,type:o,downloadUrl:i}=n;return s?t.jsxs(t.Fragment,{children:[t.jsx(ce,{}),t.jsx(D,{elevation:24,className:le.Paper??"",children:t.jsxs("fieldset",{children:[s?t.jsx("legend",{children:t.jsx(Ee,{href:i,title:"preview",target:"_blank",underline:"hover",children:s})}):null,s&&r?t.jsxs("p",{children:[" Content Length: ",filesize(r)]}):null,a?t.jsxs("p",{children:[" Last Modified: ",new Date(a).toJSON()]}):null,o?t.jsxs("p",{children:[" Content Type: ",o]}):null,t.jsxs(D,{elevation:0,className:le["FileInfo-Button"]??"",children:[t.jsx(Ee,{href:i,target:"_blank",underline:"hover",children:t.jsxs(J,{variant:"outlined",children:[t.jsx(Is,{}),"preview"]})}),t.jsxs(J,{variant:"outlined",onClick:()=>{const l=document.createElement("a");l.href=i??"",l.download=s,l.click()},children:[t.jsx(Ts,{}),"download"]})]})]})})]}):null}const wa="_examples_141yp_1",Na={examples:wa};function Da(e){const{defaultTxt:n,chooseExample:s}=e,[r,a,o]=en(null);return t.jsxs(D,{elevation:24,className:Na.examples??"",children:[t.jsx(G,{title:"No suitable data? Click here to try these.",arrow:!0,children:t.jsxs(J,{size:"large",fullWidth:!0,onClick:i=>{a(i.currentTarget)},children:["> ",t.jsx(Ee,{component:"button",children:"Examples"})]})}),t.jsx(ks,{open:!!r,anchorEl:r,onClose:()=>{o()},children:t.jsx(Fs,{children:n.map((i,l)=>t.jsx(G,{arrow:!0,title:`Example ${l+1}`,placement:"right",children:t.jsx(Ps,{disablePadding:!0,children:t.jsx(zs,{onClick:()=>{s(i),o()},children:t.jsx(Ee,{component:"button",underline:"hover",children:i})},i)})},i))})})]})}const{revokeObjectURL:Ma,createObjectURL:Ea}=URL,{freeze:Ia}=Object,{error:Te}=console,Ta={lastModified:0,name:"",size:0,type:"",downloadUrl:""},Bn=e=>{e&&Ma(e)},ka=e=>n=>{if(n){const s=Bn.bind(null,e);n.addEventListener("beforeunload",s),n.addEventListener("unload",s)}},xt=e=>{const n=Ea(e);return Le(()=>{const s=ka(n);s(window??self??globalThis??void 0),s(document);const{documentElement:r,body:a,head:o,scrollingElement:i,firstElementChild:l,lastElementChild:u,activeElement:c,firstChild:x,lastChild:m,doctype:f,defaultView:b}=document;s(o),s(a),s(r),s(c),s(l),s(u),s(i),s(m),s(f),s(b),s(x)}),n},bt=Ia({DBname:"HJX",storeName:"HXJ"}),Fa=e=>({...e,fileInfo:{...e.fileInfo,downloadUrl:xt(new Blob([e.fileData]))}}),On=e=>xn(e).then(Fa).catch(()=>fetch(e).then(async n=>{const{headers:s}=n,r=await n.text(),a=xt(new Blob([r])),o={fileInfo:{lastModified:Date.parse(s.get("last-modified")??""),name:e,size:parseInt(s.get("content-length")??""),type:s.get("content-type")??"",downloadUrl:a},fileData:r};return ct({...bt,IDBValidKey:e,data:o}),o},Te)).catch(Te);function Pa(e){const{parseData:n,setWillPatchData:s,defaultTxt:r,title:a}=e,[o,i]=te(""),[l,u]=tn(Ta);rt(()=>{Bn(l.downloadUrl)});const c=U((m,f)=>{s({fileName:f.match(/[^\/]+$/)?.[0]??f,data:m})}),x=U(m=>On(m).then(f=>{if(f){const{fileInfo:b,fileData:S}=f,h=n(S);if(h.length===0){Ie.error("The file format is incorrect!");return}u(b),c(h,m)}},Te).catch(Te));return t.jsx(t.Fragment,{children:t.jsxs(D,{elevation:24,children:[t.jsx("h4",{className:ie.title,children:a}),t.jsxs(D,{elevation:24,className:classNames(ie.Paper,ie.Input),children:[t.jsxs(J,{component:"label",variant:"contained",startIcon:t.jsx($s,{}),fullWidth:!0,title:"Upload File",children:["Upload File",t.jsx("input",{type:"file",className:ie["input-file"],onChange:m=>ze.unstable_batchedUpdates(()=>{const f=m.target.files?.[0];if(!f){alert("some error occur");return}const b=new FileReader;b.readAsText(f),b.onload=S=>{const h=S.target?.result||b.result;if(typeof h=="string")try{const{name:p,lastModified:v,size:d,type:g}=f;c(n(h),p);const y=xt(f);u({...l,name:p,lastModified:v,size:d,type:g,downloadUrl:y});const N={fileInfo:{...l,name:p,lastModified:v,size:d,type:g,downloadUrl:y},fileData:h};ct({...bt,IDBValidKey:p,data:N})}catch{alert("some error occur")}}}),accept:".txt"})]}),t.jsx(ce,{orientation:"vertical",variant:"fullWidth",flexItem:!0,children:t.jsx(nn,{label:"OR"})}),t.jsxs(D,{elevation:24,className:ie.TextField??"",children:[t.jsxs(D,{elevation:24,className:ie["TextField-Paper"]??"",children:[t.jsx(Fe,{label:"Please input URL",onChange:m=>{i(m.target.value)},value:o,fullWidth:!0,placeholder:"Please input URL",title:"Please input URL",className:ie["TextField-Paper-input"]??""}),t.jsx(J,{size:"large",variant:"contained",disabled:!o,onClick:()=>x(o),children:"Fetch"})]}),t.jsx(Da,{defaultTxt:r,chooseExample:m=>{i(()=>(x(m),m))}})]})]}),t.jsx(Ca,{fileInfo:l})]})})}const{isSafeInteger:Xe}=Number;function At(e){const n=e.split(`
`),s=[];let r=0,a;const{length:o}=n;for(;r<o;)if(n[r]?.startsWith("No.")){r++;const i=n[r++],l=n[r++],u=n[r++];let c;r<o&&n[r]?.startsWith("count:")&&(c=n[r++]);const x=i?.match(/size=(\d+)/)?.[1];if(!x)throw new Error("Invalid size format");const m=parseInt(x,10);if(!Xe(m)||m<=0)throw new Error("Size must be a positive integer");const f=l?.match(/U: (\d+(?: \d+)*)/);if(!f)throw new Error("Invalid U format");const b=f[1]?.split(" ").map(Number)??[];if(b?.some(isNaN)||b?.some(d=>d<=0))throw new Error("U values must be positive integers");const S=u?.match(/V: (\d+(?: \d+)*)/);if(!S)throw new Error("Invalid V format");const h=S[1]?.split(" ").map(Number)??[];if(h?.some(isNaN)||h?.some(d=>d<=0))throw new Error("V values must be positive integers");let p;if(c){const d=c.match(/count: (\d+)/)?.[1];if(!d)throw new Error("Invalid count format");if(p=parseInt(d,10),!Xe(p)||p<=0)throw new Error("Count must be a positive integer")}const v={size:m,[H.U]:b,[H.V]:h,label:`Rank ${s.length+1}`,...p?{count:p}:null};s.push(v)}else if(n[r]?.startsWith("The number of ")){const i=n[r+1];if(!i)throw new Error("The number of (\\d,\\d)-bicliques not has next line");const l=parseInt(i,10);if(!Xe(l)||l<=0)throw new Error("The number of (\\d,\\d)-bicliques must be a positive integer");a=l;break}else r++;return{dataArr:s,..._.isUndefined(a)?{}:{count:a}}}const{error:Bt}=console,{isSafeInteger:za}=Number,Ot="http://47.99.129.94",Rt=(e,n)=>{const r=n.exec(e)?.[1]?.trim();return r?r.split(/\s+/).map(a=>{const o=parseInt(a);return za(o)?o:0}):[]},$a=e=>{const r=/size=(\d+)/.exec(e)?.[1],a=r?parseInt(r,10):0,o=Rt(e,/U:\s+([\d\s]+)/),i=Rt(e,/V:\s+([\d\s]+)/);return{size:a,u:o,v:i,label:"Rank 1"}},La=e=>({[$["Maximum Biclique"]]:{dataArr:[$a(e)]},[$["Maximal Biclique Enumeration"]]:At(e),[$["(p,q)-biclique Counting"]]:At(e)}),Aa=async(e,n,s)=>{const r="/api/BCviz/v3",a=`${r}?${new URLSearchParams({...s,problem:ut[e]})}`,o=await xn(a).catch(()=>axios.get(r,{responseType:"text",params:s}).then(i=>{const{data:l}=i,u={...La(l)[e],...s};return ct({...bt,data:u,IDBValidKey:a}),u},i=>{throw Bt(i),new Error(i)})).catch(i=>{throw Bt(i),new Error(i)});return{...n,...o?{[e]:o}:null}},Vt=Object.freeze({loadingDelay:300,throttleWait:300,debounceWait:300,debounceLeading:!0}),Ba="_Tool_17xe8_7",Oa="_IconButton_17xe8_10",Ra="_triangle_17xe8_15",Va="_rotate_17xe8_25",Me={"Main-Side":"_Main-Side_17xe8_1",Tool:Ba,IconButton:Oa,triangle:Ra,rotate:Va},Wt=["225deg","45deg"];function Ut(e){const{buttonOrder:n=0,children:s,...r}=e,[a,{toggle:o}]=ye(!0);return s?t.jsxs(D,{className:Me["Main-Side"]??"",elevation:24,...r,children:[t.jsx(G,{title:`${a?"collapse":"expand"} toolbar`,arrow:!0,children:t.jsx(sn,{size:"large",className:Me.IconButton??"",onClick:()=>{o(),Le(()=>{qr(Gr)})},style:{"--order":n,"--initRotate":Wt[n],"--clickRotate":Wt[1-n]},children:t.jsx("div",{className:classNames(Me.triangle,{[Me.rotate??""]:a})})})}),t.jsx(Ls,{in:a,orientation:"horizontal",children:s})]}):null}const{error:Rn}=console,{from:qt,isArray:ei}=Array,{freeze:Wa}=Object,{isSafeInteger:xe}=Number,Vn=e=>{const n=e.trim().split(`
`),s=[];for(const r of n){const[a,o,i]=r.trim().split(/[ \t]/),l=parseInt(o),u=parseInt(i);if(!xe(l)||!xe(u))return[];s.push({k:ta[a],kInd:l,v:u})}return s},Ua=(e,n)=>{const[s,r]=e.trim().split(/[ \t]/),a=parseInt(s),o=parseInt(r);!xe(a)||!xe(o)||n.push({[H.U]:a,[H.V]:o})},qa=(e,n)=>{const[s,r,a]=e.trim().split(/[ \t]/),o=parseInt(s),i=parseInt(r),l=parseInt(a);!xe(o)||!xe(i)||n.push({[H.U]:o,[H.V]:i,superWidth:l})},Ga=(e,n=Ua)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},Ha=(e,n=qa)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},Gt=["dataset","BCviz_file"],Ht=Wa([{title:"Bipartite Subgraph",parseData:Ga,defaultTxt:["example.txt","writer.txt","marvel.txt"]},{title:"Maximum Cohesion",parseData:Vn,defaultTxt:["example_cohesion.txt","writer_cohesion.txt","marvel_cohesion.txt"]}]),Je=(e="searchParams is not enough")=>{throw Rn(e),new Error(e)};function Ka(e){const{setDatas:n,setFileNames:s}=e,[r,{setTrue:a,setFalse:o}]=ye(!1),{list:i,resetList:l,replace:u}=os(),c=U(d=>g=>u(d,g)),x=U(()=>l([])),[m,f]=Qs(),{arrEntries:b,arrKeys:S}=M.useMemo(()=>{const d=qt(m.entries()),g=d.map(([y])=>y);return{arrEntries:d,arrKeys:g}},[m]),h=M.useMemo(()=>{const{length:d}=n;return!(m.size<d||_.uniq(S).filter(g=>Gt.includes(g)).length!==d)},[m]),p=U(()=>{a(),f()});at(()=>{if(!h){p();return}const d=b.map(([,g])=>g);Promise.all(d.map(g=>On(g))).then(g=>{Gt.map((y,N)=>{const C=S.indexOf(y),F=g[C]?.fileData,O=d[C];if(!F||!O)return Je();const z=Ht[N]?.parseData(F);return z?.length?{parseData:z,fileName:O}:Je("parse error")}).forEach(({parseData:y,fileName:N},C)=>{const F=n[C],O=s[C];if(!O||!F)return Je();F(y),O(N)})}).catch(g=>{Rn(g),p()})}),fe(()=>{r||x()},[r]);const v=i.length===n.length&&qt(i).every(Boolean);return t.jsxs(t.Fragment,{children:[t.jsx(J,{size:"large",variant:"contained",onClick:a,fullWidth:!0,children:"New Graph"}),t.jsxs(rn,{onClose:d=>{h&&o()},className:le.Dialog??"",open:r,children:[t.jsx(D,{elevation:24,className:le.title??"",children:t.jsx("h3",{children:"New Graph"})},"title"),t.jsx(D,{elevation:24,className:classNames(le.Paper,le.FileUploadTeam),children:Ht.map((d,g)=>M.createElement(Pa,{setWillPatchData:c(g),...d,key:g}))},"upload"),t.jsx(ce,{}),t.jsx(D,{elevation:24,className:le.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,disabled:!v,onClick:()=>ze.unstable_batchedUpdates(()=>{if(v){const[d,g]=i.map(({fileName:y})=>y);if(!d||!g)return;i.forEach(({fileName:y,data:N},C)=>{n[C]?.(N),s[C]?.(y)}),f({dataset:d,BCviz_file:g},{replace:!0,preventScrollReset:!1,flushSync:!1,viewTransition:!0}),o()}}),children:"Comfirm"})},"confirm"),t.jsx(fn,{})]})]})}const Xa="_Tool_tgrdm_1",Ye={Tool:Xa,"x-line-mode":"_x-line-mode_tgrdm_7","x-line-mode-label":"_x-line-mode-label_tgrdm_10"};function Ja(e){const{toggleIsEditX:n=()=>{},isEditX:s,className:r,setDatas:a,setFileNames:o}=e,{pathname:i}=tr();return t.jsxs(D,{elevation:24,className:classNames(Ye.Tool,r),children:[t.jsx(Ka,{setDatas:a,setFileNames:o}),i===Hn.old?t.jsx(J,{variant:"outlined",className:Ye["x-line-mode"]??"",fullWidth:!0,children:t.jsx(As,{className:Ye["x-line-mode-label"]??"",onChange:n,control:t.jsx(an,{checked:s}),label:"Edit Mode"})}):null]})}const{isSafeInteger:Ya}=Number;function Kt({useSetInputST:[e,n],k:s,label:r=""}){const a=U(o=>n({[s]:o}));return t.jsxs(Pe,{fullWidth:!0,children:[t.jsx(Fe,{fullWidth:!0,placeholder:r,label:r,type:"number",title:s,value:e[s],required:!0,onChange:o=>{const{value:i}=o.target;if(!i){a(i);return}const l=parseInt(i),u=Number(i),c=+i;dt(l,u,c)&&Ya(l)&&l>=0&&a(l.toString())},inputProps:{min:0,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric"}),t.jsx(Bs,{})]})}const Za="_Input_1qdq0_1",Qa={Input:Za};function Wn({children:e,autoFocus:n,tabIndex:s,className:r,style:a,...o}){return t.jsx(ot,{...o,..._.omitBy({autoFocus:n,tabIndex:s,className:r,style:a},_.isUndefined),children:e})}const Un=({InputLabelProps:e,...n})=>t.jsx(Fe,{...n,size:"medium",InputLabelProps:{...e,className:e?.className??"",style:e?.style??{}}});function Ze(e){const{useSetInputST:n,modeKey:s,useGetFromST:r,fileNames:a,setTabToResult:o,dataArrWithPos:i,useMultiDots:[l,u]}=e,{data:c,loading:x,runAsync:m}=r,[f,b]=n,{s:S="",t:h=""}=Mn[s]??{};return t.jsx(ke,{value:s,className:k.TabPanel??"",children:t.jsxs(D,{elevation:24,className:Qa.Input??"",children:[t.jsx(Kt,{useSetInputST:n,k:"s",label:S}),t.jsx(Kt,{useSetInputST:n,k:"t",label:h}),t.jsx(on,{value:l??[],onChange:(p,v)=>{u(v)},multiple:!0,options:i,getOptionLabel:ge,renderOption:(p,v,{selected:d})=>t.jsxs(Wn,{...p,children:[t.jsx(an,{icon:t.jsx(Os,{fontSize:"large"}),checkedIcon:t.jsx(Rs,{fontSize:"large"}),checked:d}),ge(v)]}),renderInput:p=>t.jsx(Un,{...p,label:"Choose Vertices",placeholder:"Choose Vertices"}),disableCloseOnSelect:!0,autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1}),t.jsxs(Vs,{disabled:_.some(f,p=>p===""),variant:"contained",size:"large",onClick:()=>ze.unstable_batchedUpdates(async()=>{await m(s,c,{...a,problem_type:ut[s],...f,vertices:JSON.stringify(l?.map(({k:p,kInd:v})=>[mt[p],v]))}).then(p=>(Ie.success(`fetch ${s} success`),o(),p),()=>{Ie.error(`fetch ${s} fail`)})}),children:["Fetch ",s]})]})})}function eo(){return navigator.language}function to(){return navigator.languages[0]}function no(){return new Intl.DateTimeFormat().resolvedOptions().locale}function so(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}const ro=()=>eo()==="zh-CN"&&to()==="zh-CN"&&no()==="zh-CN"&&so()==="Asia/Shanghai"&&new Date().getTimezoneOffset()===-480&&new Intl.DateTimeFormat().resolvedOptions().timeZone==="Asia/Shanghai",ao=M.forwardRef(e=>{const{viewBox:n,graphLine:s,drawDotData:r,clickCircle:a,doubleClickCircle:o}=e;return t.jsxs("svg",{viewBox:n,className:E["graph-svg"],children:[s?.map(({pos:i,highlightLevel:l,color:u},c)=>t.jsx("polyline",{points:i.map(([x,m])=>`${x},${m}`).join(" "),fill:"none",stroke:"black",className:classNames(E.line,E[l]),style:{"--color":u}},c)),r.map(i=>{const{k:l,kInd:u,v:c,graphX:x,graphY:m,color:f}=i,b=ge(i);return t.jsx(t.Fragment,{children:t.jsx(G,{...zn(i),children:t.jsxs("g",{onDoubleClick:o({dotData:i}),onClick:a(i),className:$n(i),style:{"--color":f},children:[t.jsx("circle",{cx:x,cy:m,className:E.circle}),t.jsx("text",{x,y:m,className:E.text,children:b})]},x)})})})]})});function Xt(e){const{isEditX:n,xEnd:s,onClick:r=()=>{},dotData:{y:a,v:o},className:i=""}=e;return n?t.jsx(t.Fragment,{children:t.jsx("line",{x1:W,x2:s,y1:a,y2:a,className:classNames(E["hover-x"],i),onClick:r})}):null}const oo=M.forwardRef(e=>{const{viewBox:n,drawDotData:s,clickCircle:r,doubleClickCircle:a,svgRef:o,isEditX:i,commonValueFromTableData:{valuesArr:l,xRadix:u,length:c,getYPos:x,svgHeight:m},svgSize:f,size:b}=e,{xEnd:S=0,yEnd:h=0}=f,p=M.useMemo(()=>_.sortBy(_.uniq(l)).map(d=>({v:d,yPos:x(d)})),[s]),v=M.useMemo(()=>{let d=_.head(s);if(!d)return[];let g=ue(d);const y=[];for(let N=1;N<c;N++){let C=s[N];if(!C)break;let F=ue(C),O=F-g;const{x:z=0,y:be=0}=d,de=[z,be];for(;N<c;N++){const ne=s[N+1];if(ne){const R=ue(ne);if(R-F===O){C=ne,F=R;continue}}const{x:I=0,y:w=0}=C,P=[I,w];y.push([de,P]);break}d=C,g=F}return y},[s]);return t.jsxs("svg",{viewBox:n,ref:o,className:E.svg,style:{"--stroke-dasharray":u},children:[t.jsx("line",{x1:W,y1:h,x2:S,y2:h,className:E["coordinate-axis-x"]}),"  ",t.jsx("line",{x1:W,y1:W,x2:W,y2:h,className:E["coordinate-axis-y"]}),"  ",p.map(({v:d,yPos:g})=>t.jsxs("g",{className:E.g,onClick:a({v:d}),children:[t.jsx("text",{x:na,y:g,className:E["axis-text"],children:d}),t.jsx(Xt,{xEnd:S,isEditX:i,className:classNames({[E["hover-click-line"]??""]:d===b}),dotData:{v:d,y:g}})]})),v.map(([[d,g],[y,N]])=>t.jsx(t.Fragment,{children:t.jsx("line",{x1:d,y1:g,x2:y,y2:N,className:E.line})})),s.map(d=>{const{k:g,v:y,kInd:N,x:C,y:F,color:O}=d,z=zn(d);return t.jsx(t.Fragment,{children:t.jsxs("g",{className:$n(d),onClick:r(d),onDoubleClick:a({dotData:d}),style:{"--color":O},children:[t.jsx(G,{...z,children:t.jsx("text",{x:C,y:m,className:E.text,children:ge(d)})}),i?t.jsx(t.Fragment,{children:t.jsx("line",{x1:C,x2:C,y1:F,y2:h,className:E["hover-y"]})}):null,t.jsx(G,{...z,children:t.jsx("circle",{cx:C,cy:F,className:E.circle})}),t.jsx(Xt,{xEnd:S,dotData:d,isEditX:i,onClick:a({dotData:d}),className:classNames({[E["hover-x--no-show"]??""]:y===b})})]})})})]})});function io(){const[e,n]=te(),[s,r]=te([]),a=M.useRef(null),o=M.useMemo(fa(a),[a.current]),i=M.useMemo(()=>Be(e,o),[e,o]);return{tableData:e,setTableData:n,graphData:s,setGraphData:r,svgRef:a,svgSize:o,commonValueFromTableData:i}}const lo=e=>({clickCircle:U(pa(e))}),Qe=e=>`${qn.name}${e}`;function qn(e){const{dataArrWithPos:n,graphData:s,svgSize:r,setSize:a=()=>{},isEditX:o,size:i}=e,l=M.useMemo(()=>ma({...e,size:i}),[i,n]),{svgWidth:u=0,svgHeight:c=0}=r,x=c,m=M.useMemo(()=>ha({drawDotData:l,graphData:s}),[l]),{clickCircle:f}=lo({...e,setSize:a,size:i}),b=U(Ln({isEditX:o,setSize:a,size:i,drawDotData:l})),S={...e,drawDotData:l,clickCircle:f,doubleClickCircle:b,graphLine:m,size:i};return t.jsxs(t.Fragment,{children:[t.jsx(Se,{value:L.table,children:t.jsx(oo,{...S,viewBox:[0,0,u,x].join(" ")})},Qe(L.table)),t.jsx(Se,{value:L.graph,children:t.jsx(ao,{...S,viewBox:[0,0,u,c].join(" ")})},Qe(L.graph)),t.jsx(ke,{value:L.result},Qe(L.result))]})}const co="_Dialog_1fpbd_1",uo="_title_1fpbd_4",ho="_Paper_1fpbd_7",mo="_Fab_1fpbd_11",pe={Dialog:co,title:uo,Paper:ho,Fab:mo},po=({renderingEngine:e})=>{switch(e){case"SVG Engine":return t.jsx(t.Fragment,{children:"It is unstable! Suitable for small data volumes, few functions are available, and performance is low."});case"ECharts Engine":return t.jsx(t.Fragment,{children:"Suitable for large data volumes. With many available functions and high performance."})}};function fo(e){const{setSelectEngine:n,selectEngine:s}=e,[r,{setTrue:a,setFalse:o}]=ye(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Ws,{size:"large",onClick:a,title:"settings",className:pe.Fab??"",children:t.jsx(G,{title:"settings",arrow:!0,children:t.jsx(sn,{size:"large",children:t.jsx(Us,{fontSize:"large"})})})}),t.jsxs(rn,{onClose:o,className:pe.Dialog??"",open:r,children:[t.jsx(D,{elevation:24,className:pe.title??"",children:t.jsx("h3",{children:"Settings"})},"title"),t.jsx(ce,{}),t.jsx(D,{elevation:24,className:classNames(pe.Paper),children:t.jsxs(Pe,{fullWidth:!0,children:[t.jsx(G,{arrow:!0,title:"Select Rendering Engine",placement:"top",children:t.jsx(ln,{children:"Select Rendering Engine"})}),t.jsx(cn,{fullWidth:!0,label:"Select Rendering Engine",defaultValue:"ECharts Engine",onChange:i=>{const l=i.target.value;l==="SVG Engine"&&!confirm("SVG is very unstable! Are you sure you want to switch to it?")||n(l)},value:s,children:["ECharts Engine","SVG Engine"].map(i=>t.jsx(ot,{value:i,children:t.jsx(G,{arrow:!0,placement:"right",title:t.jsx(po,{renderingEngine:i}),children:t.jsx("div",{children:i})})},i))})]})},"content"),t.jsx(ce,{}),t.jsx(D,{elevation:24,className:classNames(pe.Paper),children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,color:"warning",onClick:()=>{confirm("Are you sure you want to clear the cache?")&&vr().then(()=>{alert("Clear Success!")},()=>{alert("Clear Fail!")})},children:"Clear Cache"})},"content"),t.jsx(ce,{}),t.jsx(D,{elevation:24,className:pe.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,onClick:o,startIcon:t.jsx(qs,{fontSize:"large"}),children:"Back"})},"back")]})]})}const go="_Form_3js51_1",xo={Form:go},{isSafeInteger:bo}=Number;function vo(e){const{setSize:n,value:s,max:r}=e,[a,o]=te(s);fe(()=>{o(s)},[s]);const i=_.isUndefined(a),l=!i&&(a<0||a>r);return t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Please double-click the dot on the Cohesion."}),t.jsx(ce,{variant:"fullWidth",flexItem:!0,children:t.jsx(nn,{label:"OR"})}),t.jsxs(D,{elevation:24,className:xo.Form??"",children:[t.jsx(Pe,{fullWidth:!0,children:t.jsx(Fe,{fullWidth:!0,placeholder:"Input Size",label:"Input Size",type:"search",title:"Input Size",value:a,inputProps:{min:0,max:r,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric",onChange:u=>ze.unstable_batchedUpdates(()=>{const{value:c}=u.target;if(!c)o(void 0);else{const x=parseInt(c);bo(x)&&o(x)}}),error:l,...l?{helperText:`Size is not in the right range(0 ~ ${r}).`}:null})}),t.jsx(G,{arrow:!0,title:i?"Set size to undefined":`${$["Hierarchical Subgraphs Search"]} with size is ${a}`,children:t.jsx(J,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>{n(a)},disabled:l,children:"Search"})})]})]})}const _o=()=>Promise.all([fetch("writer.supervertex"),fetch("writer.superedge")]).then(e=>e.map(n=>n.text())).then(e=>Promise.all(e)).then(async([e,n])=>!e||!n?{}:{tableData:Vn(e),graphData:Ha(n)}),st="tan",Gn="red",{isSafeInteger:Jt}=Number,{entries:Yt,freeze:ti,values:ni,keys:si,fromEntries:ri}=Object;if(jr){const{from:e}=Array,n=console.error;console.error=function(s){typeof s=="string"&&(s.startsWith('Warning: Each child in a list should have a unique "key" prop.')||s.startsWith("Warning: validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s"))||n.apply(console,e(arguments))}}var Hn=(e=>(e.old="/old",e.new="/new",e))(Hn||{});const jo=(e,n)=>!_.isUndefined(e)&&e>=n,Zt=({title:e,detail:n})=>_.isUndefined(n)?null:t.jsxs(un,{className:E.Accordion??"",defaultExpanded:!0,children:[t.jsx(dn,{expandIcon:t.jsx(hn,{}),className:E["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(ee,k["Main-Right--Show--Text"]),children:e})}),t.jsx(mn,{className:E["Accordion-Details"]??"",children:t.jsx("p",{className:k["Main-Right--Show--Text"],children:n})})]},e),vt=36;M.createContext({});function So(){at(()=>{const{origin:j,protocol:T,hash:V}=location;if(!sessionStorage.hjx&&et&&j!==Ot&&T==="https:"&&ro()){const A=Ot+V;confirm(`后端服务已上线，点击“确认”跳转.${A}`)?location.href=A:sessionStorage.setItem("hjx","hxj")}}),Qt("beforeunload",j=>{if(et&&(Z||r)){j.preventDefault();const T="You have unsaved changes. Are you sure you want to leave?";return j.returnValue=T,T}});const[e]=ye(!1),{tableData:n,setTableData:s,graphData:r,setGraphData:a,svgSize:o,commonValueFromTableData:i,svgRef:l}=io(),{data:u,runAsync:c,mutate:x}=jt(_o,{...Vt,manual:!0});fe(()=>{N(void 0),n&&(n.length>vt?c():x(void 0))},[n]),fe(()=>{},[n]);const{svgWidth:m=0,svgHeight:f=0}=o,[b="",S]=St("dataset",{defaultValue:""}),[h="",p]=St("BCviz_file",{defaultValue:""}),v={dataset:b,BCviz_file:h},d=jt(Aa,{...Vt,manual:!0,staleTime:-1,cacheTime:-1}),{data:g,loading:y,mutate:N}=d,C=tn({s:"",t:""}),[F,O]=te(L.table),[z,be,de]=en($["Maximum Biclique"]),[ne,I]=te("ECharts Engine"),w=M.useMemo(()=>gt(z),[z]),[P,R]=te(0),K=te([]),[Y,he]=K,[me,{set:we,setTrue:Oe,setFalse:No}]=ye(!0),Z=M.useMemo(()=>Dt(me,n),[n,me]),{size:oe,UV:Q,dataThisMode:Do,dataArr:ve,selectShowData:_t,count:Kn,numOfData:Ne,params:De}=M.useMemo(()=>{const j=g?.[z];if(!j)return{};const{count:T,dataArr:V,...A}=j,X=V?.[P];if(!X)return{};const{size:se,count:B,label:re,...ae}=X;return w?{size:se}:{size:se,UV:ae,dataThisMode:j,dataArr:V,selectShowData:X,count:B,numOfData:T,params:A}},[g,z,P,Z]),Xn=ne==="ECharts Engine",Re=_.isUndefined(oe),Ve=U(j=>{N({...g,[$["Hierarchical Subgraphs Search"]]:{dataArr:[{size:j}]}})});fe(()=>{O(L.table),de()},[Z,ne]),fe(()=>{he([])},[Z]);const{dataArrWithPos:_e,visualMapSection:Mo}=M.useMemo(()=>{const j=pt(Z,r,i,f);if(w){const{datas:A,visualMapSection:X}=Pn({isEditX:w,dataArrWithPos:j,size:oe,commonValueFromTableData:i});return{dataArrWithPos:A,visualMapSection:X}}const T=Q?j?.map(A=>{const{k:X,kInd:se}=A,B=Q[X]?.includes(se)?st:void 0;return{...A,...B?{color:B}:null}}):j;return{dataArrWithPos:Nr(T,Y)}},[i,Q,z,oe,Y]),{resultGraph:Jn,resultTable:Yn}=M.useMemo(()=>{const{resultGraph:j,filterTableData:T}=(()=>{if(w||!Q){const B=_e.filter(({color:je})=>je),re=ft(B);return{resultGraph:r.filter(je=>_.every(je,(es,ts)=>!!re[ts][es])),filterTableData:B}}const X=r.filter(B=>_.every(B,(re,ae)=>Q[ae]?.includes(re)??!1)),se=Z.filter(({k:B,kInd:re})=>Q[B]?.includes(re));return{resultGraph:X,filterTableData:se}})(),V=Dt(me,T),A=Er(V,j,{svgWidth:m,svgHeight:f});return{resultGraph:j,resultTable:A}},[Q,r,Z,w,_e]),Zn=U(()=>{}),We={useSetInputST:C,useGetFromST:d,fileNames:v,setTabToResult:Zn,dataArrWithPos:Z??[],useMultiDots:K},Qn=U(j=>{const{dataIndex:T,name:V,value:A}=j;if(!w&&Jt(T)&&V&&Jt(A)&&typeof A=="number"){const X=V[0],se=parseInt(V.slice(1));if(!Z)return;const B=Z.find(({k:ae,kInd:je})=>ae===X&&je===se);if(!B)return;if(!Y||Y.length===0){he([B]);return}const re=Y.includes(B);he(re?Y.filter(ae=>ae!==B):[...Y,B])}});return t.jsxs(t.Fragment,{children:[t.jsxs(D,{className:k.Main??"",elevation:24,children:[t.jsx(fo,{setSelectEngine:I,selectEngine:ne}),t.jsx(Ut,{children:t.jsxs(D,{elevation:24,className:k["Main-Left"]??"",children:[t.jsx(Ja,{setDatas:[a,s],setFileNames:[S,p],className:k.Tool}),null,t.jsx(D,{elevation:24,className:k.Select??"",children:t.jsxs(Pe,{fullWidth:!0,children:[t.jsx(ln,{children:"Select Mode"}),t.jsx(cn,{value:z,onChange:j=>{be(j.target.value)},label:"Select Mode",fullWidth:!0,children:[$["Maximum Biclique"],$["Maximal Biclique Enumeration"],$["(p,q)-biclique Counting"],$["Hierarchical Subgraphs Search"]].map(j=>t.jsx(ot,{value:j,title:ut[j],children:j},j))})]})}),t.jsx(D,{elevation:24,children:t.jsxs(Ct,{value:z,children:[t.jsx(Ze,{...We,modeKey:$["Maximum Biclique"]}),t.jsx(Ze,{...We,modeKey:$["Maximal Biclique Enumeration"]}),t.jsx(Ze,{...We,modeKey:$["(p,q)-biclique Counting"]}),t.jsx(ke,{value:$["Hierarchical Subgraphs Search"],className:k.TabPanel??"",children:t.jsx(D,{elevation:24,className:k["Paper-text"]??"",children:t.jsx(vo,{value:oe,setSize:Ve,max:i.max})})})]})}),ve&&jo(ve?.length,2)?t.jsx(D,{elevation:24,className:k.Select??"",children:t.jsx(G,{title:t.jsxs(t.Fragment,{children:["Count: ",t.jsx("span",{className:ee,children:ve.length})]}),arrow:!0,placement:"right",children:t.jsx(on,{autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,blurOnSelect:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!0,disableCloseOnSelect:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1,options:ve,..._t?{value:_t}:null,onChange:(j,T,V,A)=>{R(T?ve.indexOf(T):0)},renderInput:j=>t.jsx(Un,{...j,label:"Choose Rank",placeholder:"Choose Rank"}),renderOption:(j,{label:T,...V},A)=>t.jsx(G,{title:wr(V),arrow:!0,placement:"right",children:t.jsx(Wn,{...j,children:T??`Rank ${A.index+1}`})})})})}):t.jsx(t.Fragment,{})]})}),t.jsx(D,{className:k["Main-Mid"]??"",elevation:24,children:t.jsxs(Ct,{value:F,children:[t.jsx(D,{elevation:24,children:t.jsxs(Gs,{onChange:(j,T)=>O(T),variant:"fullWidth",children:[t.jsx(Ue,{label:"Cohesion",value:L.table,className:k.Tab??""}),t.jsx(Ue,{label:"Bipartite Subgraph",value:L.graph,className:k.Tab??""}),t.jsx(G,{arrow:!0,title:De?t.jsx(t.Fragment,{children:t.jsxs("fieldset",{children:[t.jsx("legend",{className:ee,children:"Search Params"}),Yt(De).map(Ae)]})}):null,children:t.jsx(Ue,{label:"Search Result",value:L.result,disabled:Re,className:classNames({[k.Tab??""]:!Re})})})]})}),_e.length?Xn?t.jsx(En,{dataArrWithPos:_e,graphData:r,size:oe,resultGraph:Jn,selectMode:z,useSetInputST:C,setTab:O,resultTable:Yn,setSize:Ve,isEditX:w,commonValueFromTableData:i,clickEChartDotToAddMultiDots:Qn,dataFromST:g,superData:u}):t.jsx(qn,{commonValueFromTableData:i,graphData:r,dataArrWithPos:_e,isEditX:w,svgRef:l,svgSize:o,setSize:Ve,size:oe}):t.jsx(Hs,{className:k.Chart??"",variant:"rounded",animation:"wave"})]})}),Re?null:t.jsx(Ut,{buttonOrder:1,children:t.jsx(D,{className:k["Main-Right"]??"",elevation:0,children:t.jsxs(D,{elevation:24,className:k["Main-Right--Show"]??"",children:[_.isUndefined(Ne)?null:t.jsx(G,{arrow:!0,placement:"left",title:_.isUndefined(Ne)?null:t.jsxs("h4",{children:["The number of (",De?.s,",",De?.t,")-bicliques is: ",t.jsx("span",{className:ee,children:Ne})]}),children:t.jsx("h4",{className:classNames(ee,k["Main-Right--Show--Num"]),children:t.jsx("span",{children:Ne})})}),t.jsx(Zt,{title:"size",detail:oe}),Q?Yt(Q).map(([j,T])=>T.length?t.jsxs(un,{className:E.Accordion??"",defaultExpanded:T.length<=23,children:[t.jsx(dn,{expandIcon:t.jsx(hn,{}),className:E["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(ee,k["Main-Right--Show--Text"]),children:`${j} `})}),t.jsx(mn,{className:E["Accordion-Details"]??"",children:T.map(V=>t.jsx("p",{className:k["Main-Right--Show--Text"]??"",children:V}))})]},j):null):null,t.jsx(Zt,{title:"count",detail:Kn})]})})})]}),t.jsx(Ks,{open:e||y,className:k.Modal??"",children:t.jsx(Xs,{className:k.CircularProgress??""})}),t.jsx(fn,{})]})}function yo(){return t.jsx(nr,{children:t.jsx(sr,{index:!0,element:t.jsx(So,{})})})}const Co=()=>t.jsx(M.StrictMode,{children:t.jsx(Js,{injectFirst:!0,children:t.jsx(er,{children:t.jsx(yo,{})})})}),wo=document.body;Ys(wo).render(t.jsx(t.Fragment,{children:t.jsx(Co,{})}));
