import{j as e,r as N}from"./react-oik9md-E.js";import{i as q,U as h,g as K,a as Q,u as X,b as Y,B as $,S as Z,C as ee,c as te,w as ae,d as ne,s as se,e as oe}from"./main-UO4Pd_eg.js";import{m as ie,g as I,l as O,b as F}from"./ahooks-5_89LEPF.js";import{a as re}from"./react-router-m2kkV1nU.js";import{q as le,P as j,H as ce,J as ue,W as me,T as de,p as pe,B as A}from"./@mui-ZDVPm4if.js";import"./@babel-_Kefij6Y.js";import"./react-fast-compare-751UTDWK.js";import"./echarts-Vo_PYHjZ.js";import"./zrender-6ibt0cUB.js";import"./react-dom-tVoZXIl-.js";import"./scheduler-Xt5_ASe0.js";import"./react-toastify-5bXptfeX.js";import"./@algolia-kof8UNv8.js";import"./react-router-dom-ma-xgFTe.js";import"./@remix-run-phvj9XUc.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";const fe="_Mid_1dd8c_1",he={Mid:fe},ve="_Paper_1w3rq_1",be="_Tab_1w3rq_5",Ce="_TabPanel_1w3rq_8",xe="_input_1w3rq_18",T={Paper:ve,Tab:be,TabPanel:Ce,input:xe},ge=[{u:1,v:1},{u:1,v:2},{u:1,v:3},{u:1,v:4},{u:2,v:1},{u:2,v:2},{u:3,v:3},{u:3,v:4},{u:4,v:3},{u:4,v:4},{u:4,v:5},{u:5,v:5},{u:5,v:6},{u:6,v:5},{u:6,v:6},{u:7,v:7},{u:7,v:8},{u:8,v:7},{u:8,v:8}],_e={[h.U]:8,[h.V]:8},H=q?_e:{[h.U]:1,[h.V]:1},{isSafeInteger:B}=Number;function De(S){const{useFileName:w,useUVCount:[,C]}=S,[E,{setFalse:r}]=ie(!0),[o,x]=I(0),[c,i]=O(H);return e.jsx(le,{open:E,children:e.jsxs(j,{elevation:24,className:T.Paper??"",children:[e.jsxs(ce,{value:o,children:[e.jsx(ue,{onChange:(t,u)=>x(u),children:e.jsx(me,{label:"Create New",value:0,className:T.Tab??""})}),e.jsx(de,{value:0,children:e.jsx(j,{elevation:24,className:T.TabPanel??"",children:U.map(t=>{const u=`Please enter count of ${t}`;return e.jsx(pe,{fullWidth:!0,label:u,title:u,placeholder:u,type:"number",required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",inputMode:"numeric",error:!c[t],value:c[t],onChange:V=>{const{value:d}=V.target;if(d===""||_.isUndefined(d))i({[t]:void 0});else{const M=parseInt(d),P=Number(d);B(M)&&B(P)&&i({[t]:M})}},inputProps:{min:0,inputMode:"numeric",pattern:"^(0|[1-9]d*)$",max:99},className:T.input??""},t)})})})]}),e.jsx(A,{fullWidth:!0,size:"large",disabled:U.some(t=>!c[t]),variant:"contained",onClick:()=>{C(c),r()},children:"Confirm"})]})})}const{freeze:Te,fromEntries:z}=Object,{from:Ie}=Array,{isSafeInteger:W}=Number,{abs:je}=Math;new TextEncoder;const U=Te([h.U,h.V]);function Je(){const S=I(`file-${new Date().toJSON()}`),w=O(H),[C,E]=w,r=N.useMemo(()=>{const a=_.flatMapDepth(C,(s,p,k)=>Ie(new Array(s)).map((g,f)=>({k:p,kInd:f+1})),1),n=K(a,se);return Q(a,[],n,innerHeight)},[C]),[o,x]=I(),c=N.useMemo(()=>_.isUndefined(o)?r:[...r.slice(0,o),{...r[o],color:X},...r.slice(o+1)],[o,r]),[i,t]=I(q?ge:[{u:1,v:1}]),u=N.useMemo(()=>Y(c,i),[c,i]),d=["click","series",F(a=>{const{dataIndex:n,name:s,value:p,borderColor:k,color:g,data:f,dataType:m}=a;W(n)&&s&&m==="node"&&(_.isUndefined(o)?x(n):(n!==o&&t(_.uniqWith([...i,z([n,o].map(l=>{const v=r[l];return v?[v.k,v.kInd]:[]}))],_.isEqual)),x(void 0)))})],P=["dblclick","series",F(a=>{const{dataIndex:n,name:s,value:p,borderColor:k,color:g,data:f,dataType:m}=a,l=f;if(W(n)&&s&&m==="edge"){const{source:v,target:L}=l,R=z([v,L].map(b=>{if(typeof b=="string"){const D=b[0],J=parseInt(b.slice(1));return[D,J]}return[]})),y=i.findIndex(b=>U.every(D=>b[D]===R[D]));y!==-1&&t([...i.slice(0,y),...i.slice(y+1)])}})],G=re();return e.jsxs(j,{elevation:24,className:$.Main??"",children:[e.jsx(De,{useFileName:S,useUVCount:w}),e.jsx(Z,{}),e.jsxs(j,{elevation:24,className:classNames($["Main-Mid"],he.Mid),children:[e.jsx(ee,{option:u,onParams:[P,d],style:{"--minHeight":"90vh"}}),e.jsx(A,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{const a=i.map(({u:m,v:l})=>`${m} ${l}`).join(`
`),n=je(CRC32.str(a)).toString(36),s=`${n}.txt`,p=`${n}_cohesion.txt`;await Promise.all([s,p].map(m=>axios.head(m,{validateStatus(l){return l===200||l===304}}))).then(()=>!0,()=>!1)||(await te(a,s),await ae());const g=new URLSearchParams({dataset:s,BCviz_file:p});G({pathname:"/",search:`?${g.toString()}`});const f={fileInfo:{lastModified:Date.now(),name:s,size:a.length},fileData:a};ne({...oe,data:f,IDBValidKey:s})}catch{}},children:"Confirm"})]})]})}export{U as UVEnumArr,Je as default};
