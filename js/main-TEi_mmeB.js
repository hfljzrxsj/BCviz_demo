import{r as M,j as t}from"./react-oik9md-E.js";import{u as ts,a as at,b as O,c as Zt,d as ns,e as ss,f as ot,g as te,h as rs,i as Qt,j as en,k as Se,l as as,m as me,n as wt,o as Nt}from"./ahooks-rsxkj2vD.js";import{i as os}from"./react-fast-compare-751UTDWK.js";import{u as is,g as Dt,i as ls,a as cs,b as us,c as ds,d as hs,e as ms,f as ps,h as fs,j as gs,k as xs,l as bs,m as vs,n as _s,o as js,p as Ss,q as ys,r as Cs,s as ws,t as Ns,v as Ds}from"./echarts-Vo_PYHjZ.js";import{P as N,T as Pe,d as Ms,D as ie,L as Ie,B as J,a as Is,b as Es,c as G,e as Ts,f as ks,g as Ps,h as Fs,i as zs,C as tn,j as Fe,I as nn,k as $s,l as sn,F as Ls,m as rn,n as ze,o as As,M as it,A as an,p as Bs,q as Os,r as Rs,s as Ws,t as Vs,u as on,S as ln,v as Us,w as Mt,x as qs,y as Ue,z as Gs,E as cn,G as un,H as dn,J as hn,K as Hs,N as Ks,O as Xs,Q as Js}from"./@mui-eZ05xYRq.js";import{d as lt}from"./immer-U6fk-Zvt.js";import{a as Ys,r as $e,c as Zs}from"./react-dom-tVoZXIl-.js";import{Q as Ee,k as Qs}from"./react-toastify-5bXptfeX.js";import{d as er}from"./@algolia-kof8UNv8.js";import{u as tr,H as nr}from"./react-router-dom-GFem2kaG.js";import{u as sr,b as rr,c as ar}from"./react-router-I1NCjZ8i.js";import"./@babel-_Kefij6Y.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./zrender-6ibt0cUB.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";import"./scheduler-Xt5_ASe0.js";import"./@remix-run-wEAHOncH.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();function or(e,n){return e>>n&1}const ct=Object.freeze(["rgb(255, 0, 0)","rgb(255, 115, 0)","rgb(255, 251, 0)","rgb(72, 255, 0)","rgb(0, 255, 213)","rgb(0, 43, 255)","rgb(122, 0, 255)","rgb(255, 0, 200)"]),ir="_Main_1ppnf_15",lr="_Table_1ppnf_22",cr="_table_1ppnf_26",ur="_SVG_1ppnf_31",dr="_Accordion_1ppnf_38",hr="_line_1ppnf_70",mr="_circle_1ppnf_71",pr="_text_1ppnf_94",fr="_svg_1ppnf_94",gr="_highlight_1ppnf_100",xr="_g_1ppnf_52",br="_line_how_1ppnf_1",E={Main:ir,Table:lr,table:cr,SVG:ur,Accordion:dr,"Accordion-Summary":"_Accordion-Summary_1ppnf_42","Accordion-Details":"_Accordion-Details_1ppnf_48","graph-svg":"_graph-svg_1ppnf_52",line:hr,circle:mr,"no-highlight":"_no-highlight_1ppnf_84",text:pr,svg:fr,"axis-text":"_axis-text_1ppnf_94",highlight:gr,"more-highlight":"_more-highlight_1ppnf_116",g:xr,"hover-click-line":"_hover-click-line_1ppnf_273","hover-x":"_hover-x_1ppnf_273","hover-x--no-show":"_hover-x--no-show_1ppnf_273","hover-y":"_hover-y_1ppnf_274",line_how:br,"coordinate-axis-y":"_coordinate-axis-y_1ppnf_282","coordinate-axis-x":"_coordinate-axis-x_1ppnf_282","pulse-signup-button":"_pulse-signup-button_1ppnf_1"},{error:q}=console,It=e=>(e.addEventListener("abort",n=>{e.close(),q("abort",n)}),e.addEventListener("close",n=>{e.close(),q("close",n)}),e.addEventListener("error",n=>{e.close(),q("error",n)}),e.addEventListener("versionchange",n=>{e.close(),q("versionchange",n)}),e),vr=(e,n)=>(n.addEventListener("complete",()=>{e.close()}),n.addEventListener("abort",s=>{n.abort(),e.close(),q("abort",s)}),n.addEventListener("error",s=>{n.abort(),e.close(),q("error",s)}),n),mn=e=>new Promise(async(n,s)=>{const{DBname:r,version:a,storeName:o,keyPath:i,mode:l}=e,u=indexedDB.open(r,a);u.addEventListener("success",()=>{const c=It(u.result);if(c.objectStoreNames.contains(o))return n(vr(c,c.transaction(o,l,{durability:"strict"})).objectStore(o))}),u.addEventListener("upgradeneeded",()=>{const c=It(u.result);if(!c.objectStoreNames.contains(o))return c.createObjectStore(o,{autoIncrement:!0,...i?{keyPath:i}:null})}),u.addEventListener("error",c=>{s(c),q("error",c,u)}),u.addEventListener("blocked",c=>{s(c),q("blocked",c,u)})}).catch(q),ut=e=>{const{IDBValidKey:n,data:s}=e;return mn({...e,mode:"readwrite"}).then(r=>(r&&s&&r.add(s,...r.keyPath?[]:[n]).addEventListener("error",q),r),q).catch(q)},_r=async e=>new Promise((n,s)=>{const{query:r}=e;return mn({...e,mode:"readonly"}).then(a=>{if(a){const o=r?a.get(r):a.getAll();o.addEventListener("success",()=>{n(o.result)}),o.addEventListener("error",i=>{q(i,o),s(o.error)})}return a},s).catch(s)}),jr=()=>indexedDB.databases().then(e=>e.filter(({name:n})=>n).map(({name:n})=>n?indexedDB.deleteDatabase(n):new IDBOpenDBRequest),q).catch(q);var Sr={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{DEV:pn,PROD:et}=Sr,{freeze:Le,entries:yr,values:ti}=Object,Cr=e=>!!(et&&e&&_.isPlainObject(e));var A=(e=>(e["Maximum Biclique"]="Maximum Biclique",e["Maximal Biclique Enumeration"]="Maximal Biclique Enumeration",e["(p,q)-biclique Counting"]="(p,q)-biclique Counting",e["Hierarchical Subgraphs Search"]="Hierarchical Subgraphs Search",e))(A||{});const dt=Le({"Maximum Biclique":"MEB","Maximal Biclique Enumeration":"MBE","(p,q)-biclique Counting":"PQB","Hierarchical Subgraphs Search":""}),wr=Le({DBname:"HJX",storeName:"HXJ"}),fn=e=>_r({...wr,query:e}).then(n=>{if(Cr(n))return n;throw new Error(n)});var B=(e=>(e[e.table=0]="table",e[e.graph=1]="graph",e[e.result=2]="result",e))(B||{});Le({0:"Cohesion"});const Nr=e=>yr(e).map(ft),se="tanContent",pe=({k:e,kInd:n})=>`${e}${n}`,Dr=(e,n)=>{if(!n||n.length===0)return e;const s=_t(n);return e?.map(a=>{const{k:o,kInd:i}=a,l=s[o][i]?qn:void 0;return{...a,...l?{color:l}:null}})},Et=40,Mr=80,Ir=e=>{const s=_.sortBy(e,({v:a})=>a).slice(yt*-1);return _.sortBy(s,({i:a})=>a)},Tt=(e,n)=>{if(!n)return[];if(e)return n;const s=n.map((r,a)=>({...r,i:a}));return n.length<=yt?s:Ir(s)},Er=(e,n,{svgWidth:s,svgHeight:r})=>vt(e,n,Be(e,{svgWidth:s,svgHeight:r}),r),gn=Le({svgHeight:innerHeight,svgWidth:innerWidth}),Tr="_Main_1idkx_15",kr="_Select_1idkx_38",Pr="_TabPanel_1idkx_41",Fr="_Tab_1idkx_41",zr="_hidden_1idkx_83",$r="_Chart_1idkx_87",Lr="_Modal_1idkx_92",Ar="_CircularProgress_1idkx_99",P={Main:Tr,"Main-Left":"_Main-Left_1idkx_33",Select:kr,TabPanel:Pr,"Paper-text":"_Paper-text_1idkx_44","Main-Mid":"_Main-Mid_1idkx_51",Tab:Fr,"Main-Right":"_Main-Right_1idkx_62","Main-Right--Show":"_Main-Right--Show_1idkx_69","Main-Right--Show--Text":"_Main-Right--Show--Text_1idkx_75","Main-Right--Show--Num":"_Main-Right--Show--Num_1idkx_80",hidden:zr,Chart:$r,Modal:Lr,CircularProgress:Ar,"pulse-signup-button":"_pulse-signup-button_1idkx_1"},Te=(e=()=>{})=>Ur?.(()=>qr?.(()=>Vr?.(()=>Wr?.(()=>ht?.resolve?.()?.then?.(()=>{const{port1:n,port2:s}=new Rr;n?.postMessage?.(null),s.onmessage=e}).catch?.(mt))))),Ae=(e=()=>{})=>new ht(n=>Te?.(n))?.then?.(()=>Te?.(e)).catch?.(mt),Br=(e=()=>{})=>Or("load",()=>new ht(n=>Te?.(n))?.then?.(()=>Te?.(e)).catch?.(mt)),{Promise:ht,addEventListener:Or,console:{error:mt}={},MessageChannel:Rr,queueMicrotask:Wr,requestAnimationFrame:Vr,requestIdleCallback:Ur,setTimeout:qr}=window??self??globalThis??void 0;is([cs,us,ds,hs,ms,ps,fs,gs,xs,bs,vs,_s,js,Ss,ys,Cs,ws,Ns]);const xn=window??self??globalThis??global??void 0??new EventTarget,{addEventListener:Gr,removeEventListener:Hr}=xn,{dispatchEvent:Kr}=xn,tt="resize",Xr=new Event(tt),qe=M.memo(e=>{const{option:n,onParams:s=[]}=e,r=M.useRef(null);return ts(()=>{const{current:a}=r;if(!a||!n)return;const o=Dt(a)??ls(a);o.showLoading(),Ae(()=>{o.setOption(n,!0,!0),s.map(c=>o.on(...c)),o.hideLoading()});const i=$n(o.resize),l=()=>i(),u=new ResizeObserver(l);return u.observe(a),Gr(tt,l),()=>{s.map(([c,,g])=>o.off(c,g)),u.disconnect(),i.cancel?.(),i.clear?.(),Hr(tt,l)}},[n]),at(()=>{const{current:a}=r;if(!a)return;const o=Dt(a);o&&(o.clear(),o.dispose())}),t.jsx(t.Fragment,{children:t.jsx(N,{elevation:24,ref:r,className:P.Chart??""})})},os),{error:Jr}=console;function pt(...e){if(e.length===0)return!0;const n=_.head(e);return e.every(s=>_.isEqual(s,n))}const Yr=(e,n)=>n.every(s=>s===e),kt=e=>{if(!(e instanceof HTMLDivElement))return!1;const{childElementCount:n,childNodes:s,children:r,firstChild:a,lastChild:o,firstElementChild:i,lastElementChild:l}=e;return!e.hasChildNodes()||!Yr(1,[n,s.length,r.length])?!1:pt(a,o,i,l,s.item(0),r.item(0))},Pt="mouseup",Zr=["ctrl","alt","shift","meta"].map(e=>`${e}.f11`);function _e({children:e,...n}){const s=M.useRef(null),{current:r}=s,a=O(u=>{if(!kt(u))return null;const c=u?.firstChild;return kt(c)?c:null}),o=O($n(u=>u instanceof HTMLDivElement&&!document.fullscreenElement?u.requestFullscreen({navigationUI:"hide"}).catch(Jr):Promise.reject(u)));at(()=>{o.cancel?.(),o.clear?.()});const i=O(u=>{const c=a(r),{target:g,currentTarget:m}=u;if(!(!c||!pt(r,g,m))){if(u instanceof MouseEvent){const{button:f,altKey:b,ctrlKey:j,metaKey:h,shiftKey:p,relatedTarget:S,type:d}=u;if(d===Pt&&f===0&&!b&&!j&&!h&&!p&&!S)return}return u.preventDefault(),o(c)}});Zt(["contextmenu","dblclick","auxclick",Pt],i,{enable:!!r,target:r}),ns(Zr,u=>{const c=a(r);return o(c)},{exactMatch:!0});const l=ss();return ot(()=>{Ae(()=>{r||l()})}),t.jsx(Pe,{...n,ref:s,children:t.jsx(N,{elevation:24,children:e})})}const Ft=Ds.color,{isSafeInteger:zt}=Number,{min:bn,max:vn}=Math,ft=([e,n])=>t.jsxs("div",{children:[t.jsx("span",{children:`${e}: `}),t.jsx("span",{className:se,children:n?.toString()})]},e),$t=4,Qr=(e,n)=>e.length>n?e.slice(0,n):e,gt=({k:e,kInd:n,v:s,neighbor:r,color:a})=>[["Vertex Name",`${e+n}`],["Maximum Cohesion",`${s}`],_.isUndefined(r)?void 0:["Neighbors",`${Qr(r,$t).map(({k:o,kInd:i})=>`${o+i}`).join(", ")}${r.length>$t?"...":""}`],["Vertex Degree",`${r?.length}`]],ea=e=>{const{k:n,kInd:s,v:r,neighbor:a,color:o}=e;return[gt(e)[0],["Contain Vertices",`${r}`]]},_n=(e,n,s=gt)=>{const{k:r,kInd:a,v:o,neighbor:i,color:l}=e;return t.jsxs(t.Fragment,{children:[l&&n&&!Ln(n)?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs("span",{className:se,children:["fetch ",n," result"]})}),t.jsx("br",{})]}):null,s(e).filter(Boolean).map(ft)]})},jn=(...e)=>Ys(_n(...e)),Sn={trigger:"item",axisPointer:{type:"cross"},label:{show:!0}},yn=lt({label:{show:!0},roam:!0}),Cn={toolbox:{show:!0,feature:{saveAsImage:{},restore:{},dataView:{},dataZoom:{},magicType:{},brush:{}}}},Ge=lt({show:!0,snap:!0}),wn={lineStyle:{shadowColor:"rgba(0,0,0,.5)",shadowBlur:10},scale:!0,label:{show:!0,fontSize:24,fontWeight:"bolder"},labelLine:{show:!0},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:10}},ta=({isBiggerThanShowAllCount:e,maxV:n,minV:s,dataArrWithPos:r})=>{if(e)return{symbolSizeMax:n,symbolSizeMin:s};const a=r.map(({neighbor:l})=>l?.length),o=bn(...a);return{symbolSizeMax:vn(...a),symbolSizeMin:o}},na=(e,n)=>{if(e){const s=n,r=bn(...s),a=vn(...s),o=10,i=1,l=(o-i)/(a-r);return c=>(c-r)*l+i}else return s=>s},He=(e,n,s,r=void 0,{max:a,min:o}=Be(e,gn),i=!1)=>{if(!e||!n)return{};const l=fa(e,n),{symbolSizeMax:u,symbolSizeMin:c}=ta({isBiggerThanShowAllCount:i,maxV:a,minV:o,dataArrWithPos:e}),g=(Mr-Et)/(u-c),m=h=>(h-c)*g+Et,f=_.uniq(n.map(({superWidth:h})=>h)),b=na(i,f);return{...Cn,tooltip:{},legend:{data:[H.U,H.V]},series:[{type:"graph",...yn,tooltip:{...Sn,formatter(h,p,S){const{dataType:d,dataIndex:x,data:y,name:D}=h;if(d==="edge"){const{source:F,target:R,superWidth:L}=y;return[D,L].filter(Boolean).join("<br/>")}const w=e[x];return w?jn(w,s,i?ea:gt):p}},categories:[{name:H.U,base:H.U},{name:H.V,base:H.V}],edgeLabel:{},data:e.map(h=>{const{k:p,kInd:S,graphX:d,graphY:x,v:y,color:D,neighbor:w}=h,F=m(i?y:w?.length??y);return{name:pe(h),value:y,category:p,symbolSize:F,x:d,y:x,...D?{itemStyle:{color:D}}:null}}),links:n?.map(({u:h,v:p,superWidth:S},d)=>{const x=l[d];return{source:`u${h}`,target:`v${p}`,lineStyle:{..._.isUndefined(S)?null:{width:b(S)},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Ft[0]},{offset:1,color:Ft[1]}],global:!1},...x?{color:l[d],width:4}:null},superWidth:S}}),lineStyle:{opacity:1,cap:"round",join:"round",shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},emphasis:{focus:"adjacency",...wn}}]}},sa=e=>e?{itemStyle:{color:e,shadowColor:"rgba(0,0,0,.3)",shadowBlur:16},symbolSize:16,symbol:"circle"}:{},Nn=lt({[A["Maximum Biclique"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[A["Maximal Biclique Enumeration"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[A["(p,q)-biclique Counting"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"}});_.debounce(()=>{Ee.warn("result is empty")});const Ke=e=>`${Dn.name}${e}`;function Dn(e){const{dataArrWithPos:n,graphData:s,size:r,resultGraph:a,selectMode:o,useSetInputST:i,setTab:l,resultTable:u,setSize:c,isEditX:g,commonValueFromTableData:m,clickEChartDotToAddMultiDots:f,superData:b}=e,j=_.isUndefined(r),{dataArrWithPos:h,visualMapSection:p,sections:S}=M.useMemo(()=>{if(g){const{datas:T,visualMapSection:C,sections:z}=kn({...e});return{dataArrWithPos:T,visualMapSection:C,sections:z}}return{dataArrWithPos:n}},[n]),d=M.useMemo(()=>{if(h)return{...Cn,dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"none"},{type:"slider",yAxisIndex:0,filterMode:"none"},{type:"inside",xAxisIndex:0,filterMode:"none"},{type:"inside",yAxisIndex:0,filterMode:"none"}],tooltip:{...Sn,formatter(T,C){if("dataIndex"in T){const z=h[T.dataIndex];if(z)return jn(z,o)}return C}},xAxis:{type:"category",data:h.map(pe),axisPointer:Ge},yAxis:{type:"value",axisPointer:Ge},series:[{...yn,data:h.map(({v:T,color:C})=>({value:T,...sa(C)})),type:"line",emphasis:{focus:"self",...wn},symbolSize:8,...g&&!j&&p?{markLine:{symbol:["circle","circle"],data:[{yAxis:r}]},markArea:{animation:!0,data:p.map(({start:T,end:C,color:z},W)=>{const X=h[T],Y=h[C],ue=`${X?.k}${X?.kInd}~${Y?.k}${Y?.kInd}`,de={color:z,opacity:.03},Ce={show:!0,formatter:ue,position:"insideBottom",color:"#000"},Oe={label:Ce,itemStyle:{opacity:.05}};return[{itemStyle:de,label:Ce,xAxis:T,emphasis:Oe},{itemStyle:de,label:Ce,xAxis:C,emphasis:Oe}]})}}:null}],axisPointer:Ge,...g&&p?{visualMap:{pieces:p.map(({start:T,end:C,color:z})=>{const W=h[T],X=h[C];return{min:T,max:C,color:z,label:`${W?.k}${W?.kInd}~${X?.k}${X?.kInd}`}}),dimension:0,show:!0,outOfRange:{color:"Gray",colorAlpha:.8},inverse:!0}}:null}},[h]),x=M.useMemo(()=>{if(!h)return;if(b){const{tableData:C,graphData:z}=b;if(C&&z){const W=Be(C,gn),X=vt(C,z,W,innerHeight);return He(X,z,o,void 0,W,!0)}}return He(h,s,o,void 0,m)},[h,b]),y=M.useMemo(()=>{if(!j&&!a?.length){const T=Nn[o];return{title:{text:`${o} result is empty`,subtext:`${_.map(i[0],(C,z)=>`${T?.[z]}: ${C}`).join(`
`)}`,left:"center",top:"center",textStyle:{fontSize:30,lineHeight:60},subtextStyle:{fontSize:20,lineHeight:40}}}}return He(u,a)},[a]),D=O(zn({isEditX:g,setSize:c,size:r})),w=["dblclick","series",T=>{const{dataIndex:C,name:z,value:W}=T;zt(C)&&z&&zt(W)&&typeof W=="number"&&D({v:W})()}],F=["click","series",f],R=t.jsx(qe,{option:d,onParams:[w,F]}),L=t.jsx(qe,{option:x,onParams:[w,F]}),ge=t.jsx(qe,{option:y}),[ce,ne]=te(["line","graph"]);return rs(ce),O((T,C)=>ce.includes(C)?T:null),t.jsxs(t.Fragment,{children:[t.jsx(_e,{value:B.table,children:R},Ke(B.table)),t.jsx(_e,{value:B.graph,children:L},Ke(B.graph)),t.jsx(_e,{value:B.result,children:ge},Ke(B.result))]})}const{values:ra,freeze:xt,keys:ni}=Object;var H=(e=>(e.U="u",e.V="v",e))(H||{});const aa=xt({0:"u",1:"v"}),V=32,oa=V/2,Be=(e,{svgWidth:n,svgHeight:s})=>{const r=e?.map(({v:b})=>b)??[],a=Math.min(...r),o=Math.max(...r),i=o-a,{length:l}=r,u=n-V*2,c=s-V*2,g=u/(l-1),m=c/i;return{valuesArr:r,min:a,max:o,diff:i,realHeight:c,xRadix:g,yRadix:m,length:l,getYPos:b=>V+(o-b)*m,svgWidth:n,svgHeight:s}},bt=xt({u:0,v:1}),ia=Object.keys(bt).length,la=e=>e?{neighbor:e}:{},Lt=(e,n,s,r)=>(e[n]||(e[n]=[])).push({k:s,kInd:r}),Mn=()=>({u:{},v:{}}),ca=e=>{const n=Mn(),s=n.u,r=n.v;for(const a of e){const{u:o,v:i}=a;s&&r&&!_.isUndefined(o)&&!_.isUndefined(i)&&(Lt(s,o,"v",i),Lt(r,i,"u",o))}return n},vt=(e,n,{xRadix:s,getYPos:r,svgWidth:a,max:o,min:i},l)=>{if(!n||!e)return[];const u=ca(n),c=a-V*2,g=_.groupBy(e,({k:h})=>h),m=_.mapValues(g,h=>c/(h.length-1)),f=(l-V*2)/(ia-1),b=_.mapValues(g,h=>new Map(_.sortBy(h,({kInd:p})=>p).map(({kInd:p},S)=>[p,S])));return e?.map((h,p)=>{const{v:S,k:d,kInd:x}=h;return{...h,i:p,x:V+p*s,y:r(S),graphX:V+(b[d].get(x)??0)*m[d],graphY:V+bt[d]*f,...la(u?.[d][x])}})},ye=xt(["more-highlight","highlight","no-highlight"]),nt=_.last(ye)??"",In=ye.map(e=>_.camelCase(`is-${e}`)),{length:En}=ye,ua=e=>1<<In.findIndex(s=>e[s]===!0)+1,da=(1<<En)-1,ha=e=>{for(let n=1;n<En;n++)if(or(e,n)===1)return ye[n-1]??nt;return nt},ma=e=>{const n=In.findIndex(s=>e?.[s]===!0);return ye[n]??nt},pa=e=>{if(e.includes(qn)&&e.includes(rt))return rt;if(e.length!==1)return;const n=_.head(e);if(n)return n},_t=e=>{const n=Mn();return _.isUndefined(e)||e.length===0?n:{...n,..._.mapValues(_.groupBy({...e},({k:s})=>s),s=>_.keyBy(s,({kInd:r})=>r))}},fa=(e,n,s=_t(e))=>!e||!n?[]:n?.map(r=>{const a=_.uniq(_.map(r,(o,i)=>s[i]?.[o]?.color));return pa(a)}),ga=({drawDotData:e,graphData:n})=>{const s=_.mapValues(_.groupBy(e,({k:r})=>r),r=>_.keyBy(r,({kInd:a})=>a));return n?.map(r=>{const a=ra(_.mapValues(r,(u,c)=>s[c]?.[u])),o=a.reduce((u,c,g,m)=>{const{pos:f,highlightLevelNum:b}=u;if(!c)return u;const{graphX:j,graphY:h,color:p}=c;return{pos:[...f,[j,h]],highlightLevelNum:b&ua(c)}},{pos:[],highlightLevelNum:da,color:""}),{highlightLevelNum:i}=o,l=_.uniq(a.map(u=>u?.color?u.color:""));return{...o,highlightLevel:ha(i),...l.length===1?{color:_.head(l)}:null}})},le=e=>e.v,Tn=ct.length,xa=({isEditX:e,dataArrWithPos:n,commonValueFromTableData:{length:s},size:r})=>{if(!e)return n;const a=_.isNil(r);if(a)return n.map(c=>({...c,color:"",isHighlight:a?!1:c.v>=r}));const o=[];let i=0,l=_.head(n);if(!l)return n;let u=le(l);for(let c=1;c<=s;c++){const g=[l];for(;c<s;c++){const m=n[c];if(!m)break;const f=le(m);if(f>=r||f>=u)g.push(m),l=m,u=f;else{l=m,u=f;break}}o.push(...g.map(m=>({...m,color:ct[i%Tn]??""}))),i++}return o.map(c=>({...c,isHighlight:c.v>=r}))},kn=e=>{const{isEditX:n,dataArrWithPos:s,commonValueFromTableData:{length:r},size:a,colors:o=ct}=e;if(!n)return{datas:s,sections:[]};if(_.isNil(a))return{datas:s,sections:[]};const l=[];let u=0;const c=[],g=[],m=[],f=[];for(let b=0;b<r;b++){const j=s[b];if(!j)break;const h=le(j),p=s[b+1],S=()=>{m.push(j),f.push(b)},d=()=>{if(h>=a){S();const y=o[u%Tn]??"";return c.push(m),g.push({start:_.head(f)??0,end:_.last(f)??0,color:y}),l.push(...m.map(D=>({...D,color:y}))),m.length=0,f.length=0,u++,1}else return l.push(j),0};if(!p){d();break}le(p)>=a?S():d()}return{datas:l,sections:c,visualMapSection:g}},ba=({isEditX:e})=>n=>()=>{},Pn=e=>({title:_n(e),arrow:!0}),At=({clientWidth:e,clientHeight:n})=>{const s=e-V,r=n-V;return{svgWidth:e,svgHeight:n,xEnd:s,yEnd:r}},va=e=>()=>{const{current:n}=e;return At(n||{clientWidth:innerWidth,clientHeight:innerHeight})},Fn=e=>classNames(E.g,E[ma(e)]),zn=({isEditX:e,setSize:n,size:s})=>({dotData:r,v:a=r?.v})=>()=>{e&&n?.(a===s?void 0:a)},$n=e=>Ms(_.debounce(er(e,0))),Ln=e=>e===A["Hierarchical Subgraphs Search"],_a="_title_1tlbs_1",ja="_Paper_1tlbs_5",Sa="_Input_1tlbs_8",ya="_TextField_1tlbs_14",ae={title:_a,Paper:ja,Input:Sa,"input-file":"_input-file_1tlbs_11",TextField:ya,"TextField-Paper":"_TextField-Paper_1tlbs_20","TextField-Paper-input":"_TextField-Paper-input_1tlbs_23","FileInfo-Button":"_FileInfo-Button_1tlbs_26"},Ca="_Dialog_c2d28_1",wa="_title_c2d28_4",Na="_Paper_c2d28_7",Da="_FileUploadTeam_c2d28_11",oe={Dialog:Ca,title:wa,Paper:Na,FileUploadTeam:Da};function Ma(e){const{fileInfo:n}=e,{name:s,size:r,lastModified:a,type:o,downloadUrl:i}=n;return s?t.jsxs(t.Fragment,{children:[t.jsx(ie,{}),t.jsx(N,{elevation:24,className:oe.Paper??"",children:t.jsxs("fieldset",{children:[s?t.jsx("legend",{children:t.jsx(Ie,{href:i,title:"preview",target:"_blank",underline:"hover",children:s})}):null,s&&r?t.jsxs("p",{children:[" Content Length: ",filesize(r)]}):null,a?t.jsxs("p",{children:[" Last Modified: ",new Date(a).toJSON()]}):null,o?t.jsxs("p",{children:[" Content Type: ",o]}):null,t.jsxs(N,{elevation:0,className:oe["FileInfo-Button"]??"",children:[t.jsx(Ie,{href:i,target:"_blank",underline:"hover",children:t.jsxs(J,{variant:"outlined",children:[t.jsx(Is,{}),"preview"]})}),t.jsxs(J,{variant:"outlined",onClick:()=>{const l=document.createElement("a");l.href=i??"",l.download=s,l.click()},children:[t.jsx(Es,{}),"download"]})]})]})})]}):null}const Ia="_examples_141yp_1",Ea={examples:Ia};function Ta(e){const{defaultTxt:n,chooseExample:s}=e,[r,a,o]=Qt(null);return t.jsxs(N,{elevation:24,className:Ea.examples??"",children:[t.jsx(G,{title:"No suitable data? Click here to try these.",arrow:!0,children:t.jsxs(J,{size:"large",fullWidth:!0,onClick:i=>{a(i.currentTarget)},children:["> ",t.jsx(Ie,{component:"button",children:"Examples"})]})}),t.jsx(Ts,{open:!!r,anchorEl:r,onClose:()=>{o()},children:t.jsx(ks,{children:n.map((i,l)=>t.jsx(G,{arrow:!0,title:`Example ${l+1}`,placement:"right",children:t.jsx(Ps,{disablePadding:!0,children:t.jsx(Fs,{onClick:()=>{s(i),o()},children:t.jsx(Ie,{component:"button",underline:"hover",children:i})},i)})},i))})})]})}const{revokeObjectURL:ka,createObjectURL:Pa}=URL,{freeze:Fa}=Object,{error:ke}=console,za={lastModified:0,name:"",size:0,type:"",downloadUrl:""},An=e=>{e&&ka(e)},$a=e=>n=>{if(n){const s=An.bind(null,e);n.addEventListener("beforeunload",s),n.addEventListener("unload",s)}},jt=e=>{const n=Pa(e);return Ae(()=>{const s=$a(n);s(window??self??globalThis??void 0),s(document);const{documentElement:r,body:a,head:o,scrollingElement:i,firstElementChild:l,lastElementChild:u,activeElement:c,firstChild:g,lastChild:m,doctype:f,defaultView:b}=document;s(o),s(a),s(r),s(c),s(l),s(u),s(i),s(m),s(f),s(b),s(g)}),n},St=Fa({DBname:"HJX",storeName:"HXJ"}),La=e=>({...e,fileInfo:{...e.fileInfo,downloadUrl:jt(new Blob([e.fileData]))}}),Bn=e=>fn(e).then(La).catch(()=>fetch(e).then(async n=>{const{headers:s}=n,r=await n.text(),a=jt(new Blob([r])),o={fileInfo:{lastModified:Date.parse(s.get("last-modified")??""),name:e,size:parseInt(s.get("content-length")??""),type:s.get("content-type")??"",downloadUrl:a},fileData:r};return ut({...St,IDBValidKey:e,data:o}),o},ke)).catch(ke);function Aa(e){const{parseData:n,setWillPatchData:s,defaultTxt:r,title:a}=e,[o,i]=te(""),[l,u]=en(za);at(()=>{An(l.downloadUrl)});const c=O((m,f)=>{s({fileName:f.match(/[^\/]+$/)?.[0]??f,data:m})}),g=O(m=>Bn(m).then(f=>{if(f){const{fileInfo:b,fileData:j}=f,h=n(j);if(h.length===0){Ee.error("The file format is incorrect!");return}u(b),c(h,m)}},ke).catch(ke));return t.jsx(t.Fragment,{children:t.jsxs(N,{elevation:24,children:[t.jsx("h4",{className:ae.title,children:a}),t.jsxs(N,{elevation:24,className:classNames(ae.Paper,ae.Input),children:[t.jsxs(J,{component:"label",variant:"contained",startIcon:t.jsx(zs,{}),fullWidth:!0,title:"Upload File",children:["Upload File",t.jsx("input",{type:"file",className:ae["input-file"],onChange:m=>$e.unstable_batchedUpdates(()=>{const f=m.target.files?.[0];if(!f){alert("some error occur");return}const b=new FileReader;b.readAsText(f),b.onload=j=>{const h=j.target?.result||b.result;if(typeof h=="string")try{const{name:p,lastModified:S,size:d,type:x}=f;c(n(h),p);const y=jt(f);u({...l,name:p,lastModified:S,size:d,type:x,downloadUrl:y});const D={fileInfo:{...l,name:p,lastModified:S,size:d,type:x,downloadUrl:y},fileData:h};ut({...St,IDBValidKey:p,data:D})}catch{alert("some error occur")}}}),accept:".txt"})]}),t.jsx(ie,{orientation:"vertical",variant:"fullWidth",flexItem:!0,children:t.jsx(tn,{label:"OR"})}),t.jsxs(N,{elevation:24,className:ae.TextField??"",children:[t.jsxs(N,{elevation:24,className:ae["TextField-Paper"]??"",children:[t.jsx(Fe,{label:"Please input URL",onChange:m=>{i(m.target.value)},value:o,fullWidth:!0,placeholder:"Please input URL",title:"Please input URL",className:ae["TextField-Paper-input"]??""}),t.jsx(J,{size:"large",variant:"contained",disabled:!o,onClick:()=>g(o),children:"Fetch"})]}),t.jsx(Ta,{defaultTxt:r,chooseExample:m=>{i(()=>(g(m),m))}})]})]}),t.jsx(Ma,{fileInfo:l})]})})}const{isSafeInteger:Xe}=Number;function Bt(e){const n=e.split(`
`),s=[];let r=0,a;const{length:o}=n;for(;r<o;)if(n[r]?.startsWith("No.")){r++;const i=n[r++],l=n[r++],u=n[r++];let c;r<o&&n[r]?.startsWith("count:")&&(c=n[r++]);const g=i?.match(/size=(\d+)/)?.[1];if(!g)throw new Error("Invalid size format");const m=parseInt(g,10);if(!Xe(m)||m<=0)throw new Error("Size must be a positive integer");const f=l?.match(/U: (\d+(?: \d+)*)/);if(!f)throw new Error("Invalid U format");const b=f[1]?.split(" ").map(Number)??[];if(b?.some(isNaN)||b?.some(d=>d<=0))throw new Error("U values must be positive integers");const j=u?.match(/V: (\d+(?: \d+)*)/);if(!j)throw new Error("Invalid V format");const h=j[1]?.split(" ").map(Number)??[];if(h?.some(isNaN)||h?.some(d=>d<=0))throw new Error("V values must be positive integers");let p;if(c){const d=c.match(/count: (\d+)/)?.[1];if(!d)throw new Error("Invalid count format");if(p=parseInt(d,10),!Xe(p)||p<=0)throw new Error("Count must be a positive integer")}const S={size:m,[H.U]:b,[H.V]:h,label:`Rank ${s.length+1}`,...p?{count:p}:null};s.push(S)}else if(n[r]?.startsWith("The number of ")){const i=n[r+1];if(!i)throw new Error("The number of (\\d,\\d)-bicliques not has next line");const l=parseInt(i,10);if(!Xe(l)||l<=0)throw new Error("The number of (\\d,\\d)-bicliques must be a positive integer");a=l;break}else r++;return{dataArr:s,..._.isUndefined(a)?{}:{count:a}}}const{error:st}=console,{isSafeInteger:Ba}=Number,je="http://47.99.129.94";Br(()=>{const{origin:e,protocol:n,port:s,hostname:r}=location;if(!(e===je||pn)){const a="/api/test";axios.get(a,{validateStatus:o=>o===204}).catch(o=>{axios.get(`${je}${a}`).then(i=>{const{status:l,headers:u}=i;if(l===204){const{defaults:c}=axios;c.baseURL=je;return}}).catch(st)});return}});const Ot=(e,n)=>{const r=n.exec(e)?.[1]?.trim();return r?r.split(/\s+/).map(a=>{const o=parseInt(a);return Ba(o)?o:0}):[]},Oa=e=>{const r=/size=(\d+)/.exec(e)?.[1],a=r?parseInt(r,10):0,o=Ot(e,/U:\s+([\d\s]+)/),i=Ot(e,/V:\s+([\d\s]+)/);return{size:a,u:o,v:i,label:"Rank 1"}},Ra=e=>({[A["Maximum Biclique"]]:{dataArr:[Oa(e)]},[A["Maximal Biclique Enumeration"]]:Bt(e),[A["(p,q)-biclique Counting"]]:Bt(e)}),Wa=async(e,n,s)=>{const r="/api/BCviz/v3",a=`${r}?${new URLSearchParams({...s,problem:dt[e]})}`,o=await fn(a).catch(()=>axios.get(r,{responseType:"text",params:s}).then(i=>{const{data:l}=i,u={...Ra(l)[e],...s};return ut({...St,data:u,IDBValidKey:a}),u},i=>{throw st(i),new Error(i)})).catch(i=>{throw st(i),new Error(i)});return{...n,...o?{[e]:o}:null}},Rt=Object.freeze({loadingDelay:300,throttleWait:300,debounceWait:300,debounceLeading:!0}),Va="_Tool_17xe8_7",Ua="_IconButton_17xe8_10",qa="_triangle_17xe8_15",Ga="_rotate_17xe8_25",Me={"Main-Side":"_Main-Side_17xe8_1",Tool:Va,IconButton:Ua,triangle:qa,rotate:Ga},Wt=["225deg","45deg"];function Vt(e){const{buttonOrder:n=0,children:s,...r}=e,[a,{toggle:o}]=Se(!0);return s?t.jsxs(N,{className:Me["Main-Side"]??"",elevation:24,...r,children:[t.jsx(G,{title:`${a?"collapse":"expand"} toolbar`,arrow:!0,children:t.jsx(nn,{size:"large",className:Me.IconButton??"",onClick:()=>{o(),Ae(()=>{Kr(Xr)})},style:{"--order":n,"--initRotate":Wt[n],"--clickRotate":Wt[1-n]},children:t.jsx("div",{className:classNames(Me.triangle,{[Me.rotate??""]:a})})})}),t.jsx($s,{in:a,orientation:"horizontal",children:s})]}):null}const{error:On}=console,{from:Ut,isArray:si}=Array,{freeze:Ha}=Object,{isSafeInteger:fe}=Number,Rn=e=>{const n=e.trim().split(`
`),s=[];for(const r of n){const[a,o,i]=r.trim().split(/[ \t]/),l=parseInt(o),u=parseInt(i);if(!fe(l)||!fe(u))return[];s.push({k:aa[a],kInd:l,v:u})}return s},Ka=(e,n)=>{const[s,r]=e.trim().split(/[ \t]/),a=parseInt(s),o=parseInt(r);!fe(a)||!fe(o)||n.push({[H.U]:a,[H.V]:o})},Xa=(e,n)=>{const[s,r,a]=e.trim().split(/[ \t]/),o=parseInt(s),i=parseInt(r),l=parseInt(a);!fe(o)||!fe(i)||n.push({[H.U]:o,[H.V]:i,superWidth:l})},Ja=(e,n=Ka)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},Ya=(e,n=Xa)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},qt=["dataset","BCviz_file"],Gt=Ha([{title:"Bipartite Graph",parseData:Ja,defaultTxt:["example.txt","writer.txt","marvel.txt"]},{title:"Maximum Cohesion",parseData:Rn,defaultTxt:["example_cohesion.txt","writer_cohesion.txt","marvel_cohesion.txt"]}]),Je=(e="searchParams is not enough")=>{throw On(e),new Error(e)};function Za(e){const{setDatas:n,setFileNames:s}=e,[r,{setTrue:a,setFalse:o}]=Se(!1),{list:i,resetList:l,replace:u}=as(),c=O(d=>x=>u(d,x)),g=O(()=>l([])),[m,f]=tr(),{arrEntries:b,arrKeys:j}=M.useMemo(()=>{const d=Ut(m.entries()),x=d.map(([y])=>y);return{arrEntries:d,arrKeys:x}},[m]),h=M.useMemo(()=>{const{length:d}=n;return!(m.size<d||_.uniq(j).filter(x=>qt.includes(x)).length!==d)},[m]),p=O(()=>{a(),f()});ot(()=>{if(!h){p();return}const d=b.map(([,x])=>x);Promise.all(d.map(x=>Bn(x))).then(x=>{qt.map((y,D)=>{const w=j.indexOf(y),F=x[w]?.fileData,R=d[w];if(!F||!R)return Je();const L=Gt[D]?.parseData(F);return L?.length?{parseData:L,fileName:R}:Je("parse error")}).forEach(({parseData:y,fileName:D},w)=>{const F=n[w],R=s[w];if(!R||!F)return Je();F(y),R(D)})}).catch(x=>{On(x),p()})}),me(()=>{r||g()},[r]);const S=i.length===n.length&&Ut(i).every(Boolean);return t.jsxs(t.Fragment,{children:[t.jsx(J,{size:"large",variant:"contained",onClick:a,fullWidth:!0,children:"New Graph"}),t.jsxs(sn,{onClose:d=>{h&&o()},className:oe.Dialog??"",open:r,children:[t.jsx(N,{elevation:24,className:oe.title??"",children:t.jsx("h3",{children:"New Graph"})},"title"),t.jsx(N,{elevation:24,className:classNames(oe.Paper,oe.FileUploadTeam),children:Gt.map((d,x)=>M.createElement(Aa,{setWillPatchData:c(x),...d,key:x}))},"upload"),t.jsx(ie,{}),t.jsx(N,{elevation:24,className:oe.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,disabled:!S,onClick:()=>$e.unstable_batchedUpdates(()=>{if(S){const[d,x]=i.map(({fileName:y})=>y);if(!d||!x)return;i.forEach(({fileName:y,data:D},w)=>{n[w]?.(D),s[w]?.(y)}),f({dataset:d,BCviz_file:x},{replace:!0,preventScrollReset:!1,flushSync:!1,viewTransition:!0}),o()}}),children:"Comfirm"})},"confirm")]})]})}const Qa="_Tool_tgrdm_1",Ye={Tool:Qa,"x-line-mode":"_x-line-mode_tgrdm_7","x-line-mode-label":"_x-line-mode-label_tgrdm_10"};function eo(e){const{toggleIsEditX:n=()=>{},isEditX:s,className:r,setDatas:a,setFileNames:o}=e,{pathname:i}=sr();return t.jsxs(N,{elevation:24,className:classNames(Ye.Tool,r),children:[t.jsx(Za,{setDatas:a,setFileNames:o}),i===Gn.old?t.jsx(J,{variant:"outlined",className:Ye["x-line-mode"]??"",fullWidth:!0,children:t.jsx(Ls,{className:Ye["x-line-mode-label"]??"",onChange:n,control:t.jsx(rn,{checked:s}),label:"Edit Mode"})}):null]})}const{isSafeInteger:to}=Number;function Ht({useSetInputST:[e,n],k:s,label:r=""}){const a=O(o=>n({[s]:o}));return t.jsxs(ze,{fullWidth:!0,children:[t.jsx(Fe,{fullWidth:!0,placeholder:r,label:r,type:"number",title:s,value:e[s],required:!0,onChange:o=>{const{value:i}=o.target;if(!i){a(i);return}const l=parseInt(i),u=Number(i),c=+i;pt(l,u,c)&&to(l)&&l>=0&&a(l.toString())},inputProps:{min:0,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric"}),t.jsx(As,{})]})}const no="_Input_1qdq0_1",so={Input:no};function Wn({children:e,autoFocus:n,tabIndex:s,className:r,style:a,...o}){return t.jsx(it,{...o,..._.omitBy({autoFocus:n,tabIndex:s,className:r,style:a},_.isUndefined),children:e})}const Vn=({InputLabelProps:e,...n})=>t.jsx(Fe,{...n,size:"medium",InputLabelProps:{...e,className:e?.className??"",style:e?.style??{}}});function Ze(e){const{useSetInputST:n,modeKey:s,useGetFromST:r,fileNames:a,setTabToResult:o,dataArrWithPos:i,useMultiDots:[l,u]}=e,{data:c,loading:g,runAsync:m}=r,[f,b]=n,{s:j="",t:h=""}=Nn[s]??{};return t.jsx(Pe,{value:s,className:P.TabPanel??"",children:t.jsxs(N,{elevation:24,className:so.Input??"",children:[t.jsx(Ht,{useSetInputST:n,k:"s",label:j}),t.jsx(Ht,{useSetInputST:n,k:"t",label:h}),t.jsx(an,{value:l??[],onChange:(p,S)=>{u(S)},multiple:!0,options:i,getOptionLabel:pe,renderOption:(p,S,{selected:d})=>t.jsxs(Wn,{...p,children:[t.jsx(rn,{icon:t.jsx(Bs,{fontSize:"large"}),checkedIcon:t.jsx(Os,{fontSize:"large"}),checked:d}),pe(S)]}),renderInput:p=>t.jsx(Vn,{...p,label:"Choose Vertices",placeholder:"Choose Vertices"}),disableCloseOnSelect:!0,autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1}),t.jsxs(Rs,{disabled:_.some(f,p=>p===""),variant:"contained",size:"large",onClick:()=>$e.unstable_batchedUpdates(async()=>{await m(s,c,{...a,problem_type:dt[s],...f,vertices:JSON.stringify(l?.map(({k:p,kInd:S})=>[bt[p],S]))}).then(p=>(Ee.success(`fetch ${s} success`),o(),p),()=>{Ee.error(`fetch ${s} fail`)})}),children:["Fetch ",s]})]})})}function ro(){return navigator.language}function ao(){return navigator.languages[0]}function oo(){return new Intl.DateTimeFormat().resolvedOptions().locale}function io(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}const lo=()=>ro()==="zh-CN"&&ao()==="zh-CN"&&oo()==="zh-CN"&&io()==="Asia/Shanghai"&&new Date().getTimezoneOffset()===-480&&new Intl.DateTimeFormat().resolvedOptions().timeZone==="Asia/Shanghai",co=M.forwardRef(e=>{const{viewBox:n,graphLine:s,drawDotData:r,clickCircle:a,doubleClickCircle:o}=e;return t.jsxs("svg",{viewBox:n,className:E["graph-svg"],children:[s?.map(({pos:i,highlightLevel:l,color:u},c)=>t.jsx("polyline",{points:i.map(([g,m])=>`${g},${m}`).join(" "),fill:"none",stroke:"black",className:classNames(E.line,E[l]),style:{"--color":u}},c)),r.map(i=>{const{k:l,kInd:u,v:c,graphX:g,graphY:m,color:f}=i,b=pe(i);return t.jsx(t.Fragment,{children:t.jsx(G,{...Pn(i),children:t.jsxs("g",{onDoubleClick:o({dotData:i}),onClick:a(i),className:Fn(i),style:{"--color":f},children:[t.jsx("circle",{cx:g,cy:m,className:E.circle}),t.jsx("text",{x:g,y:m,className:E.text,children:b})]},g)})})})]})});function Kt(e){const{isEditX:n,xEnd:s,onClick:r=()=>{},dotData:{y:a,v:o},className:i=""}=e;return n?t.jsx(t.Fragment,{children:t.jsx("line",{x1:V,x2:s,y1:a,y2:a,className:classNames(E["hover-x"],i),onClick:r})}):null}const uo=M.forwardRef(e=>{const{viewBox:n,drawDotData:s,clickCircle:r,doubleClickCircle:a,svgRef:o,isEditX:i,commonValueFromTableData:{valuesArr:l,xRadix:u,length:c,getYPos:g,svgHeight:m},svgSize:f,size:b}=e,{xEnd:j=0,yEnd:h=0}=f,p=M.useMemo(()=>_.sortBy(_.uniq(l)).map(d=>({v:d,yPos:g(d)})),[s]),S=M.useMemo(()=>{let d=_.head(s);if(!d)return[];let x=le(d);const y=[];for(let D=1;D<c;D++){let w=s[D];if(!w)break;let F=le(w),R=F-x;const{x:L=0,y:ge=0}=d,ce=[L,ge];for(;D<c;D++){const ne=s[D+1];if(ne){const W=le(ne);if(W-F===R){w=ne,F=W;continue}}const{x:T=0,y:C=0}=w,z=[T,C];y.push([ce,z]);break}d=w,x=F}return y},[s]);return t.jsxs("svg",{viewBox:n,ref:o,className:E.svg,style:{"--stroke-dasharray":u},children:[t.jsx("line",{x1:V,y1:h,x2:j,y2:h,className:E["coordinate-axis-x"]}),"  ",t.jsx("line",{x1:V,y1:V,x2:V,y2:h,className:E["coordinate-axis-y"]}),"  ",p.map(({v:d,yPos:x})=>t.jsxs("g",{className:E.g,onClick:a({v:d}),children:[t.jsx("text",{x:oa,y:x,className:E["axis-text"],children:d}),t.jsx(Kt,{xEnd:j,isEditX:i,className:classNames({[E["hover-click-line"]??""]:d===b}),dotData:{v:d,y:x}})]})),S.map(([[d,x],[y,D]])=>t.jsx(t.Fragment,{children:t.jsx("line",{x1:d,y1:x,x2:y,y2:D,className:E.line})})),s.map(d=>{const{k:x,v:y,kInd:D,x:w,y:F,color:R}=d,L=Pn(d);return t.jsx(t.Fragment,{children:t.jsxs("g",{className:Fn(d),onClick:r(d),onDoubleClick:a({dotData:d}),style:{"--color":R},children:[t.jsx(G,{...L,children:t.jsx("text",{x:w,y:m,className:E.text,children:pe(d)})}),i?t.jsx(t.Fragment,{children:t.jsx("line",{x1:w,x2:w,y1:F,y2:h,className:E["hover-y"]})}):null,t.jsx(G,{...L,children:t.jsx("circle",{cx:w,cy:F,className:E.circle})}),t.jsx(Kt,{xEnd:j,dotData:d,isEditX:i,onClick:a({dotData:d}),className:classNames({[E["hover-x--no-show"]??""]:y===b})})]})})})]})});function ho(){const[e,n]=te(),[s,r]=te([]),a=M.useRef(null),o=M.useMemo(va(a),[a.current]),i=M.useMemo(()=>Be(e,o),[e,o]);return{tableData:e,setTableData:n,graphData:s,setGraphData:r,svgRef:a,svgSize:o,commonValueFromTableData:i}}const mo=e=>({clickCircle:O(ba(e))}),Qe=e=>`${Un.name}${e}`;function Un(e){const{dataArrWithPos:n,graphData:s,svgSize:r,setSize:a=()=>{},isEditX:o,size:i}=e,l=M.useMemo(()=>xa({...e,size:i}),[i,n]),{svgWidth:u=0,svgHeight:c=0}=r,g=c,m=M.useMemo(()=>ga({drawDotData:l,graphData:s}),[l]),{clickCircle:f}=mo({...e,setSize:a,size:i}),b=O(zn({isEditX:o,setSize:a,size:i,drawDotData:l})),j={...e,drawDotData:l,clickCircle:f,doubleClickCircle:b,graphLine:m,size:i};return t.jsxs(t.Fragment,{children:[t.jsx(_e,{value:B.table,children:t.jsx(uo,{...j,viewBox:[0,0,u,g].join(" ")})},Qe(B.table)),t.jsx(_e,{value:B.graph,children:t.jsx(co,{...j,viewBox:[0,0,u,c].join(" ")})},Qe(B.graph)),t.jsx(Pe,{value:B.result},Qe(B.result))]})}const po="_Dialog_1fpbd_1",fo="_title_1fpbd_4",go="_Paper_1fpbd_7",xo="_Fab_1fpbd_11",he={Dialog:po,title:fo,Paper:go,Fab:xo},bo=({renderingEngine:e})=>{switch(e){case"SVG Engine":return t.jsx(t.Fragment,{children:"It is unstable! Suitable for small data volumes, few functions are available, and performance is low."});case"ECharts Engine":return t.jsx(t.Fragment,{children:"Suitable for large data volumes. With many available functions and high performance."})}};function vo(e){const{setSelectEngine:n,selectEngine:s}=e,[r,{setTrue:a,setFalse:o}]=Se(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Ws,{size:"large",onClick:a,title:"settings",className:he.Fab??"",children:t.jsx(G,{title:"settings",arrow:!0,children:t.jsx(nn,{size:"large",children:t.jsx(Vs,{fontSize:"large"})})})}),t.jsxs(sn,{onClose:o,className:he.Dialog??"",open:r,children:[t.jsx(N,{elevation:24,className:he.title??"",children:t.jsx("h3",{children:"Settings"})},"title"),t.jsx(ie,{}),t.jsx(N,{elevation:24,className:classNames(he.Paper),children:t.jsxs(ze,{fullWidth:!0,children:[t.jsx(G,{arrow:!0,title:"Select Rendering Engine",placement:"top",children:t.jsx(on,{children:"Select Rendering Engine"})}),t.jsx(ln,{fullWidth:!0,label:"Select Rendering Engine",defaultValue:"ECharts Engine",onChange:i=>{const l=i.target.value;l==="SVG Engine"&&!confirm("SVG is very unstable! Are you sure you want to switch to it?")||n(l)},value:s,children:["ECharts Engine","SVG Engine"].map(i=>t.jsx(it,{value:i,children:t.jsx(G,{arrow:!0,placement:"right",title:t.jsx(bo,{renderingEngine:i}),children:t.jsx("div",{children:i})})},i))})]})},"content"),t.jsx(ie,{}),t.jsx(N,{elevation:24,className:classNames(he.Paper),children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,color:"warning",onClick:()=>{confirm("Are you sure you want to clear the cache?")&&jr().then(()=>{alert("Clear Success!")},()=>{alert("Clear Fail!")})},children:"Clear Cache"})},"content"),t.jsx(ie,{}),t.jsx(N,{elevation:24,className:he.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,onClick:o,startIcon:t.jsx(Us,{fontSize:"large"}),children:"Back"})},"back")]})]})}const _o="_Form_3js51_1",jo={Form:_o},{isSafeInteger:So}=Number;function yo(e){const{setSize:n,value:s,max:r}=e,[a,o]=te(s);me(()=>{o(s)},[s]);const i=_.isUndefined(a),l=!i&&(a<0||a>r);return t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Please double-click the dot on the Cohesion."}),t.jsx(ie,{variant:"fullWidth",flexItem:!0,children:t.jsx(tn,{label:"OR"})}),t.jsxs(N,{elevation:24,className:jo.Form??"",children:[t.jsx(ze,{fullWidth:!0,children:t.jsx(Fe,{fullWidth:!0,placeholder:"Input Size",label:"Input Size",type:"search",title:"Input Size",value:a,inputProps:{min:0,max:r,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric",onChange:u=>$e.unstable_batchedUpdates(()=>{const{value:c}=u.target;if(!c)o(void 0);else{const g=parseInt(c);So(g)&&o(g)}}),error:l,...l?{helperText:`Size is not in the right range(0 ~ ${r}).`}:null})}),t.jsx(G,{arrow:!0,title:i?"Set size to undefined":`${A["Hierarchical Subgraphs Search"]} with size is ${a}`,children:t.jsx(J,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>{n(a)},disabled:l,children:"Search"})})]})]})}const Co=()=>Promise.all([fetch("writer.supervertex"),fetch("writer.superedge")]).then(e=>e.map(n=>n.text())).then(e=>Promise.all(e)).then(async([e,n])=>!e||!n?{}:{tableData:Rn(e),graphData:Ya(n)}),rt="tan",qn="red",{isSafeInteger:Xt}=Number,{entries:Jt,freeze:ri,values:ai,keys:oi,fromEntries:ii}=Object;if(pn){const{from:e}=Array,n=console.error;console.error=function(s){typeof s=="string"&&(s.startsWith('Warning: Each child in a list should have a unique "key" prop.')||s.startsWith("Warning: validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s"))||n.apply(console,e(arguments))}}var Gn=(e=>(e.old="/old",e.new="/new",e))(Gn||{});const wo=(e,n)=>!_.isUndefined(e)&&e>=n,Yt=({title:e,detail:n})=>_.isUndefined(n)?null:t.jsxs(cn,{className:E.Accordion??"",defaultExpanded:!0,children:[t.jsx(un,{expandIcon:t.jsx(dn,{}),className:E["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(se,P["Main-Right--Show--Text"]),children:e})}),t.jsx(hn,{className:E["Accordion-Details"]??"",children:t.jsx("p",{className:P["Main-Right--Show--Text"],children:n})})]},e),yt=36;M.createContext({});function No(){ot(()=>{const{origin:v,protocol:I,hash:k,host:$}=location;if(!sessionStorage.hjx&&et&&v!==je&&I==="https:"&&lo()){const U=je+k;confirm(`后端服务已上线，点击“确认”跳转.${U}`)?location.href=U:sessionStorage.setItem("hjx","hxj")}}),Zt("beforeunload",v=>{if(et&&(Z||r)){v.preventDefault();const I="You have unsaved changes. Are you sure you want to leave?";return v.returnValue=I,I}});const[e]=Se(!1),{tableData:n,setTableData:s,graphData:r,setGraphData:a,svgSize:o,commonValueFromTableData:i,svgRef:l}=ho(),{data:u,runAsync:c,mutate:g}=wt(Co,{...Rt,manual:!0});me(()=>{D(void 0),n&&(n.length>yt?c():g(void 0))},[n]),me(()=>{},[n]);const{svgWidth:m=0,svgHeight:f=0}=o,[b="",j]=Nt("dataset",{defaultValue:""}),[h="",p]=Nt("BCviz_file",{defaultValue:""}),S={dataset:b,BCviz_file:h},d=wt(Wa,{...Rt,manual:!0,staleTime:-1,cacheTime:-1}),{data:x,loading:y,mutate:D}=d,w=en({s:"",t:""}),[F,R]=te(B.table),[L,ge,ce]=Qt(A["Maximum Biclique"]),[ne,T]=te("ECharts Engine"),C=M.useMemo(()=>Ln(L),[L]),[z,W]=te(0),X=te([]),[Y,ue]=X,[de,{set:Ce,setTrue:Oe,setFalse:Eo}]=Se(!0),Z=M.useMemo(()=>Tt(de,n),[n,de]),{size:re,UV:ee,dataThisMode:To,dataArr:xe,selectShowData:Ct,count:Hn,numOfData:we,params:Ne}=M.useMemo(()=>{const v=x?.[L];if(!v)return{};const{count:I,dataArr:k,...$}=v,U=k?.[z];if(!U)return{};const{size:Q,count:K,label:De,...ve}=U;return C?{size:Q}:{size:Q,UV:ve,dataThisMode:v,dataArr:k,selectShowData:U,count:K,numOfData:I,params:$}},[x,L,z,Z]),Kn=ne==="ECharts Engine",Re=_.isUndefined(re),We=O(v=>{D({...x,[A["Hierarchical Subgraphs Search"]]:{dataArr:[{size:v}]}})});me(()=>{R(B.table),ce()},[Z,ne]),me(()=>{ue([])},[Z]);const{dataArrWithPos:be,visualMapSection:ko}=M.useMemo(()=>{const v=vt(Z,r,i,f);if(C){const{datas:$,visualMapSection:U}=kn({isEditX:C,dataArrWithPos:v,size:re,commonValueFromTableData:i});return{dataArrWithPos:$,visualMapSection:U}}const I=ee?v?.map($=>{const{k:U,kInd:Q}=$,K=ee[U]?.includes(Q)?rt:void 0;return{...$,...K?{color:K}:null}}):v;return{dataArrWithPos:Dr(I,Y)}},[i,ee,L,re,Y]),Xn=O(()=>{if(C||!ee){const k=be.filter(({color:Q})=>Q),$=_t(k);return{resultGraph:r.filter(Q=>_.every(Q,(K,De)=>!!$[De][K])),filterTableData:k}}const v=r.filter(k=>_.every(k,($,U)=>ee[U]?.includes($)??!1)),I=Z.filter(({k,kInd:$})=>ee[k]?.includes($));return{resultGraph:v,filterTableData:I}}),{resultGraph:Jn,resultTable:Yn}=M.useMemo(()=>{const{resultGraph:v,filterTableData:I}=Xn(),k=Tt(de,I),$=Er(k,v,{svgWidth:m,svgHeight:f});return{resultGraph:v,resultTable:$}},[ee,r,Z,C,be]),Zn=O(()=>{}),Ve={useSetInputST:w,useGetFromST:d,fileNames:S,setTabToResult:Zn,dataArrWithPos:Z??[],useMultiDots:X},Qn=O(v=>{const{dataIndex:I,name:k,value:$}=v;if(!C&&Xt(I)&&k&&Xt($)&&typeof $=="number"){const U=k[0],Q=parseInt(k.slice(1));if(!Z)return;const K=Z.find(({k:ve,kInd:es})=>ve===U&&es===Q);if(!K)return;if(!Y||Y.length===0){ue([K]);return}const De=Y.includes(K);ue(De?Y.filter(ve=>ve!==K):[...Y,K])}});return t.jsxs(t.Fragment,{children:[t.jsxs(N,{className:P.Main??"",elevation:24,children:[t.jsx(vo,{setSelectEngine:T,selectEngine:ne}),t.jsx(Vt,{children:t.jsxs(N,{elevation:24,className:P["Main-Left"]??"",children:[t.jsx(eo,{setDatas:[a,s],setFileNames:[j,p],className:P.Tool}),null,t.jsx(N,{elevation:24,className:P.Select??"",children:t.jsxs(ze,{fullWidth:!0,children:[t.jsx(on,{children:"Select Mode"}),t.jsx(ln,{value:L,onChange:v=>{ge(v.target.value)},label:"Select Mode",fullWidth:!0,children:[A["Maximum Biclique"],A["Maximal Biclique Enumeration"],A["(p,q)-biclique Counting"],A["Hierarchical Subgraphs Search"]].map(v=>t.jsx(it,{value:v,title:dt[v],children:v},v))})]})}),t.jsx(N,{elevation:24,children:t.jsxs(Mt,{value:L,children:[t.jsx(Ze,{...Ve,modeKey:A["Maximum Biclique"]}),t.jsx(Ze,{...Ve,modeKey:A["Maximal Biclique Enumeration"]}),t.jsx(Ze,{...Ve,modeKey:A["(p,q)-biclique Counting"]}),t.jsx(Pe,{value:A["Hierarchical Subgraphs Search"],className:P.TabPanel??"",children:t.jsx(N,{elevation:24,className:P["Paper-text"]??"",children:t.jsx(yo,{value:re,setSize:We,max:i.max})})})]})}),xe&&wo(xe?.length,2)?t.jsx(N,{elevation:24,className:P.Select??"",children:t.jsx(G,{title:t.jsxs(t.Fragment,{children:["Count: ",t.jsx("span",{className:se,children:xe.length})]}),arrow:!0,placement:"right",children:t.jsx(an,{autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,blurOnSelect:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!0,disableCloseOnSelect:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1,options:xe,...Ct?{value:Ct}:null,onChange:(v,I,k,$)=>{W(I?xe.indexOf(I):0)},renderInput:v=>t.jsx(Vn,{...v,label:"Choose Rank",placeholder:"Choose Rank"}),renderOption:(v,{label:I,...k},$)=>t.jsx(G,{title:Nr(k),arrow:!0,placement:"right",children:t.jsx(Wn,{...v,children:I??`Rank ${$.index+1}`})})})})}):t.jsx(t.Fragment,{})]})}),t.jsx(N,{className:P["Main-Mid"]??"",elevation:24,children:t.jsxs(Mt,{value:F,children:[t.jsx(N,{elevation:24,children:t.jsxs(qs,{onChange:(v,I)=>R(I),variant:"fullWidth",children:[t.jsx(Ue,{label:"Cohesion",value:B.table,className:P.Tab??""}),t.jsx(Ue,{label:"Bipartite Graph",value:B.graph,className:P.Tab??""}),t.jsx(G,{arrow:!0,title:Ne?t.jsx(t.Fragment,{children:t.jsxs("fieldset",{children:[t.jsx("legend",{className:se,children:"Search Params"}),Jt(Ne).map(ft)]})}):null,children:t.jsx(Ue,{label:"Search Result",value:B.result,disabled:Re,className:classNames({[P.Tab??""]:!Re})})})]})}),be.length?Kn?t.jsx(Dn,{dataArrWithPos:be,graphData:r,size:re,resultGraph:Jn,selectMode:L,useSetInputST:w,setTab:R,resultTable:Yn,setSize:We,isEditX:C,commonValueFromTableData:i,clickEChartDotToAddMultiDots:Qn,dataFromST:x,superData:u}):t.jsx(Un,{commonValueFromTableData:i,graphData:r,dataArrWithPos:be,isEditX:C,svgRef:l,svgSize:o,setSize:We,size:re}):t.jsx(Gs,{className:P.Chart??"",variant:"rounded",animation:"wave"})]})}),Re?null:t.jsx(Vt,{buttonOrder:1,children:t.jsx(N,{className:P["Main-Right"]??"",elevation:0,children:t.jsxs(N,{elevation:24,className:P["Main-Right--Show"]??"",children:[_.isUndefined(we)?null:t.jsx(G,{arrow:!0,placement:"left",title:_.isUndefined(we)?null:t.jsxs("h4",{children:["The number of (",Ne?.s,",",Ne?.t,")-bicliques is: ",t.jsx("span",{className:se,children:we})]}),children:t.jsx("h4",{className:classNames(se,P["Main-Right--Show--Num"]),children:t.jsx("span",{children:we})})}),t.jsx(Yt,{title:"size",detail:re}),ee?Jt(ee).map(([v,I])=>I.length?t.jsxs(cn,{className:E.Accordion??"",defaultExpanded:I.length<=23,children:[t.jsx(un,{expandIcon:t.jsx(dn,{}),className:E["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(se,P["Main-Right--Show--Text"]),children:`${v} `})}),t.jsx(hn,{className:E["Accordion-Details"]??"",children:I.map(k=>t.jsx("p",{className:P["Main-Right--Show--Text"]??"",children:k}))})]},v):null):null,t.jsx(Yt,{title:"count",detail:Hn})]})})})]}),t.jsx(Hs,{open:e||y,className:P.Modal??"",children:t.jsx(Ks,{className:P.CircularProgress??""})})]})}function Do(){return t.jsx(rr,{children:t.jsx(ar,{index:!0,element:t.jsx(No,{})})})}const Mo=()=>t.jsx(M.StrictMode,{children:t.jsx(Xs,{injectFirst:!0,children:t.jsxs(nr,{children:[t.jsx(Do,{}),t.jsx(Qs,{style:{zIndex:Js.modal+1}})]})})}),Io=document.body;Zs(Io).render(t.jsx(t.Fragment,{children:t.jsx(Mo,{})}));
