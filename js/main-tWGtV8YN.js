import{r as N,j as t}from"./react-oik9md-E.js";import{u as es,a as st,b as V,c as Jt,d as ts,e as ns,f as rt,g as ee,h as ss,i as Yt,j as Zt,k as ye,l as rs,m as fe,n as _t,o as jt}from"./ahooks-rsxkj2vD.js";import{i as as}from"./react-fast-compare-751UTDWK.js";import{u as os,g as St,i as is,a as ls,b as cs,c as us,d as ds,e as hs,f as ms,h as ps,j as fs,k as gs,l as xs,m as bs,n as vs,o as _s,p as js,q as Ss,r as ys,s as Cs,t as ws,v as Ds}from"./echarts-Vo_PYHjZ.js";import{P as C,T as ke,d as Ns,D as ce,L as Ie,B as J,a as Es,b as Is,c as G,e as Ms,f as Ts,g as ks,h as Ps,i as Fs,C as Qt,j as Pe,I as en,k as $s,l as tn,F as zs,m as nn,n as Fe,o as As,M as at,A as sn,p as Ls,q as Bs,r as Os,s as Rs,t as Ws,u as rn,S as an,v as Vs,w as yt,x as Us,y as Ve,z as qs,E as on,G as ln,H as cn,J as un,K as Gs,N as Hs,O as Ks}from"./@mui-aSa7pBhJ.js";import{d as ot}from"./immer-U6fk-Zvt.js";import{a as Xs,r as $e,c as Js}from"./react-dom-tVoZXIl-.js";import{Q as Me,k as dn}from"./react-toastify-5bXptfeX.js";import{d as Ys}from"./@algolia-kof8UNv8.js";import{u as Zs,H as Qs}from"./react-router-dom-GFem2kaG.js";import{u as er,b as tr,c as nr}from"./react-router-I1NCjZ8i.js";import"./@babel-_Kefij6Y.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./zrender-6ibt0cUB.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";import"./scheduler-Xt5_ASe0.js";import"./@remix-run-wEAHOncH.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();function sr(e,n){return e>>n&1}const it=Object.freeze(["rgb(255, 0, 0)","rgb(255, 115, 0)","rgb(255, 251, 0)","rgb(72, 255, 0)","rgb(0, 255, 213)","rgb(0, 43, 255)","rgb(122, 0, 255)","rgb(255, 0, 200)"]),rr="_Main_1ppnf_15",ar="_Table_1ppnf_22",or="_table_1ppnf_26",ir="_SVG_1ppnf_31",lr="_Accordion_1ppnf_38",cr="_line_1ppnf_70",ur="_circle_1ppnf_71",dr="_text_1ppnf_94",hr="_svg_1ppnf_94",mr="_highlight_1ppnf_100",pr="_g_1ppnf_52",fr="_line_how_1ppnf_1",I={Main:rr,Table:ar,table:or,SVG:ir,Accordion:lr,"Accordion-Summary":"_Accordion-Summary_1ppnf_42","Accordion-Details":"_Accordion-Details_1ppnf_48","graph-svg":"_graph-svg_1ppnf_52",line:cr,circle:ur,"no-highlight":"_no-highlight_1ppnf_84",text:dr,svg:hr,"axis-text":"_axis-text_1ppnf_94",highlight:mr,"more-highlight":"_more-highlight_1ppnf_116",g:pr,"hover-click-line":"_hover-click-line_1ppnf_273","hover-x":"_hover-x_1ppnf_273","hover-x--no-show":"_hover-x--no-show_1ppnf_273","hover-y":"_hover-y_1ppnf_274",line_how:fr,"coordinate-axis-y":"_coordinate-axis-y_1ppnf_282","coordinate-axis-x":"_coordinate-axis-x_1ppnf_282","pulse-signup-button":"_pulse-signup-button_1ppnf_1"},{error:q}=console,Ct=e=>(e.addEventListener("abort",n=>{e.close(),q("abort",n)}),e.addEventListener("close",n=>{e.close(),q("close",n)}),e.addEventListener("error",n=>{e.close(),q("error",n)}),e.addEventListener("versionchange",n=>{e.close(),q("versionchange",n)}),e),gr=(e,n)=>(n.addEventListener("complete",()=>{e.close()}),n.addEventListener("abort",s=>{n.abort(),e.close(),q("abort",s)}),n.addEventListener("error",s=>{n.abort(),e.close(),q("error",s)}),n),hn=e=>new Promise(async(n,s)=>{const{DBname:r,version:a,storeName:o,keyPath:i,mode:l}=e,u=indexedDB.open(r,a);u.addEventListener("success",()=>{const c=Ct(u.result);if(c.objectStoreNames.contains(o))return n(gr(c,c.transaction(o,l,{durability:"strict"})).objectStore(o))}),u.addEventListener("upgradeneeded",()=>{const c=Ct(u.result);if(!c.objectStoreNames.contains(o))return c.createObjectStore(o,{autoIncrement:!0,...i?{keyPath:i}:null})}),u.addEventListener("error",c=>{s(c),q("error",c,u)}),u.addEventListener("blocked",c=>{s(c),q("blocked",c,u)})}).catch(q),lt=e=>{const{IDBValidKey:n,data:s}=e;return hn({...e,mode:"readwrite"}).then(r=>(r&&s&&r.add(s,...r.keyPath?[]:[n]).addEventListener("error",q),r),q).catch(q)},xr=async e=>new Promise((n,s)=>{const{query:r}=e;return hn({...e,mode:"readonly"}).then(a=>{if(a){const o=r?a.get(r):a.getAll();o.addEventListener("success",()=>{n(o.result)}),o.addEventListener("error",i=>{q(i,o),s(o.error)})}return a},s).catch(s)}),br=()=>indexedDB.databases().then(e=>e.filter(({name:n})=>n).map(({name:n})=>n?indexedDB.deleteDatabase(n):new IDBOpenDBRequest),q).catch(q);var vr={VITE_resumeFolder:"resume",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{DEV:mn,PROD:Qe}=vr,{freeze:ze,entries:_r,values:Xo}=Object,jr=e=>!!(Qe&&e&&_.isPlainObject(e));var F=(e=>(e["Maximum Biclique"]="Maximum Biclique",e["Maximal Biclique Enumeration"]="Maximal Biclique Enumeration",e["(p,q)-biclique Counting"]="(p,q)-biclique Counting",e["Hierarchical Subgraphs Search"]="Hierarchical Subgraphs Search",e))(F||{});const ct=ze({"Maximum Biclique":"MEB","Maximal Biclique Enumeration":"MBE","(p,q)-biclique Counting":"PQB","Hierarchical Subgraphs Search":""}),Sr=ze({DBname:"HJX",storeName:"HXJ"}),pn=e=>xr({...Sr,query:e}).then(n=>{if(jr(n))return n;throw new Error(n)});var A=(e=>(e[e.table=0]="table",e[e.graph=1]="graph",e[e.result=2]="result",e))(A||{});ze({0:"Cohesion"});const yr=e=>_r(e).map(dt),ae="tanContent",ge=({k:e,kInd:n})=>`${e}${n}`,Cr=(e,n)=>{if(!n||n.length===0)return e;const s=ft(n);return e?.map(a=>{const{k:o,kInd:i}=a,l=s[o][i]?Un:void 0;return{...a,...l?{color:l}:null}})},wt=40,wr=80,Dr=e=>{const s=_.sortBy(e,({v:a})=>a).slice(bt*-1);return _.sortBy(s,({i:a})=>a)},Dt=(e,n)=>{if(!n)return[];if(e)return n;const s=n.map((r,a)=>({...r,i:a}));return n.length<=bt?s:Dr(s)},Nr=(e,n,{svgWidth:s,svgHeight:r})=>pt(e,n,Le(e,{svgWidth:s,svgHeight:r}),r),fn=ze({svgHeight:innerHeight,svgWidth:innerWidth}),Er="_Main_1idkx_15",Ir="_Select_1idkx_38",Mr="_TabPanel_1idkx_41",Tr="_Tab_1idkx_41",kr="_hidden_1idkx_83",Pr="_Chart_1idkx_87",Fr="_Modal_1idkx_92",$r="_CircularProgress_1idkx_99",k={Main:Er,"Main-Left":"_Main-Left_1idkx_33",Select:Ir,TabPanel:Mr,"Paper-text":"_Paper-text_1idkx_44","Main-Mid":"_Main-Mid_1idkx_51",Tab:Tr,"Main-Right":"_Main-Right_1idkx_62","Main-Right--Show":"_Main-Right--Show_1idkx_69","Main-Right--Show--Text":"_Main-Right--Show--Text_1idkx_75","Main-Right--Show--Num":"_Main-Right--Show--Num_1idkx_80",hidden:kr,Chart:Pr,Modal:Fr,CircularProgress:$r,"pulse-signup-button":"_pulse-signup-button_1idkx_1"},Nt=(e=()=>{})=>Br?.(()=>Or?.(()=>Lr?.(()=>Ar?.(()=>gn?.resolve?.()?.then?.(()=>{const{port1:n,port2:s}=new zr;n?.postMessage?.(null),s.onmessage=e}).catch?.(xn))))),Ae=(e=()=>{})=>new gn(n=>Nt?.(n))?.then?.(()=>Nt?.(e)).catch?.(xn),{Promise:gn,addEventListener:Jo,console:{error:xn}={},MessageChannel:zr,queueMicrotask:Ar,requestAnimationFrame:Lr,requestIdleCallback:Br,setTimeout:Or}=window??self??globalThis??void 0;os([ls,cs,us,ds,hs,ms,ps,fs,gs,xs,bs,vs,_s,js,Ss,ys,Cs,ws]);const bn=window??self??globalThis??global??void 0??new EventTarget,{addEventListener:Rr,removeEventListener:Wr}=bn,{dispatchEvent:Vr}=bn,et="resize",Ur=new Event(et),Ue=N.memo(e=>{const{option:n,onParams:s=[]}=e,r=N.useRef(null);return es(()=>{const{current:a}=r;if(!a||!n)return;const o=St(a)??is(a);o.showLoading(),Ae(()=>{o.setOption(n,!0,!0),s.map(c=>o.on(...c)),o.hideLoading()});const i=$n(o.resize),l=()=>i(),u=new ResizeObserver(l);return u.observe(a),Rr(et,l),()=>{s.map(([c,,b])=>o.off(c,b)),u.disconnect(),i.cancel?.(),i.clear?.(),Wr(et,l)}},[n]),st(()=>{const{current:a}=r;if(!a)return;const o=St(a);o&&(o.clear(),o.dispose())}),t.jsx(t.Fragment,{children:t.jsx(C,{elevation:24,ref:r,className:k.Chart??""})})},as),{error:qr}=console;function ut(...e){if(e.length===0)return!0;const n=_.head(e);return e.every(s=>_.isEqual(s,n))}const Gr=(e,n)=>n.every(s=>s===e),Et=e=>{if(!(e instanceof HTMLDivElement))return!1;const{childElementCount:n,childNodes:s,children:r,firstChild:a,lastChild:o,firstElementChild:i,lastElementChild:l}=e;return!e.hasChildNodes()||!Gr(1,[n,s.length,r.length])?!1:ut(a,o,i,l,s.item(0),r.item(0))},It="mouseup",Hr=["ctrl","alt","shift","meta"].map(e=>`${e}.f11`);function Se({children:e,...n}){const s=N.useRef(null),{current:r}=s,a=V(u=>{if(!Et(u))return null;const c=u?.firstChild;return Et(c)?c:null}),o=V($n(u=>u instanceof HTMLDivElement&&!document.fullscreenElement?u.requestFullscreen({navigationUI:"hide"}).catch(qr):Promise.reject(u)));st(()=>{o.cancel?.(),o.clear?.()});const i=V(u=>{const c=a(r),{target:b,currentTarget:m}=u;if(!(!c||!ut(r,b,m))){if(u instanceof MouseEvent){const{button:h,altKey:g,ctrlKey:v,metaKey:p,shiftKey:f,relatedTarget:S,type:d}=u;if(d===It&&h===0&&!g&&!v&&!p&&!f&&!S)return}return u.preventDefault(),o(c)}});Jt(["contextmenu","dblclick","auxclick",It],i,{enable:!!r,target:r}),ts(Hr,u=>{const c=a(r);return o(c)},{exactMatch:!0});const l=ns();return rt(()=>{Ae(()=>{r||l()})}),t.jsx(ke,{...n,ref:s,children:t.jsx(C,{elevation:24,children:e})})}const Mt=Ds.color,{isSafeInteger:Tt}=Number,{min:Kr,max:Xr}=Math,dt=([e,n])=>t.jsxs("div",{children:[t.jsx("span",{children:`${e}: `}),t.jsx("span",{className:ae,children:n?.toString()})]},e),kt=4,Jr=(e,n)=>e.length>n?e.slice(0,n):e,vn=({k:e,kInd:n,v:s,neighbor:r,color:a},o)=>t.jsxs(t.Fragment,{children:[a&&o&&!zn(o)?t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs("span",{className:ae,children:["fetch ",o," result"]})}),t.jsx("br",{})]}):null,[["Vertex Name",`${e+n}`],["Maximum Cohesion",`${s}`],_.isUndefined(r)?void 0:["Neighbors",`${Jr(r,kt).map(({k:i,kInd:l})=>`${i+l}`).join(", ")}${r.length>kt?"...":""}`],["Vertex Degree",`${r?.length}`]].filter(Boolean).map(dt)]}),_n=(...e)=>Xs(vn(...e)),jn={trigger:"item",axisPointer:{type:"cross"},label:{show:!0}},Sn=ot({label:{show:!0},roam:!0}),yn={toolbox:{show:!0,feature:{saveAsImage:{},restore:{},dataView:{},dataZoom:{},magicType:{},brush:{}}}},qe=ot({show:!0,snap:!0}),Cn={lineStyle:{shadowColor:"rgba(0,0,0,.5)",shadowBlur:10},scale:!0,label:{show:!0,fontSize:24,fontWeight:"bolder"},labelLine:{show:!0},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:10}},Ge=(e,n,s,r=void 0,{max:a,min:o}=Le(e,fn))=>{if(!e||!n)return{};const i=ca(e,n),l=(wr-wt)/(a-o),u=h=>(h-o)*l+wt,c=_.uniq(n.map(({superWidth:h})=>h)),b=(()=>{if(_.isUndefined(_.head(c)))return h=>h;{const h=c,g=Kr(...h),v=Xr(...h),p=10,f=1,S=(p-f)/(v-g);return x=>(x-g)*S+f}})();return{...yn,tooltip:{},legend:{data:[H.U,H.V]},series:[{type:"graph",...Sn,tooltip:{...jn,formatter(h,g,v){const{dataType:p,dataIndex:f,data:S,name:d}=h;if(p==="edge"){const{source:w,target:E,superWidth:D}=S;return[d,D].filter(Boolean).join("<br/>")}const x=e[f];return x?_n(x,s):g}},categories:[{name:H.U,base:H.U},{name:H.V,base:H.V}],edgeLabel:{},data:e.map(h=>{const{k:g,kInd:v,graphX:p,graphY:f,v:S,color:d}=h,x=u(S);return{name:ge(h),value:S,category:g,symbolSize:x,x:p,y:f,...d?{itemStyle:{color:d}}:null}}),links:n?.map(({u:h,v:g,superWidth:v},p)=>{const f=i[p];return{source:`u${h}`,target:`v${g}`,lineStyle:{..._.isUndefined(v)?null:{width:b(v)},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:Mt[0]},{offset:1,color:Mt[1]}],global:!1},...f?{color:i[p],width:4}:null},superWidth:v}}),lineStyle:{opacity:1,cap:"round",join:"round",shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},itemStyle:{shadowColor:"rgba(0,0,0,.3)",shadowBlur:5},emphasis:{focus:"adjacency",...Cn}}]}},Yr=e=>e?{itemStyle:{color:e,shadowColor:"rgba(0,0,0,.3)",shadowBlur:16},symbolSize:16,symbol:"circle"}:{},wn=ot({[F["Maximum Biclique"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[F["Maximal Biclique Enumeration"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"},[F["(p,q)-biclique Counting"]]:{s:"Minimum vertex count in U",t:"Minimum vertex count in V"}});_.debounce(()=>{Me.warn("result is empty")});const He=e=>`${Dn.name}${e}`;function Dn(e){const{dataArrWithPos:n,graphData:s,size:r,resultGraph:a,selectMode:o,useSetInputST:i,setTab:l,resultTable:u,setSize:c,isEditX:b,commonValueFromTableData:m,clickEChartDotToAddMultiDots:h,superData:g}=e,v=_.isUndefined(r),{dataArrWithPos:p,visualMapSection:f,sections:S}=N.useMemo(()=>{if(b){const{datas:M,visualMapSection:y,sections:P}=Tn({...e});return{dataArrWithPos:M,visualMapSection:y,sections:P}}return{dataArrWithPos:n}},[n]),d=N.useMemo(()=>{if(p)return{...yn,dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"none"},{type:"slider",yAxisIndex:0,filterMode:"none"},{type:"inside",xAxisIndex:0,filterMode:"none"},{type:"inside",yAxisIndex:0,filterMode:"none"}],tooltip:{...jn,formatter(M,y){if("dataIndex"in M){const P=p[M.dataIndex];if(P)return _n(P,o)}return y}},xAxis:{type:"category",data:p.map(ge),axisPointer:qe},yAxis:{type:"value",axisPointer:qe},series:[{...Sn,data:p.map(({v:M,color:y})=>({value:M,...Yr(y)})),type:"line",emphasis:{focus:"self",...Cn},symbolSize:8,...b&&!v&&f?{markLine:{symbol:["circle","circle"],data:[{yAxis:r}]},markArea:{animation:!0,data:f.map(({start:M,end:y,color:P},O)=>{const K=p[M],Y=p[y],he=`${K?.k}${K?.kInd}~${Y?.k}${Y?.kInd}`,me={color:P,opacity:.03},we={show:!0,formatter:he,position:"insideBottom",color:"#000"},Be={label:we,itemStyle:{opacity:.05}};return[{itemStyle:me,label:we,xAxis:M,emphasis:Be},{itemStyle:me,label:we,xAxis:y,emphasis:Be}]})}}:null}],axisPointer:qe,...b&&f?{visualMap:{pieces:f.map(({start:M,end:y,color:P})=>{const O=p[M],K=p[y];return{min:M,max:y,color:P,label:`${O?.k}${O?.kInd}~${K?.k}${K?.kInd}`}}),dimension:0,show:!0,outOfRange:{color:"Gray",colorAlpha:.8},inverse:!0}}:null}},[p]),x=N.useMemo(()=>{if(!p)return;if(g){const{tableData:y,graphData:P}=g;if(y&&P){const O=Le(y,fn),K=pt(y,P,O,innerHeight);return Ge(K,P,o,void 0,O)}}return Ge(p,s,o,void 0,m)},[p,g]),w=N.useMemo(()=>{if(!v&&!a?.length){const M=wn[o];return{title:{text:`${o} result is empty`,subtext:`${_.map(i[0],(y,P)=>`${M?.[P]}: ${y}`).join(`
`)}`,left:"center",top:"center",textStyle:{fontSize:30,lineHeight:60},subtextStyle:{fontSize:20,lineHeight:40}}}}return Ge(u,a)},[a]),E=V(Fn({isEditX:b,setSize:c,size:r})),D=["dblclick","series",M=>{const{dataIndex:y,name:P,value:O}=M;Tt(y)&&P&&Tt(O)&&typeof O=="number"&&E({v:O})()}],$=["click","series",h],U=t.jsx(Ue,{option:d,onParams:[D,$]}),z=t.jsx(Ue,{option:x,onParams:[D,$]}),be=t.jsx(Ue,{option:w}),[de,te]=ee(["line","graph"]);return ss(de),V((M,y)=>de.includes(y)?M:null),t.jsxs(t.Fragment,{children:[t.jsx(Se,{value:A.table,children:U},He(A.table)),t.jsx(Se,{value:A.graph,children:z},He(A.graph)),t.jsx(Se,{value:A.result,children:be},He(A.result))]})}const{values:Zr,freeze:ht,keys:Yo}=Object;var H=(e=>(e.U="u",e.V="v",e))(H||{});const Qr=ht({0:"u",1:"v"}),W=32,ea=W/2,Le=(e,{svgWidth:n,svgHeight:s})=>{const r=e?.map(({v:g})=>g)??[],a=Math.min(...r),o=Math.max(...r),i=o-a,{length:l}=r,u=n-W*2,c=s-W*2,b=u/(l-1),m=c/i;return{valuesArr:r,min:a,max:o,diff:i,realHeight:c,xRadix:b,yRadix:m,length:l,getYPos:g=>W+(o-g)*m,svgWidth:n,svgHeight:s}},mt=ht({u:0,v:1}),ta=Object.keys(mt).length,na=e=>e?{neighbor:e}:{},Pt=(e,n,s,r)=>(e[n]||(e[n]=[])).push({k:s,kInd:r}),Nn=()=>({u:{},v:{}}),sa=e=>{const n=Nn(),s=n.u,r=n.v;for(const a of e){const{u:o,v:i}=a;s&&r&&!_.isUndefined(o)&&!_.isUndefined(i)&&(Pt(s,o,"v",i),Pt(r,i,"u",o))}return n},pt=(e,n,{xRadix:s,getYPos:r,svgWidth:a,max:o,min:i},l)=>{if(!n||!e)return[];const u=sa(n),c=a-W*2,b=_.groupBy(e,({k:p})=>p),m=_.mapValues(b,p=>c/(p.length-1)),h=(l-W*2)/(ta-1),g=_.mapValues(b,p=>new Map(_.sortBy(p,({kInd:f})=>f).map(({kInd:f},S)=>[f,S])));return e?.map((p,f)=>{const{v:S,k:d,kInd:x}=p;return{...p,i:f,x:W+f*s,y:r(S),graphX:W+(g[d].get(x)??0)*m[d],graphY:W+mt[d]*h,...na(u?.[d][x])}})},Ce=ht(["more-highlight","highlight","no-highlight"]),tt=_.last(Ce)??"",En=Ce.map(e=>_.camelCase(`is-${e}`)),{length:In}=Ce,ra=e=>1<<En.findIndex(s=>e[s]===!0)+1,aa=(1<<In)-1,oa=e=>{for(let n=1;n<In;n++)if(sr(e,n)===1)return Ce[n-1]??tt;return tt},ia=e=>{const n=En.findIndex(s=>e?.[s]===!0);return Ce[n]??tt},la=e=>{if(e.includes(Un)&&e.includes(nt))return nt;if(e.length!==1)return;const n=_.head(e);if(n)return n},ft=e=>{const n=Nn();return _.isUndefined(e)||e.length===0?n:{...n,..._.mapValues(_.groupBy({...e},({k:s})=>s),s=>_.keyBy(s,({kInd:r})=>r))}},ca=(e,n,s=ft(e))=>!e||!n?[]:n?.map(r=>{const a=_.uniq(_.map(r,(o,i)=>s[i]?.[o]?.color));return la(a)}),ua=({drawDotData:e,graphData:n})=>{const s=_.mapValues(_.groupBy(e,({k:r})=>r),r=>_.keyBy(r,({kInd:a})=>a));return n?.map(r=>{const a=Zr(_.mapValues(r,(u,c)=>s[c]?.[u])),o=a.reduce((u,c,b,m)=>{const{pos:h,highlightLevelNum:g}=u;if(!c)return u;const{graphX:v,graphY:p,color:f}=c;return{pos:[...h,[v,p]],highlightLevelNum:g&ra(c)}},{pos:[],highlightLevelNum:aa,color:""}),{highlightLevelNum:i}=o,l=_.uniq(a.map(u=>u?.color?u.color:""));return{...o,highlightLevel:oa(i),...l.length===1?{color:_.head(l)}:null}})},ue=e=>e.v,Mn=it.length,da=({isEditX:e,dataArrWithPos:n,commonValueFromTableData:{length:s},size:r})=>{if(!e)return n;const a=_.isNil(r);if(a)return n.map(c=>({...c,color:"",isHighlight:a?!1:c.v>=r}));const o=[];let i=0,l=_.head(n);if(!l)return n;let u=ue(l);for(let c=1;c<=s;c++){const b=[l];for(;c<s;c++){const m=n[c];if(!m)break;const h=ue(m);if(h>=r||h>=u)b.push(m),l=m,u=h;else{l=m,u=h;break}}o.push(...b.map(m=>({...m,color:it[i%Mn]??""}))),i++}return o.map(c=>({...c,isHighlight:c.v>=r}))},Tn=e=>{const{isEditX:n,dataArrWithPos:s,commonValueFromTableData:{length:r},size:a,colors:o=it}=e;if(!n)return{datas:s,sections:[]};if(_.isNil(a))return{datas:s,sections:[]};const l=[];let u=0;const c=[],b=[],m=[],h=[];for(let g=0;g<r;g++){const v=s[g];if(!v)break;const p=ue(v),f=s[g+1],S=()=>{m.push(v),h.push(g)},d=()=>{if(p>=a){S();const w=o[u%Mn]??"";return c.push(m),b.push({start:_.head(h)??0,end:_.last(h)??0,color:w}),l.push(...m.map(E=>({...E,color:w}))),m.length=0,h.length=0,u++,1}else return l.push(v),0};if(!f){d();break}ue(f)>=a?S():d()}return{datas:l,sections:c,visualMapSection:b}},ha=({isEditX:e})=>n=>()=>{},kn=e=>({title:vn(e),arrow:!0}),Ft=({clientWidth:e,clientHeight:n})=>{const s=e-W,r=n-W;return{svgWidth:e,svgHeight:n,xEnd:s,yEnd:r}},ma=e=>()=>{const{current:n}=e;return Ft(n||{clientWidth:innerWidth,clientHeight:innerHeight})},Pn=e=>classNames(I.g,I[ia(e)]),Fn=({isEditX:e,setSize:n,size:s})=>({dotData:r,v:a=r?.v})=>()=>{e&&n?.(a===s?void 0:a)},$n=e=>Ns(_.debounce(Ys(e,0))),zn=e=>e===F["Hierarchical Subgraphs Search"],pa="_title_1tlbs_1",fa="_Paper_1tlbs_5",ga="_Input_1tlbs_8",xa="_TextField_1tlbs_14",ie={title:pa,Paper:fa,Input:ga,"input-file":"_input-file_1tlbs_11",TextField:xa,"TextField-Paper":"_TextField-Paper_1tlbs_20","TextField-Paper-input":"_TextField-Paper-input_1tlbs_23","FileInfo-Button":"_FileInfo-Button_1tlbs_26"},ba="_Dialog_c2d28_1",va="_title_c2d28_4",_a="_Paper_c2d28_7",ja="_FileUploadTeam_c2d28_11",le={Dialog:ba,title:va,Paper:_a,FileUploadTeam:ja};function Sa(e){const{fileInfo:n}=e,{name:s,size:r,lastModified:a,type:o,downloadUrl:i}=n;return s?t.jsxs(t.Fragment,{children:[t.jsx(ce,{}),t.jsx(C,{elevation:24,className:le.Paper??"",children:t.jsxs("fieldset",{children:[s?t.jsx("legend",{children:t.jsx(Ie,{href:i,title:"preview",target:"_blank",underline:"hover",children:s})}):null,s&&r?t.jsxs("p",{children:[" Content Length: ",filesize(r)]}):null,a?t.jsxs("p",{children:[" Last Modified: ",new Date(a).toJSON()]}):null,o?t.jsxs("p",{children:[" Content Type: ",o]}):null,t.jsxs(C,{elevation:0,className:le["FileInfo-Button"]??"",children:[t.jsx(Ie,{href:i,target:"_blank",underline:"hover",children:t.jsxs(J,{variant:"outlined",children:[t.jsx(Es,{}),"preview"]})}),t.jsxs(J,{variant:"outlined",onClick:()=>{const l=document.createElement("a");l.href=i??"",l.download=s,l.click()},children:[t.jsx(Is,{}),"download"]})]})]})})]}):null}const ya="_examples_141yp_1",Ca={examples:ya};function wa(e){const{defaultTxt:n,chooseExample:s}=e,[r,a,o]=Yt(null);return t.jsxs(C,{elevation:24,className:Ca.examples??"",children:[t.jsx(G,{title:"No suitable data? Click here to try these.",arrow:!0,children:t.jsxs(J,{size:"large",fullWidth:!0,onClick:i=>{a(i.currentTarget)},children:["> ",t.jsx(Ie,{component:"button",children:"Examples"})]})}),t.jsx(Ms,{open:!!r,anchorEl:r,onClose:()=>{o()},children:t.jsx(Ts,{children:n.map((i,l)=>t.jsx(G,{arrow:!0,title:`Example ${l+1}`,placement:"right",children:t.jsx(ks,{disablePadding:!0,children:t.jsx(Ps,{onClick:()=>{s(i),o()},children:t.jsx(Ie,{component:"button",underline:"hover",children:i})},i)})},i))})})]})}const{revokeObjectURL:Da,createObjectURL:Na}=URL,{freeze:Ea}=Object,{error:Te}=console,Ia={lastModified:0,name:"",size:0,type:"",downloadUrl:""},An=e=>{e&&Da(e)},Ma=e=>n=>{if(n){const s=An.bind(null,e);n.addEventListener("beforeunload",s),n.addEventListener("unload",s)}},gt=e=>{const n=Na(e);return Ae(()=>{const s=Ma(n);s(window??self??globalThis??void 0),s(document);const{documentElement:r,body:a,head:o,scrollingElement:i,firstElementChild:l,lastElementChild:u,activeElement:c,firstChild:b,lastChild:m,doctype:h,defaultView:g}=document;s(o),s(a),s(r),s(c),s(l),s(u),s(i),s(m),s(h),s(g),s(b)}),n},xt=Ea({DBname:"HJX",storeName:"HXJ"}),Ta=e=>({...e,fileInfo:{...e.fileInfo,downloadUrl:gt(new Blob([e.fileData]))}}),Ln=e=>pn(e).then(Ta).catch(()=>fetch(e).then(async n=>{const{headers:s}=n,r=await n.text(),a=gt(new Blob([r])),o={fileInfo:{lastModified:Date.parse(s.get("last-modified")??""),name:e,size:parseInt(s.get("content-length")??""),type:s.get("content-type")??"",downloadUrl:a},fileData:r};return lt({...xt,IDBValidKey:e,data:o}),o},Te)).catch(Te);function ka(e){const{parseData:n,setWillPatchData:s,defaultTxt:r,title:a}=e,[o,i]=ee(""),[l,u]=Zt(Ia);st(()=>{An(l.downloadUrl)});const c=V((m,h)=>{s({fileName:h.match(/[^\/]+$/)?.[0]??h,data:m})}),b=V(m=>Ln(m).then(h=>{if(h){const{fileInfo:g,fileData:v}=h,p=n(v);if(p.length===0){Me.error("The file format is incorrect!");return}u(g),c(p,m)}},Te).catch(Te));return t.jsx(t.Fragment,{children:t.jsxs(C,{elevation:24,children:[t.jsx("h4",{className:ie.title,children:a}),t.jsxs(C,{elevation:24,className:classNames(ie.Paper,ie.Input),children:[t.jsxs(J,{component:"label",variant:"contained",startIcon:t.jsx(Fs,{}),fullWidth:!0,title:"Upload File",children:["Upload File",t.jsx("input",{type:"file",className:ie["input-file"],onChange:m=>$e.unstable_batchedUpdates(()=>{const h=m.target.files?.[0];if(!h){alert("some error occur");return}const g=new FileReader;g.readAsText(h),g.onload=v=>{const p=v.target?.result||g.result;if(typeof p=="string")try{const{name:f,lastModified:S,size:d,type:x}=h;c(n(p),f);const w=gt(h);u({...l,name:f,lastModified:S,size:d,type:x,downloadUrl:w});const E={fileInfo:{...l,name:f,lastModified:S,size:d,type:x,downloadUrl:w},fileData:p};lt({...xt,IDBValidKey:f,data:E})}catch{alert("some error occur")}}}),accept:".txt"})]}),t.jsx(ce,{orientation:"vertical",variant:"fullWidth",flexItem:!0,children:t.jsx(Qt,{label:"OR"})}),t.jsxs(C,{elevation:24,className:ie.TextField??"",children:[t.jsxs(C,{elevation:24,className:ie["TextField-Paper"]??"",children:[t.jsx(Pe,{label:"Please input URL",onChange:m=>{i(m.target.value)},value:o,fullWidth:!0,placeholder:"Please input URL",title:"Please input URL",className:ie["TextField-Paper-input"]??""}),t.jsx(J,{size:"large",variant:"contained",disabled:!o,onClick:()=>b(o),children:"Fetch"})]}),t.jsx(wa,{defaultTxt:r,chooseExample:m=>{i(()=>(b(m),m))}})]})]}),t.jsx(Sa,{fileInfo:l})]})})}const{isSafeInteger:Ke}=Number;function $t(e){const n=e.split(`
`),s=[];let r=0,a;const{length:o}=n;for(;r<o;)if(n[r]?.startsWith("No.")){r++;const i=n[r++],l=n[r++],u=n[r++];let c;r<o&&n[r]?.startsWith("count:")&&(c=n[r++]);const b=i?.match(/size=(\d+)/)?.[1];if(!b)throw new Error("Invalid size format");const m=parseInt(b,10);if(!Ke(m)||m<=0)throw new Error("Size must be a positive integer");const h=l?.match(/U: (\d+(?: \d+)*)/);if(!h)throw new Error("Invalid U format");const g=h[1]?.split(" ").map(Number)??[];if(g?.some(isNaN)||g?.some(d=>d<=0))throw new Error("U values must be positive integers");const v=u?.match(/V: (\d+(?: \d+)*)/);if(!v)throw new Error("Invalid V format");const p=v[1]?.split(" ").map(Number)??[];if(p?.some(isNaN)||p?.some(d=>d<=0))throw new Error("V values must be positive integers");let f;if(c){const d=c.match(/count: (\d+)/)?.[1];if(!d)throw new Error("Invalid count format");if(f=parseInt(d,10),!Ke(f)||f<=0)throw new Error("Count must be a positive integer")}const S={size:m,[H.U]:g,[H.V]:p,label:`Rank ${s.length+1}`,...f?{count:f}:null};s.push(S)}else if(n[r]?.startsWith("The number of ")){const i=n[r+1];if(!i)throw new Error("The number of (\\d,\\d)-bicliques not has next line");const l=parseInt(i,10);if(!Ke(l)||l<=0)throw new Error("The number of (\\d,\\d)-bicliques must be a positive integer");a=l;break}else r++;return{dataArr:s,..._.isUndefined(a)?{}:{count:a}}}const{error:zt}=console,{isSafeInteger:Pa}=Number,At="http://47.99.129.94",Lt=(e,n)=>{const r=n.exec(e)?.[1]?.trim();return r?r.split(/\s+/).map(a=>{const o=parseInt(a);return Pa(o)?o:0}):[]},Fa=e=>{const r=/size=(\d+)/.exec(e)?.[1],a=r?parseInt(r,10):0,o=Lt(e,/U:\s+([\d\s]+)/),i=Lt(e,/V:\s+([\d\s]+)/);return{size:a,u:o,v:i,label:"Rank 1"}},$a=e=>({[F["Maximum Biclique"]]:{dataArr:[Fa(e)]},[F["Maximal Biclique Enumeration"]]:$t(e),[F["(p,q)-biclique Counting"]]:$t(e)}),za=async(e,n,s)=>{const r="/api/BCviz/v3",a=`${r}?${new URLSearchParams({...s,problem:ct[e]})}`,o=await pn(a).catch(()=>axios.get(r,{responseType:"text",params:s}).then(i=>{const{data:l}=i,u={...$a(l)[e],...s};return lt({...xt,data:u,IDBValidKey:a}),u},i=>{throw zt(i),new Error(i)})).catch(i=>{throw zt(i),new Error(i)});return{...n,...o?{[e]:o}:null}},Bt=Object.freeze({loadingDelay:300,throttleWait:300,debounceWait:300,debounceLeading:!0}),Aa="_Tool_17xe8_7",La="_IconButton_17xe8_10",Ba="_triangle_17xe8_15",Oa="_rotate_17xe8_25",Ee={"Main-Side":"_Main-Side_17xe8_1",Tool:Aa,IconButton:La,triangle:Ba,rotate:Oa},Ot=["225deg","45deg"];function Rt(e){const{buttonOrder:n=0,children:s,...r}=e,[a,{toggle:o}]=ye(!0);return s?t.jsxs(C,{className:Ee["Main-Side"]??"",elevation:24,...r,children:[t.jsx(G,{title:`${a?"collapse":"expand"} toolbar`,arrow:!0,children:t.jsx(en,{size:"large",className:Ee.IconButton??"",onClick:()=>{o(),Ae(()=>{Vr(Ur)})},style:{"--order":n,"--initRotate":Ot[n],"--clickRotate":Ot[1-n]},children:t.jsx("div",{className:classNames(Ee.triangle,{[Ee.rotate??""]:a})})})}),t.jsx($s,{in:a,orientation:"horizontal",children:s})]}):null}const{error:Bn}=console,{from:Wt,isArray:Zo}=Array,{freeze:Ra}=Object,{isSafeInteger:xe}=Number,On=e=>{const n=e.trim().split(`
`),s=[];for(const r of n){const[a,o,i]=r.trim().split(/[ \t]/),l=parseInt(o),u=parseInt(i);if(!xe(l)||!xe(u))return[];s.push({k:Qr[a],kInd:l,v:u})}return s},Wa=(e,n)=>{const[s,r]=e.trim().split(/[ \t]/),a=parseInt(s),o=parseInt(r);!xe(a)||!xe(o)||n.push({[H.U]:a,[H.V]:o})},Va=(e,n)=>{const[s,r,a]=e.trim().split(/[ \t]/),o=parseInt(s),i=parseInt(r),l=parseInt(a);!xe(o)||!xe(i)||n.push({[H.U]:o,[H.V]:i,superWidth:l})},Ua=(e,n=Wa)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},qa=(e,n=Va)=>{const s=e.trim().split(`
`),r=[];for(const a of s)n(a,r);return r},Vt=["dataset","BCviz_file"],Ut=Ra([{title:"Bipartite Subgraph",parseData:Ua,defaultTxt:["example.txt","writer.txt","marvel.txt"]},{title:"Maximum Cohesion",parseData:On,defaultTxt:["example_cohesion.txt","writer_cohesion.txt","marvel_cohesion.txt"]}]),Xe=(e="searchParams is not enough")=>{throw Bn(e),new Error(e)};function Ga(e){const{setDatas:n,setFileNames:s}=e,[r,{setTrue:a,setFalse:o}]=ye(!1),{list:i,resetList:l,replace:u}=rs(),c=V(d=>x=>u(d,x)),b=V(()=>l([])),[m,h]=Zs(),{arrEntries:g,arrKeys:v}=N.useMemo(()=>{const d=Wt(m.entries()),x=d.map(([w])=>w);return{arrEntries:d,arrKeys:x}},[m]),p=N.useMemo(()=>{const{length:d}=n;return!(m.size<d||_.uniq(v).filter(x=>Vt.includes(x)).length!==d)},[m]),f=V(()=>{a(),h()});rt(()=>{if(!p){f();return}const d=g.map(([,x])=>x);Promise.all(d.map(x=>Ln(x))).then(x=>{Vt.map((w,E)=>{const D=v.indexOf(w),$=x[D]?.fileData,U=d[D];if(!$||!U)return Xe();const z=Ut[E]?.parseData($);return z?.length?{parseData:z,fileName:U}:Xe("parse error")}).forEach(({parseData:w,fileName:E},D)=>{const $=n[D],U=s[D];if(!U||!$)return Xe();$(w),U(E)})}).catch(x=>{Bn(x),f()})}),fe(()=>{r||b()},[r]);const S=i.length===n.length&&Wt(i).every(Boolean);return t.jsxs(t.Fragment,{children:[t.jsx(J,{size:"large",variant:"contained",onClick:a,fullWidth:!0,children:"New Graph"}),t.jsxs(tn,{onClose:d=>{p&&o()},className:le.Dialog??"",open:r,children:[t.jsx(C,{elevation:24,className:le.title??"",children:t.jsx("h3",{children:"New Graph"})},"title"),t.jsx(C,{elevation:24,className:classNames(le.Paper,le.FileUploadTeam),children:Ut.map((d,x)=>N.createElement(ka,{setWillPatchData:c(x),...d,key:x}))},"upload"),t.jsx(ce,{}),t.jsx(C,{elevation:24,className:le.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,disabled:!S,onClick:()=>$e.unstable_batchedUpdates(()=>{if(S){const[d,x]=i.map(({fileName:w})=>w);if(!d||!x)return;i.forEach(({fileName:w,data:E},D)=>{n[D]?.(E),s[D]?.(w)}),h({dataset:d,BCviz_file:x},{replace:!0,preventScrollReset:!1,flushSync:!1,viewTransition:!0}),o()}}),children:"Comfirm"})},"confirm"),t.jsx(dn,{})]})]})}const Ha="_Tool_tgrdm_1",Je={Tool:Ha,"x-line-mode":"_x-line-mode_tgrdm_7","x-line-mode-label":"_x-line-mode-label_tgrdm_10"};function Ka(e){const{toggleIsEditX:n=()=>{},isEditX:s,className:r,setDatas:a,setFileNames:o}=e,{pathname:i}=er();return t.jsxs(C,{elevation:24,className:classNames(Je.Tool,r),children:[t.jsx(Ga,{setDatas:a,setFileNames:o}),i===qn.old?t.jsx(J,{variant:"outlined",className:Je["x-line-mode"]??"",fullWidth:!0,children:t.jsx(zs,{className:Je["x-line-mode-label"]??"",onChange:n,control:t.jsx(nn,{checked:s}),label:"Edit Mode"})}):null]})}const{isSafeInteger:Xa}=Number;function qt({useSetInputST:[e,n],k:s,label:r=""}){const a=V(o=>n({[s]:o}));return t.jsxs(Fe,{fullWidth:!0,children:[t.jsx(Pe,{fullWidth:!0,placeholder:r,label:r,type:"number",title:s,value:e[s],required:!0,onChange:o=>{const{value:i}=o.target;if(!i){a(i);return}const l=parseInt(i),u=Number(i),c=+i;ut(l,u,c)&&Xa(l)&&l>=0&&a(l.toString())},inputProps:{min:0,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric"}),t.jsx(As,{})]})}const Ja="_Input_1qdq0_1",Ya={Input:Ja};function Rn({children:e,autoFocus:n,tabIndex:s,className:r,style:a,...o}){return t.jsx(at,{...o,..._.omitBy({autoFocus:n,tabIndex:s,className:r,style:a},_.isUndefined),children:e})}const Wn=({InputLabelProps:e,...n})=>t.jsx(Pe,{...n,size:"medium",InputLabelProps:{...e,className:e?.className??"",style:e?.style??{}}});function Ye(e){const{useSetInputST:n,modeKey:s,useGetFromST:r,fileNames:a,setTabToResult:o,dataArrWithPos:i,useMultiDots:[l,u]}=e,{data:c,loading:b,runAsync:m}=r,[h,g]=n,{s:v="",t:p=""}=wn[s]??{};return t.jsx(ke,{value:s,className:k.TabPanel??"",children:t.jsxs(C,{elevation:24,className:Ya.Input??"",children:[t.jsx(qt,{useSetInputST:n,k:"s",label:v}),t.jsx(qt,{useSetInputST:n,k:"t",label:p}),t.jsx(sn,{value:l??[],onChange:(f,S)=>{u(S)},multiple:!0,options:i,getOptionLabel:ge,renderOption:(f,S,{selected:d})=>t.jsxs(Rn,{...f,children:[t.jsx(nn,{icon:t.jsx(Ls,{fontSize:"large"}),checkedIcon:t.jsx(Bs,{fontSize:"large"}),checked:d}),ge(S)]}),renderInput:f=>t.jsx(Wn,{...f,label:"Choose Vertices",placeholder:"Choose Vertices"}),disableCloseOnSelect:!0,autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1}),t.jsxs(Os,{disabled:_.some(h,f=>f===""),variant:"contained",size:"large",onClick:()=>$e.unstable_batchedUpdates(async()=>{await m(s,c,{...a,problem_type:ct[s],...h,vertices:JSON.stringify(l?.map(({k:f,kInd:S})=>[mt[f],S]))}).then(f=>(Me.success(`fetch ${s} success`),o(),f),()=>{Me.error(`fetch ${s} fail`)})}),children:["Fetch ",s]})]})})}function Za(){return navigator.language}function Qa(){return navigator.languages[0]}function eo(){return new Intl.DateTimeFormat().resolvedOptions().locale}function to(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}const no=()=>Za()==="zh-CN"&&Qa()==="zh-CN"&&eo()==="zh-CN"&&to()==="Asia/Shanghai"&&new Date().getTimezoneOffset()===-480&&new Intl.DateTimeFormat().resolvedOptions().timeZone==="Asia/Shanghai",so=N.forwardRef(e=>{const{viewBox:n,graphLine:s,drawDotData:r,clickCircle:a,doubleClickCircle:o}=e;return t.jsxs("svg",{viewBox:n,className:I["graph-svg"],children:[s?.map(({pos:i,highlightLevel:l,color:u},c)=>t.jsx("polyline",{points:i.map(([b,m])=>`${b},${m}`).join(" "),fill:"none",stroke:"black",className:classNames(I.line,I[l]),style:{"--color":u}},c)),r.map(i=>{const{k:l,kInd:u,v:c,graphX:b,graphY:m,color:h}=i,g=ge(i);return t.jsx(t.Fragment,{children:t.jsx(G,{...kn(i),children:t.jsxs("g",{onDoubleClick:o({dotData:i}),onClick:a(i),className:Pn(i),style:{"--color":h},children:[t.jsx("circle",{cx:b,cy:m,className:I.circle}),t.jsx("text",{x:b,y:m,className:I.text,children:g})]},b)})})})]})});function Gt(e){const{isEditX:n,xEnd:s,onClick:r=()=>{},dotData:{y:a,v:o},className:i=""}=e;return n?t.jsx(t.Fragment,{children:t.jsx("line",{x1:W,x2:s,y1:a,y2:a,className:classNames(I["hover-x"],i),onClick:r})}):null}const ro=N.forwardRef(e=>{const{viewBox:n,drawDotData:s,clickCircle:r,doubleClickCircle:a,svgRef:o,isEditX:i,commonValueFromTableData:{valuesArr:l,xRadix:u,length:c,getYPos:b,svgHeight:m},svgSize:h,size:g}=e,{xEnd:v=0,yEnd:p=0}=h,f=N.useMemo(()=>_.sortBy(_.uniq(l)).map(d=>({v:d,yPos:b(d)})),[s]),S=N.useMemo(()=>{let d=_.head(s);if(!d)return[];let x=ue(d);const w=[];for(let E=1;E<c;E++){let D=s[E];if(!D)break;let $=ue(D),U=$-x;const{x:z=0,y:be=0}=d,de=[z,be];for(;E<c;E++){const te=s[E+1];if(te){const O=ue(te);if(O-$===U){D=te,$=O;continue}}const{x:M=0,y=0}=D,P=[M,y];w.push([de,P]);break}d=D,x=$}return w},[s]);return t.jsxs("svg",{viewBox:n,ref:o,className:I.svg,style:{"--stroke-dasharray":u},children:[t.jsx("line",{x1:W,y1:p,x2:v,y2:p,className:I["coordinate-axis-x"]}),"  ",t.jsx("line",{x1:W,y1:W,x2:W,y2:p,className:I["coordinate-axis-y"]}),"  ",f.map(({v:d,yPos:x})=>t.jsxs("g",{className:I.g,onClick:a({v:d}),children:[t.jsx("text",{x:ea,y:x,className:I["axis-text"],children:d}),t.jsx(Gt,{xEnd:v,isEditX:i,className:classNames({[I["hover-click-line"]??""]:d===g}),dotData:{v:d,y:x}})]})),S.map(([[d,x],[w,E]])=>t.jsx(t.Fragment,{children:t.jsx("line",{x1:d,y1:x,x2:w,y2:E,className:I.line})})),s.map(d=>{const{k:x,v:w,kInd:E,x:D,y:$,color:U}=d,z=kn(d);return t.jsx(t.Fragment,{children:t.jsxs("g",{className:Pn(d),onClick:r(d),onDoubleClick:a({dotData:d}),style:{"--color":U},children:[t.jsx(G,{...z,children:t.jsx("text",{x:D,y:m,className:I.text,children:ge(d)})}),i?t.jsx(t.Fragment,{children:t.jsx("line",{x1:D,x2:D,y1:$,y2:p,className:I["hover-y"]})}):null,t.jsx(G,{...z,children:t.jsx("circle",{cx:D,cy:$,className:I.circle})}),t.jsx(Gt,{xEnd:v,dotData:d,isEditX:i,onClick:a({dotData:d}),className:classNames({[I["hover-x--no-show"]??""]:w===g})})]})})})]})});function ao(){const[e,n]=ee(),[s,r]=ee([]),a=N.useRef(null),o=N.useMemo(ma(a),[a.current]),i=N.useMemo(()=>Le(e,o),[e,o]);return{tableData:e,setTableData:n,graphData:s,setGraphData:r,svgRef:a,svgSize:o,commonValueFromTableData:i}}const oo=e=>({clickCircle:V(ha(e))}),Ze=e=>`${Vn.name}${e}`;function Vn(e){const{dataArrWithPos:n,graphData:s,svgSize:r,setSize:a=()=>{},isEditX:o,size:i}=e,l=N.useMemo(()=>da({...e,size:i}),[i,n]),{svgWidth:u=0,svgHeight:c=0}=r,b=c,m=N.useMemo(()=>ua({drawDotData:l,graphData:s}),[l]),{clickCircle:h}=oo({...e,setSize:a,size:i}),g=V(Fn({isEditX:o,setSize:a,size:i,drawDotData:l})),v={...e,drawDotData:l,clickCircle:h,doubleClickCircle:g,graphLine:m,size:i};return t.jsxs(t.Fragment,{children:[t.jsx(Se,{value:A.table,children:t.jsx(ro,{...v,viewBox:[0,0,u,b].join(" ")})},Ze(A.table)),t.jsx(Se,{value:A.graph,children:t.jsx(so,{...v,viewBox:[0,0,u,c].join(" ")})},Ze(A.graph)),t.jsx(ke,{value:A.result},Ze(A.result))]})}const io="_Dialog_1fpbd_1",lo="_title_1fpbd_4",co="_Paper_1fpbd_7",uo="_Fab_1fpbd_11",pe={Dialog:io,title:lo,Paper:co,Fab:uo},ho=({renderingEngine:e})=>{switch(e){case"SVG Engine":return t.jsx(t.Fragment,{children:"It is unstable! Suitable for small data volumes, few functions are available, and performance is low."});case"ECharts Engine":return t.jsx(t.Fragment,{children:"Suitable for large data volumes. With many available functions and high performance."})}};function mo(e){const{setSelectEngine:n,selectEngine:s}=e,[r,{setTrue:a,setFalse:o}]=ye(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Rs,{size:"large",onClick:a,title:"settings",className:pe.Fab??"",children:t.jsx(G,{title:"settings",arrow:!0,children:t.jsx(en,{size:"large",children:t.jsx(Ws,{fontSize:"large"})})})}),t.jsxs(tn,{onClose:o,className:pe.Dialog??"",open:r,children:[t.jsx(C,{elevation:24,className:pe.title??"",children:t.jsx("h3",{children:"Settings"})},"title"),t.jsx(ce,{}),t.jsx(C,{elevation:24,className:classNames(pe.Paper),children:t.jsxs(Fe,{fullWidth:!0,children:[t.jsx(G,{arrow:!0,title:"Select Rendering Engine",placement:"top",children:t.jsx(rn,{children:"Select Rendering Engine"})}),t.jsx(an,{fullWidth:!0,label:"Select Rendering Engine",defaultValue:"ECharts Engine",onChange:i=>{const l=i.target.value;l==="SVG Engine"&&!confirm("SVG is very unstable! Are you sure you want to switch to it?")||n(l)},value:s,children:["ECharts Engine","SVG Engine"].map(i=>t.jsx(at,{value:i,children:t.jsx(G,{arrow:!0,placement:"right",title:t.jsx(ho,{renderingEngine:i}),children:t.jsx("div",{children:i})})},i))})]})},"content"),t.jsx(ce,{}),t.jsx(C,{elevation:24,className:classNames(pe.Paper),children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,color:"warning",onClick:()=>{confirm("Are you sure you want to clear the cache?")&&br().then(()=>{alert("Clear Success!")},()=>{alert("Clear Fail!")})},children:"Clear Cache"})},"content"),t.jsx(ce,{}),t.jsx(C,{elevation:24,className:pe.Paper??"",children:t.jsx(J,{size:"large",variant:"contained",fullWidth:!0,onClick:o,startIcon:t.jsx(Vs,{fontSize:"large"}),children:"Back"})},"back")]})]})}const po="_Form_3js51_1",fo={Form:po},{isSafeInteger:go}=Number;function xo(e){const{setSize:n,value:s,max:r}=e,[a,o]=ee(s);fe(()=>{o(s)},[s]);const i=_.isUndefined(a),l=!i&&(a<0||a>r);return t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Please double-click the dot on the Cohesion."}),t.jsx(ce,{variant:"fullWidth",flexItem:!0,children:t.jsx(Qt,{label:"OR"})}),t.jsxs(C,{elevation:24,className:fo.Form??"",children:[t.jsx(Fe,{fullWidth:!0,children:t.jsx(Pe,{fullWidth:!0,placeholder:"Input Size",label:"Input Size",type:"search",title:"Input Size",value:a,inputProps:{min:0,max:r,inputMode:"numeric",pattern:"^(0|[1-9]d*)$"},spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"on",inputMode:"numeric",onChange:u=>$e.unstable_batchedUpdates(()=>{const{value:c}=u.target;if(!c)o(void 0);else{const b=parseInt(c);go(b)&&o(b)}}),error:l,...l?{helperText:`Size is not in the right range(0 ~ ${r}).`}:null})}),t.jsx(G,{arrow:!0,title:i?"Set size to undefined":`${F["Hierarchical Subgraphs Search"]} with size is ${a}`,children:t.jsx(J,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>{n(a)},disabled:l,children:"Search"})})]})]})}const bo=()=>Promise.all([fetch("writer.supervertex"),fetch("writer.superedge")]).then(e=>e.map(n=>n.text())).then(e=>Promise.all(e)).then(async([e,n])=>!e||!n?{}:{tableData:On(e),graphData:qa(n)}),nt="tan",Un="red",{isSafeInteger:Ht}=Number,{entries:Kt,freeze:Qo,values:ei,keys:ti,fromEntries:ni}=Object;if(mn){const{from:e}=Array,n=console.error;console.error=function(s){typeof s=="string"&&(s.startsWith('Warning: Each child in a list should have a unique "key" prop.')||s.startsWith("Warning: validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s"))||n.apply(console,e(arguments))}}var qn=(e=>(e.old="/old",e.new="/new",e))(qn||{});const vo=(e,n)=>!_.isUndefined(e)&&e>=n,Xt=({title:e,detail:n})=>_.isUndefined(n)?null:t.jsxs(on,{className:I.Accordion??"",defaultExpanded:!0,children:[t.jsx(ln,{expandIcon:t.jsx(cn,{}),className:I["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(ae,k["Main-Right--Show--Text"]),children:e})}),t.jsx(un,{className:I["Accordion-Details"]??"",children:t.jsx("p",{className:k["Main-Right--Show--Text"],children:n})})]},e),bt=36;N.createContext({});function _o(){rt(()=>{const{origin:j,protocol:T,hash:R}=location;if(!sessionStorage.hjx&&Qe&&j!==At&&T==="https:"&&no()){const L=At+R;confirm(`后端服务已上线，点击“确认”跳转.${L}`)?location.href=L:sessionStorage.setItem("hjx","hxj")}}),Jt("beforeunload",j=>{if(Qe&&(Z||r)){j.preventDefault();const T="You have unsaved changes. Are you sure you want to leave?";return j.returnValue=T,T}});const[e]=ye(!1),{tableData:n,setTableData:s,graphData:r,setGraphData:a,svgSize:o,commonValueFromTableData:i,svgRef:l}=ao(),{data:u,runAsync:c,mutate:b}=_t(bo,{...Bt,manual:!0});fe(()=>{E(void 0),n&&(n.length>bt?c():b(void 0))},[n]),fe(()=>{},[n]);const{svgWidth:m=0,svgHeight:h=0}=o,[g="",v]=jt("dataset",{defaultValue:""}),[p="",f]=jt("BCviz_file",{defaultValue:""}),S={dataset:g,BCviz_file:p},d=_t(za,{...Bt,manual:!0,staleTime:-1,cacheTime:-1}),{data:x,loading:w,mutate:E}=d,D=Zt({s:"",t:""}),[$,U]=ee(A.table),[z,be,de]=Yt(mn?F["Hierarchical Subgraphs Search"]:F["Maximum Biclique"]),[te,M]=ee("ECharts Engine"),y=N.useMemo(()=>zn(z),[z]),[P,O]=ee(0),K=ee([]),[Y,he]=K,[me,{set:we,setTrue:Be,setFalse:Co}]=ye(!0),Z=N.useMemo(()=>Dt(me,n),[n,me]),{size:oe,UV:Q,dataThisMode:wo,dataArr:ve,selectShowData:vt,count:Gn,numOfData:De,params:Ne}=N.useMemo(()=>{const j=x?.[z];if(!j)return{};const{count:T,dataArr:R,...L}=j,X=R?.[P];if(!X)return{};const{size:ne,count:B,label:se,...re}=X;return y?{size:ne}:{size:ne,UV:re,dataThisMode:j,dataArr:R,selectShowData:X,count:B,numOfData:T,params:L}},[x,z,P,Z]),Hn=te==="ECharts Engine",Oe=_.isUndefined(oe),Re=V(j=>{E({...x,[F["Hierarchical Subgraphs Search"]]:{dataArr:[{size:j}]}})});fe(()=>{U(A.table),de()},[Z,te]),fe(()=>{he([])},[Z]);const{dataArrWithPos:_e,visualMapSection:Do}=N.useMemo(()=>{const j=pt(Z,r,i,h);if(y){const{datas:L,visualMapSection:X}=Tn({isEditX:y,dataArrWithPos:j,size:oe,commonValueFromTableData:i});return{dataArrWithPos:L,visualMapSection:X}}const T=Q?j?.map(L=>{const{k:X,kInd:ne}=L,B=Q[X]?.includes(ne)?nt:void 0;return{...L,...B?{color:B}:null}}):j;return{dataArrWithPos:Cr(T,Y)}},[i,Q,z,oe,Y]),{resultGraph:Kn,resultTable:Xn}=N.useMemo(()=>{const{resultGraph:j,filterTableData:T}=(()=>{if(y||!Q){const B=_e.filter(({color:je})=>je),se=ft(B);return{resultGraph:r.filter(je=>_.every(je,(Zn,Qn)=>!!se[Qn][Zn])),filterTableData:B}}const X=r.filter(B=>_.every(B,(se,re)=>Q[re]?.includes(se)??!1)),ne=Z.filter(({k:B,kInd:se})=>Q[B]?.includes(se));return{resultGraph:X,filterTableData:ne}})(),R=Dt(me,T),L=Nr(R,j,{svgWidth:m,svgHeight:h});return{resultGraph:j,resultTable:L}},[Q,r,Z,y,_e]),Jn=V(()=>{}),We={useSetInputST:D,useGetFromST:d,fileNames:S,setTabToResult:Jn,dataArrWithPos:Z??[],useMultiDots:K},Yn=V(j=>{const{dataIndex:T,name:R,value:L}=j;if(!y&&Ht(T)&&R&&Ht(L)&&typeof L=="number"){const X=R[0],ne=parseInt(R.slice(1));if(!Z)return;const B=Z.find(({k:re,kInd:je})=>re===X&&je===ne);if(!B)return;if(!Y||Y.length===0){he([B]);return}const se=Y.includes(B);he(se?Y.filter(re=>re!==B):[...Y,B])}});return t.jsxs(t.Fragment,{children:[t.jsxs(C,{className:k.Main??"",elevation:24,children:[t.jsx(mo,{setSelectEngine:M,selectEngine:te}),t.jsx(Rt,{children:t.jsxs(C,{elevation:24,className:k["Main-Left"]??"",children:[t.jsx(Ka,{setDatas:[a,s],setFileNames:[v,f],className:k.Tool}),null,t.jsx(C,{elevation:24,className:k.Select??"",children:t.jsxs(Fe,{fullWidth:!0,children:[t.jsx(rn,{children:"Select Mode"}),t.jsx(an,{value:z,onChange:j=>{be(j.target.value)},label:"Select Mode",fullWidth:!0,children:[F["Maximum Biclique"],F["Maximal Biclique Enumeration"],F["(p,q)-biclique Counting"],F["Hierarchical Subgraphs Search"]].map(j=>t.jsx(at,{value:j,title:ct[j],children:j},j))})]})}),t.jsx(C,{elevation:24,children:t.jsxs(yt,{value:z,children:[t.jsx(Ye,{...We,modeKey:F["Maximum Biclique"]}),t.jsx(Ye,{...We,modeKey:F["Maximal Biclique Enumeration"]}),t.jsx(Ye,{...We,modeKey:F["(p,q)-biclique Counting"]}),t.jsx(ke,{value:F["Hierarchical Subgraphs Search"],className:k.TabPanel??"",children:t.jsx(C,{elevation:24,className:k["Paper-text"]??"",children:t.jsx(xo,{value:oe,setSize:Re,max:i.max})})})]})}),ve&&vo(ve?.length,2)?t.jsx(C,{elevation:24,className:k.Select??"",children:t.jsx(G,{title:t.jsxs(t.Fragment,{children:["Count: ",t.jsx("span",{className:ae,children:ve.length})]}),arrow:!0,placement:"right",children:t.jsx(sn,{autoComplete:!0,autoCapitalize:"words",autoFocus:!0,autoHighlight:!0,blurOnSelect:!0,clearOnBlur:!0,clearOnEscape:!0,fullWidth:!0,handleHomeEndKeys:!0,includeInputInList:!0,openOnFocus:!0,selectOnFocus:!0,disableClearable:!0,disableCloseOnSelect:!1,disabledItemsFocusable:!1,disableListWrap:!1,disablePortal:!1,filterSelectedOptions:!1,freeSolo:!1,options:ve,...vt?{value:vt}:null,onChange:(j,T,R,L)=>{O(T?ve.indexOf(T):0)},renderInput:j=>t.jsx(Wn,{...j,label:"Choose Rank",placeholder:"Choose Rank"}),renderOption:(j,{label:T,...R},L)=>t.jsx(G,{title:yr(R),arrow:!0,placement:"right",children:t.jsx(Rn,{...j,children:T??`Rank ${L.index+1}`})})})})}):t.jsx(t.Fragment,{})]})}),t.jsx(C,{className:k["Main-Mid"]??"",elevation:24,children:t.jsxs(yt,{value:$,children:[t.jsx(C,{elevation:24,children:t.jsxs(Us,{onChange:(j,T)=>U(T),variant:"fullWidth",children:[t.jsx(Ve,{label:"Cohesion",value:A.table,className:k.Tab??""}),t.jsx(Ve,{label:"Bipartite Subgraph",value:A.graph,className:k.Tab??""}),t.jsx(G,{arrow:!0,title:Ne?t.jsx(t.Fragment,{children:t.jsxs("fieldset",{children:[t.jsx("legend",{className:ae,children:"Search Params"}),Kt(Ne).map(dt)]})}):null,children:t.jsx(Ve,{label:"Search Result",value:A.result,disabled:Oe,className:classNames({[k.Tab??""]:!Oe})})})]})}),_e.length?Hn?t.jsx(Dn,{dataArrWithPos:_e,graphData:r,size:oe,resultGraph:Kn,selectMode:z,useSetInputST:D,setTab:U,resultTable:Xn,setSize:Re,isEditX:y,commonValueFromTableData:i,clickEChartDotToAddMultiDots:Yn,dataFromST:x,superData:u}):t.jsx(Vn,{commonValueFromTableData:i,graphData:r,dataArrWithPos:_e,isEditX:y,svgRef:l,svgSize:o,setSize:Re,size:oe}):t.jsx(qs,{className:k.Chart??"",variant:"rounded",animation:"wave"})]})}),Oe?null:t.jsx(Rt,{buttonOrder:1,children:t.jsx(C,{className:k["Main-Right"]??"",elevation:0,children:t.jsxs(C,{elevation:24,className:k["Main-Right--Show"]??"",children:[_.isUndefined(De)?null:t.jsx(G,{arrow:!0,placement:"left",title:_.isUndefined(De)?null:t.jsxs("h4",{children:["The number of (",Ne?.s,",",Ne?.t,")-bicliques is: ",t.jsx("span",{className:ae,children:De})]}),children:t.jsx("h4",{className:classNames(ae,k["Main-Right--Show--Num"]),children:t.jsx("span",{children:De})})}),t.jsx(Xt,{title:"size",detail:oe}),Q?Kt(Q).map(([j,T])=>T.length?t.jsxs(on,{className:I.Accordion??"",defaultExpanded:T.length<=23,children:[t.jsx(ln,{expandIcon:t.jsx(cn,{}),className:I["Accordion-Summary"]??"",children:t.jsx("span",{className:classNames(ae,k["Main-Right--Show--Text"]),children:`${j} `})}),t.jsx(un,{className:I["Accordion-Details"]??"",children:T.map(R=>t.jsx("p",{className:k["Main-Right--Show--Text"]??"",children:R}))})]},j):null):null,t.jsx(Xt,{title:"count",detail:Gn})]})})})]}),t.jsx(Gs,{open:e||w,className:k.Modal??"",children:t.jsx(Hs,{className:k.CircularProgress??""})}),t.jsx(dn,{})]})}function jo(){return t.jsx(tr,{children:t.jsx(nr,{index:!0,element:t.jsx(_o,{})})})}const So=()=>t.jsx(N.StrictMode,{children:t.jsx(Ks,{injectFirst:!0,children:t.jsx(Qs,{children:t.jsx(jo,{})})})}),yo=document.body;Js(yo).render(t.jsx(t.Fragment,{children:t.jsx(So,{})}));
