import{j as e,r as M}from"./react-oik9md-E.js";import{i as R,U as F,T as te,F as ce,f as ue,L as de,h as me,u as fe,w as G,c as pe,g as he,a as xe,b as Ce,d as ve,e as _e,j as ge,k as be,l as je,B as L,S as Ue,C as Pe,s as De}from"./main-Lp3BVAiv.js";import{m as ne,g as S,l as z,j as se,b as O,p as Ie,i as Fe,q as Ne}from"./ahooks-SbeLODCE.js";import"./react-dom-tVoZXIl-.js";import{Q as Te}from"./react-toastify-5bXptfeX.js";import{p as q,_ as ye,a as Ve,I as Se,$ as $e,q as ae,P as N,K as ke,N as we,W as H,T as K,B as E}from"./@mui-iFTawLZb.js";import{a as Me}from"./react-router-m2kkV1nU.js";import"./@babel-_Kefij6Y.js";import"./react-fast-compare-751UTDWK.js";import"./echarts-Vo_PYHjZ.js";import"./zrender-6ibt0cUB.js";import"./@algolia-kof8UNv8.js";import"./react-router-dom-ma-xgFTe.js";import"./@remix-run-phvj9XUc.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";import"./scheduler-Xt5_ASe0.js";const Ee="_Mid_1dd8c_1",ze={Mid:Ee},Be="_Dialog_tm530_1",We="_title_tm530_4",Ae="_Paper_tm530_7",Oe="_Tab_tm530_15",qe="_TabPanel_tm530_18",Re="_input_tm530_28",V={Dialog:Be,title:We,Paper:Ae,Tab:Oe,TabPanel:qe,input:Re},Ge=[{u:1,v:1},{u:1,v:2},{u:1,v:3},{u:1,v:4},{u:2,v:1},{u:2,v:2},{u:3,v:3},{u:3,v:4},{u:4,v:3},{u:4,v:4},{u:4,v:5},{u:5,v:5},{u:5,v:6},{u:6,v:5},{u:6,v:6},{u:7,v:7},{u:7,v:8},{u:8,v:7},{u:8,v:8}],Le={[F.U]:8,[F.V]:8},oe=R?Le:{[F.U]:1,[F.V]:1},{isSafeInteger:J}=Number,ie=(a,s)=>c=>{const{value:i}=c.target;if(i===""||_.isUndefined(i))a({[s]:void 0});else{const n=parseInt(i),o=Number(i);J(n)&&J(o)&&a({[s]:n})}},He=a=>{const{value:s,setUvCountInner:c,uv:i,resetUVCount:n}=a;if(!n)return null;const o=n[i];return e.jsx(ye,{position:"end",title:`reset to ${o}`,children:e.jsx(Ve,{arrow:!0,title:`reset to ${o}`,placement:"right",children:e.jsx(Se,{disabled:s===o,onClick:()=>{c({[i]:o})},edge:"end",size:"large",children:e.jsx($e,{fontSize:"large"})})})})};function re(a){const{useUVCount:s,labelFunc:c,resetUVCount:i}=a,[n,o]=s;return B.map(u=>{const t=c(u),f=n[u];return e.jsx(q,{fullWidth:!0,label:t,title:t,placeholder:t,required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",error:!f,value:f,onChange:ie(o,u),...te,InputProps:{endAdornment:e.jsx(He,{uv:u,setUvCountInner:o,value:f,resetUVCount:i})}},u)})}const{isArray:Ke}=Array,Je=99;function Q(a){const s=_.clone(a[0]);if(!s)return null;for(const c of a)for(const i in c){const n=i,o=c[n];if(o>Je)return null;o>s[n]&&(s[n]=o)}return s}const X=_.mapValues(ue[0],(a,s)=>Ke(a)?[a[0],a[3]]:a);function Qe(a){const{useFileName:s,useUVCount:c,setGraghData:i}=a,[,n]=c,[o,{setFalse:u}]=ne(!0),[t,f]=S(R?2:0),[x,p]=s,b=z(oe),[h,d]=b,[C,T]=S(),$=M.useMemo(()=>{switch(t){case 0:return B.some(m=>!h[m]);case 2:return!C}return!0},[t,h,C]);return e.jsx(ae,{open:o,className:V.Dialog??"",children:e.jsxs(N,{elevation:24,className:V.Paper??"",children:[e.jsxs(ke,{value:t,children:[e.jsxs(we,{onChange:(m,v)=>f(v),children:[e.jsx(H,{label:"Create New",value:0,className:V.Tab??""}),e.jsx(H,{label:"From File",value:2,className:V.Tab??""})]}),e.jsx(K,{value:0,children:e.jsx(N,{elevation:24,className:V.TabPanel??"",children:e.jsx(re,{useUVCount:b,labelFunc:m=>`Please enter count of ${m}`})})}),e.jsx(K,{value:2,children:X?e.jsx(ce,{...X,setWillPatchData:m=>{if(typeof m=="object"){const{data:v}=m;Q(v)?T(m):alert("The dataset is too large!")}}}):null})]}),e.jsx(E,{fullWidth:!0,size:"large",disabled:$,variant:"contained",onClick:()=>{switch(t){case 0:{n(h);break}case 2:{if(C){const{fileName:m,data:v}=C;p(m),i(v);const l=Q(v);l&&n(l)}break}}u()},children:"Confirm"})]})})}const Xe="_Paper_109ek_1",Ye={Paper:Xe};function Ze(a){const{useUVCount:s}=a,[c,i]=s,n=z(c),[o,u]=n;return se(()=>{u(c)},[c]),e.jsxs(N,{elevation:24,className:Ye.Paper??"",children:[e.jsx(re,{useUVCount:n,labelFunc:t=>`Maximum Index of ${t}`,resetUVCount:c}),e.jsx(E,{fullWidth:!0,size:"large",disabled:B.some(t=>!o[t])||_.isEqual(c,o),variant:"contained",onClick:()=>{i(o)},children:"Modify"})]})}const et="_Paper_1pgn8_1",tt={Paper:et},{abs:nt}=Math;function st(a){const{text:s,fileName:c}=a,[i,{setTrue:n,setFalse:o}]=ne(!1),u=Me(),[t,f]=z({s_min:1,t_min:1}),x=O(async()=>{try{const h=nt(CRC32.str(s)).toString(36),d=`${h}.txt`,C=`${h}_cohesion${_.every(t,r=>r===1)?"":[t.s_min,t.t_min].map(r=>`_${r}`).join("")}.txt`,[T,$]=await Promise.all([d,C].map(me));if(T||await fe(s,d),await G(),$||(await pe({dataset:d,...t}),await G()),!await he(C).then(r=>r?.fileData)){Te.error(`construct ${C} is empty!`);return}const v=new URLSearchParams({dataset:d,BCviz_file:C});u({pathname:"/",search:`?${v.toString()}`});const l={fileInfo:{lastModified:Date.now(),name:d,size:s.length},fileData:s};xe({...ve,data:l,IDBValidKey:d})}catch{}}),{run:p,loading:b}=Ie(x,{...Ce,manual:!0});return e.jsxs(e.Fragment,{children:[e.jsx(ae,{open:i,onClose:()=>{o()},children:e.jsxs(N,{elevation:24,className:tt.Paper??"",children:[e.jsx(q,{multiline:!0,maxRows:9,InputProps:{readOnly:!0},fullWidth:!0,label:"Text of bipartite graph",title:"Text of bipartite graph",required:!0,translate:"yes",value:s}),_.map(t,(h,d)=>e.jsx(e.Fragment,{children:e.jsx(q,{fullWidth:!0,placeholder:d,label:d,...te,title:d,value:h,onChange:ie(f,d),required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"off"})})),e.jsx(E,{fullWidth:!0,variant:"contained",size:"large",disabled:_.some(t,_.isUndefined),onClick:p,children:"Confirm"})]})}),e.jsx(de,{open:b}),e.jsx(E,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>{n()},children:"Next Step"})]})}const{freeze:at,fromEntries:Y}=Object,{from:ot}=Array,{isSafeInteger:Z}=Number,ee=`file-${new Date().toJSON()}`,B=at([F.U,F.V]);function Nt(){const a=S(ee),[s=ee,c]=a,i=z(oe),[n,o]=i,u=Fe(n),[t,f]=S(R?Ge:[{u:1,v:1}]),x=M.useMemo(()=>{const l=_.flatMapDepth(n,(g,D)=>ot(new Array(g)).map((j,I)=>({k:D,kInd:I+1})),1),r=_e(l,De);return ge(l,[],r,innerHeight)},[n]);se(()=>{if(_.some(n,(l,r)=>{if(_.isUndefined(l)||_.isUndefined(u))return!1;const g=u[r];return!_.isUndefined(g)&&l<g})){const l=t.filter(r=>_.every(r,(g,D)=>{const j=n[D];return!_.isUndefined(j)&&g<=j}));t.length>l.length&&f(l)}},[n]);const[p,b]=S(),h=M.useMemo(()=>_.isUndefined(p)?x:[...x.slice(0,p),{...x[p],color:be},...x.slice(p+1)],[p,x]),d=M.useMemo(()=>je({dataArrWithPos:h,graphData:t,emphasisFocus:"none"}),[h,t]),T=["click","series",O(l=>{const{dataIndex:r,name:g,dataType:D}=l;if(Z(r)&&g&&D==="node")if(_.isUndefined(p))b(r);else if(r===p)b(void 0);else{const j=x[r],I=x[p];if(!j||!I)return;const{k:W}=j,{k:A}=I;if(W===A)b(r);else{const k=[j,I];if(!t.find(U=>k.every(({k:P,kInd:y})=>U[P]===y))){const U=k.map(({k:y,kInd:le})=>[y,le]),P=Y(U);f(t.concat(P))}b(void 0)}}})],m=["dblclick","series",O(l=>{const{dataIndex:r,name:g,data:D,dataType:j}=l,I=D;if(Z(r)&&g&&j==="edge"){const{source:W,target:A}=I,k=Y([W,A].map(U=>{if(typeof U=="string"){const P=U[0],y=parseInt(U.slice(1));return[P,y]}return[]})),w=t.findIndex(U=>B.every(P=>U[P]===k[P]));w!==-1&&f([...t.slice(0,w),...t.slice(w+1)])}})],v=Ne(()=>t.map(({u:l,v:r})=>`${l} ${r}`).join(`
`),[t]);return e.jsxs(N,{elevation:24,className:L.Main??"",children:[e.jsx(Qe,{useFileName:a,useUVCount:i,setGraghData:f}),e.jsx(Ue,{isOpen:!1,children:e.jsx(Ze,{useUVCount:i})}),e.jsxs(N,{elevation:24,className:classNames(L["Main-Mid"],ze.Mid),children:[e.jsx(Pe,{option:d,onParams:[m,T],style:{"--minHeight":"90vh"},isPermitShowLoading:!1}),e.jsx(st,{text:v,fileName:s})]})]})}export{B as UVEnumArr,Nt as default};
