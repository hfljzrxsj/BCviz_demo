import{j as e,r as F}from"./react-oik9md-E.js";import{i as L,U as I,c as he,f as Ie,T as pe,F as Te,a as Se,g as xe,p as Ne,L as Ve,b as X,d as Y,h as $e,u as ke,w as Z,e as we,j as ze,k as Ee,l as Me,m as Be,n as We,B as ee,S as Ae,C as Oe,s as He}from"./main-tVnEJKsb.js";import{m as J,g as k,l as O,b as w,f as Re,j as ge,p as Ge,i as Ke,q as qe,r as Le}from"./ahooks-VJayHAVi.js";import{r as je}from"./react-dom-a-17rxNu.js";import{Q as Je}from"./react-toastify-5bXptfeX.js";import{p as K,_ as Qe,a as z,I as q,$ as Xe,q as Q,P as T,K as Ye,N as Ze,W as te,T as se,B as E,a0 as et,a1 as tt,a2 as ae,a3 as st,a4 as at,a5 as nt,a6 as it,a7 as ne,r as ot,a8 as rt,F as ie,a9 as lt,aa as ct}from"./@mui-i4-DEK3g.js";import{a as _e}from"./react-router-m2kkV1nU.js";import{u as ve}from"./react-router-dom-OWcGx1G4.js";import"./@babel-_Kefij6Y.js";import"./react-fast-compare-751UTDWK.js";import"./echarts-Vo_PYHjZ.js";import"./zrender-6ibt0cUB.js";import"./@algolia-kof8UNv8.js";import"./scheduler-Xt5_ASe0.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./react-transition-group-0QNSnBtb.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";import"./@remix-run-phvj9XUc.js";const ut="_Mid_1dd8c_1",dt={Mid:ut},mt="_Dialog_tm530_1",ft="_title_tm530_4",ht="_Paper_tm530_7",pt="_Tab_tm530_15",xt="_TabPanel_tm530_18",gt="_input_tm530_28",$={Dialog:mt,title:ft,Paper:ht,Tab:pt,TabPanel:xt,input:gt},jt=[{u:1,v:1},{u:1,v:2},{u:1,v:3},{u:1,v:4},{u:2,v:1},{u:2,v:2},{u:3,v:3},{u:3,v:4},{u:4,v:3},{u:4,v:4},{u:4,v:5},{u:5,v:5},{u:5,v:6},{u:6,v:5},{u:6,v:6},{u:7,v:7},{u:7,v:8},{u:8,v:7},{u:8,v:8}],_t={[I.U]:8,[I.V]:8},Ce=L?_t:{[I.U]:1,[I.V]:1},{isSafeInteger:oe}=Number,be=(s,t)=>l=>{const{value:n}=l.target;if(n===""||_.isUndefined(n))s({[t]:void 0});else{const i=parseInt(n),c=Number(n);oe(i)&&oe(c)&&s({[t]:i})}},Ue=Ie[0],De=s=>t=>{s({[Ue]:t},he)},vt=s=>{const{value:t,setUvCountInner:l,uv:n,resetUVCount:i}=s;if(!i)return null;const c=i[n];return e.jsx(Qe,{position:"end",title:`reset to ${c}`,children:e.jsx(z,{arrow:!0,title:`reset to ${c}`,placement:"right",children:e.jsx(q,{disabled:t===c,onClick:()=>{l({[n]:c})},edge:"end",size:"large",children:e.jsx(Xe,{fontSize:"large"})})})})};function Pe(s){const{useUVCount:t,labelFunc:l,resetUVCount:n}=s,[i,c]=t;return H.map(h=>{const u=l(h),r=i[h];return e.jsx(K,{fullWidth:!0,label:u,title:u,placeholder:u,required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",error:!r,value:r,onChange:be(c,h),...pe,InputProps:{endAdornment:e.jsx(vt,{uv:h,setUvCountInner:c,value:r,resetUVCount:n})}},h)})}const{isArray:Ct}=Array,bt=99;function re(s){const t=_.clone(s[0]);if(!t)return null;for(const l of s)for(const n in l){const i=n,c=l[i];if(c>bt)return null;c>t[i]&&(t[i]=c)}return t}const le=_.mapValues(Se[0],(s,t)=>Ct(s)?[s[0],s[3]]:s);function Ut(s){const{useFileName:t,useUVCount:l,setGraghData:n}=s,[,i]=l,[c,{setTrue:h,setFalse:u}]=J(!1),[r,P]=k(L?2:0),[M,g]=t,p=O(Ce),[j,S]=p,[b,f]=k(),m=F.useMemo(()=>{switch(r){case 0:return H.some(a=>!j[a]);case 2:return!b}return!0},[r,j,b]),[B,y]=ve(),N=w(({data:a,fileName:o})=>{const x=re(a);x&&(i(x),g(o),n(a),De(y)(o),u())}),d=w(()=>je.unstable_batchedUpdates(()=>{y(new URLSearchParams,he),h()}));return Re(()=>{const a=B.get(Ue);if(!a)return d();xe(a).then(o=>{if(!o)return d();const{fileData:x}=o;return N({fileName:a,data:Ne(x)}),u()},o=>d())}),e.jsx(Q,{open:c,className:$.Dialog??"",children:e.jsxs(T,{elevation:24,className:$.Paper??"",children:[e.jsxs(Ye,{value:r,children:[e.jsxs(Ze,{onChange:(a,o)=>P(o),children:[e.jsx(te,{label:"Create New",value:0,className:$.Tab??""}),e.jsx(te,{label:"From File",value:2,className:$.Tab??""})]}),e.jsx(se,{value:0,children:e.jsx(T,{elevation:24,className:$.TabPanel??"",children:e.jsx(Pe,{useUVCount:p,labelFunc:a=>`Please enter count of ${a}`})})}),e.jsx(se,{value:2,children:le?e.jsx(Te,{...le,setWillPatchData:a=>{if(typeof a=="object"){const{data:o}=a;re(o)?f(a):alert("The dataset is too large!")}}}):null})]}),e.jsx(E,{fullWidth:!0,size:"large",disabled:m,variant:"contained",onClick:()=>{switch(r){case 0:{i(j);break}case 2:{b&&N(b);break}}u()},children:"Confirm"})]})})}const Dt="_Paper_109ek_1",Pt={Paper:Dt};function yt(s){const{useUVCount:t}=s,[l,n]=t,i=O(l),[c,h]=i;return ge(()=>{h(l)},[l]),e.jsxs(T,{elevation:24,className:Pt.Paper??"",children:[e.jsx(Pe,{useUVCount:i,labelFunc:u=>`Maximum Index of ${u}`,resetUVCount:l}),e.jsx(E,{fullWidth:!0,size:"large",disabled:H.some(u=>!c[u])||_.isEqual(l,c),variant:"contained",onClick:()=>{n(c)},children:"Modify"})]})}const Ft="_Paper_1pgn8_1",It={Paper:Ft},{abs:Tt}=Math,ce=s=>`${s}.txt`,ue=({fileNameBEWithExt:s,text:t})=>({fileInfo:{lastModified:Date.now(),name:s,size:t.length},fileData:t});function St(s){const{text:t,fileName:l}=s,[n,{setTrue:i,setFalse:c}]=J(!1),h=_e(),[u,r]=O({s_min:1,t_min:1}),[P,M]=ve(),[g,p]=k(""),j=w(async()=>{try{const f=ce(g),m=`${g}_cohesion${_.every(u,o=>o===1)?"":[u.s_min,u.t_min].map(o=>`_${o}`).join("")}.txt`,[B,y]=await Promise.all([f,m].map($e));if(B||await ke(t,f),await Z(),y||(await we({dataset:f,...u}),await Z()),!await xe(m).then(o=>o?.fileData)){Je.error(`construct ${m} is empty!`);return}const d=new URLSearchParams({dataset:f,BCviz_file:m});h({pathname:"/",search:`?${d.toString()}`});const a=ue({fileNameBEWithExt:f,text:t});X({...Y,data:a,IDBValidKey:f})}catch{}}),{run:S,loading:b}=Ge(j,{...ze,manual:!0});return e.jsxs(e.Fragment,{children:[e.jsx(Q,{open:n,onClose:()=>{c()},children:e.jsxs(T,{elevation:24,className:It.Paper??"",children:[e.jsx(K,{multiline:!0,maxRows:9,InputProps:{readOnly:!0},fullWidth:!0,label:"Text of bipartite graph",title:"Readonly TextArea",required:!0,translate:"yes",value:t}),_.map(u,(f,m)=>e.jsx(e.Fragment,{children:e.jsx(K,{fullWidth:!0,placeholder:m,label:m,...pe,title:m,value:f,onChange:be(r,m),required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",unselectable:"off"})})),e.jsx(E,{fullWidth:!0,variant:"contained",size:"large",disabled:_.some(u,_.isUndefined),onClick:S,children:"Confirm"})]})}),e.jsx(Ve,{open:b}),e.jsx(E,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>je.unstable_batchedUpdates(()=>{const f=Tt(CRC32.str(t)).toString(36);p(f);const m=ce(f);De(M)(m),i(),X({...Y,data:ue({fileNameBEWithExt:m,text:t}),IDBValidKey:m})}),disabled:!t,children:"Next Step"})]})}const Nt="_title_kjfm3_1",Vt={title:Nt},ye="Usage Help";function $t({useDialogOpen:s}){const[t,{setTrue:l,setFalse:n}]=s;return e.jsx(e.Fragment,{children:e.jsxs(Q,{open:t,onClose:n,fullWidth:!0,autoFocus:!0,children:[e.jsx(et,{children:e.jsx("h1",{className:Vt.title,children:ye})}),e.jsx(tt,{children:e.jsxs("ol",{children:[e.jsx("li",{children:e.jsx(ae,{children:e.jsx("p",{children:"Click vertices on U and V to create an edge between them."})})}),e.jsx("li",{children:e.jsx(ae,{children:e.jsx("p",{children:"Double-click an edge to delete it."})})})]})}),e.jsx(st,{children:e.jsx(E,{size:"large",variant:"contained",fullWidth:!0,autoFocus:!0,onClick:n,startIcon:e.jsx(at,{fontSize:"large"}),children:"I Know"})})]})})}const kt="_absolute_1afwl_1",wt={absolute:kt};function zt(){const s=_e(),t=J(!1),[l,{setTrue:n,setFalse:i}]=t;return e.jsxs(e.Fragment,{children:[e.jsxs(nt,{ariaLabel:"hjx",icon:e.jsx(it,{}),className:wt.absolute??"",direction:"right",children:[e.jsx(ne,{icon:e.jsx(z,{title:"Back to previous page",arrow:!0,children:e.jsx(ot,{fontSize:"large"})}),onClick:()=>{s(-1)}},0),e.jsx(ne,{icon:e.jsx(z,{title:ye,arrow:!0,children:e.jsx(rt,{fontSize:"large"})}),onClick:()=>{n()}},1)]}),e.jsx($t,{useDialogOpen:t})]})}const Et="_box_f96qh_1",Mt={box:Et};function Bt({graghDataHistoryTravel:{forward:s,forwardLength:t,back:l,backLength:n}}){return e.jsxs("div",{className:Mt.box,children:[e.jsx(ie,{size:"large",onClick:l,disabled:!n,title:"Undo",children:e.jsx(z,{title:"Undo",arrow:!0,placement:"right",children:e.jsx(q,{size:"large",disabled:!n,color:n?"info":"default",children:e.jsx(lt,{fontSize:"large",color:n?"primary":"disabled"})})})},F.useId()),e.jsx(ie,{size:"large",onClick:s,disabled:!t,title:"Redo",children:e.jsx(z,{title:"Redo",arrow:!0,placement:"right",children:e.jsx(q,{size:"large",disabled:!t,color:t?"info":"default",children:e.jsx(ct,{fontSize:"large",color:t?"primary":"disabled"})})})},F.useId())]})}const{freeze:Wt,fromEntries:de}=Object,{from:At}=Array,{isSafeInteger:me}=Number,fe=`file-${new Date().toJSON()}`,H=Wt([I.U,I.V]),Ot=Le;function ds(){const s=k(fe),[t=fe,l]=s,n=O(Ce),[i,c]=n,h=Ke(i),u=Ot(L?jt:[{u:1,v:1}]),{value:r,setValue:P,reset:M}=u,g=F.useMemo(()=>{const d=_.flatMapDepth(i,(o,x)=>At(new Array(o)).map((v,D)=>({k:x,kInd:D+1})),1),a=Ee(d,He);return Me(d,[],a,innerHeight)},[i]);ge(()=>{if(r&&_.some(i,(d,a)=>{if(_.isUndefined(d)||_.isUndefined(h))return!1;const o=h[a];return!_.isUndefined(o)&&d<o})){const d=r.filter(a=>_.every(a,(o,x)=>{const v=i[x];return!_.isUndefined(v)&&o<=v}));r.length>d.length&&P(d)}},[i]);const[p,j]=k(),S=F.useMemo(()=>_.isUndefined(p)?g:[...g.slice(0,p),{...g[p],color:Be},...g.slice(p+1)],[p,g]),b=F.useMemo(()=>We({dataArrWithPos:S,graphData:r,emphasisFocus:"none"}),[S,r]),m=["click","series",w(d=>{if(!r)return;const{dataIndex:a,name:o,dataType:x}=d;if(me(a)&&o&&x==="node")if(_.isUndefined(p))j(a);else if(a===p)j(void 0);else{const v=g[a],D=g[p];if(!v||!D)return;const{k:R}=v,{k:G}=D;if(R===G)j(a);else{const W=[v,D];if(!r.find(C=>W.every(({k:U,kInd:V})=>C[U]===V))){const C=W.map(({k:V,kInd:Fe})=>[V,Fe]),U=de(C);P(r.concat(U))}j(void 0)}}})],y=["dblclick","series",w(d=>{if(!r)return;const{dataIndex:a,name:o,data:x,dataType:v}=d,D=x;if(me(a)&&o&&v==="edge"){const{source:R,target:G}=D,W=de([R,G].map(C=>{if(typeof C=="string"){const U=C[0],V=parseInt(C.slice(1));return[U,V]}return[]})),A=r.findIndex(C=>H.every(U=>C[U]===W[U]));A!==-1&&P([...r.slice(0,A),...r.slice(A+1)])}})],N=qe(()=>r?r.map(({u:d,v:a})=>`${d} ${a}`).join(`
`):"",[r]);return e.jsxs(T,{elevation:24,className:ee.Main??"",children:[e.jsx(Ut,{useFileName:s,useUVCount:n,setGraghData:M}),e.jsx(Ae,{isOpen:!1,children:e.jsx(yt,{useUVCount:n})}),e.jsxs(T,{elevation:24,className:classNames(ee["Main-Mid"],dt.Mid),children:[e.jsx(Oe,{option:b,onParams:[y,m],style:{"--minHeight":"90vh"},isPermitShowLoading:!1}),e.jsx(St,{text:N,fileName:t})]}),e.jsx(Bt,{graghDataHistoryTravel:u}),e.jsx(zt,{})]})}export{H as UVEnumArr,ds as default,Ot as useGraghDataHistoryTravel};
