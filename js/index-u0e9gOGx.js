import{j as e,r as N}from"./react-oik9md-E.js";import{i as O,U as f,g as Q,a as X,u as Y,b as Z,B as V,S as ee,C as te,h as ae,c as ne,w as $,d as se,e as oe,s as ie,f as re}from"./main-mrJROt5R.js";import{m as le,g as I,l as A,b as B}from"./ahooks-5_89LEPF.js";import{a as ce}from"./react-router-m2kkV1nU.js";import{q as ue,P as j,H as me,J as de,W as pe,T as fe,p as he,B as H}from"./@mui-ZDVPm4if.js";import"./@babel-_Kefij6Y.js";import"./react-fast-compare-751UTDWK.js";import"./echarts-Vo_PYHjZ.js";import"./zrender-6ibt0cUB.js";import"./react-dom-tVoZXIl-.js";import"./scheduler-Xt5_ASe0.js";import"./react-toastify-5bXptfeX.js";import"./@algolia-kof8UNv8.js";import"./react-router-dom-ma-xgFTe.js";import"./@remix-run-phvj9XUc.js";import"./tslib-xX1bOrSW.js";import"./lodash-C7I7b_wX.js";import"./react-transition-group-QTzb2ErI.js";import"./@emotion-ia0lOm4d.js";import"./hoist-non-react-statics-y4nWN7rF.js";import"./stylis-W9rcUKMO.js";import"./@popperjs-v-la0Vhf.js";const ve="_Mid_1dd8c_1",be={Mid:ve},Ce="_Paper_1w3rq_1",xe="_Tab_1w3rq_5",ge="_TabPanel_1w3rq_8",_e="_input_1w3rq_18",T={Paper:Ce,Tab:xe,TabPanel:ge,input:_e},De=[{u:1,v:1},{u:1,v:2},{u:1,v:3},{u:1,v:4},{u:2,v:1},{u:2,v:2},{u:3,v:3},{u:3,v:4},{u:4,v:3},{u:4,v:4},{u:4,v:5},{u:5,v:5},{u:5,v:6},{u:6,v:5},{u:6,v:6},{u:7,v:7},{u:7,v:8},{u:8,v:7},{u:8,v:8}],Te={[f.U]:8,[f.V]:8},G=O?Te:{[f.U]:1,[f.V]:1},{isSafeInteger:z}=Number;function Ie(w){const{useFileName:y,useUVCount:[,C]}=w,[U,{setFalse:r}]=le(!0),[o,x]=I(0),[l,i]=A(G);return e.jsx(ue,{open:U,children:e.jsxs(j,{elevation:24,className:T.Paper??"",children:[e.jsxs(me,{value:o,children:[e.jsx(de,{onChange:(t,c)=>x(c),children:e.jsx(pe,{label:"Create New",value:0,className:T.Tab??""})}),e.jsx(fe,{value:0,children:e.jsx(j,{elevation:24,className:T.TabPanel??"",children:E.map(t=>{const c=`Please enter count of ${t}`;return e.jsx(he,{fullWidth:!0,label:c,title:c,placeholder:c,type:"number",required:!0,spellCheck:!0,autoCapitalize:"on",enterKeyHint:"next",translate:"yes",inputMode:"numeric",error:!l[t],value:l[t],onChange:F=>{const{value:m}=F.target;if(m===""||_.isUndefined(m))i({[t]:void 0});else{const M=parseInt(m),P=Number(m);z(M)&&z(P)&&i({[t]:M})}},inputProps:{min:0,inputMode:"numeric",pattern:"^(0|[1-9]d*)$",max:99},className:T.input??""},t)})})})]}),e.jsx(H,{fullWidth:!0,size:"large",disabled:E.some(t=>!l[t]),variant:"contained",onClick:()=>{C(l),r()},children:"Confirm"})]})})}const{freeze:je,fromEntries:W}=Object,{from:we}=Array,{isSafeInteger:q}=Number,{abs:ye}=Math;new TextEncoder;const E=je([f.U,f.V]);function Qe(){const w=I(`file-${new Date().toJSON()}`),y=A(G),[C,U]=y,r=N.useMemo(()=>{const a=_.flatMapDepth(C,(n,d,S)=>we(new Array(n)).map((g,p)=>({k:d,kInd:p+1})),1),s=Q(a,ie);return X(a,[],s,innerHeight)},[C]),[o,x]=I(),l=N.useMemo(()=>_.isUndefined(o)?r:[...r.slice(0,o),{...r[o],color:Y},...r.slice(o+1)],[o,r]),[i,t]=I(O?De:[{u:1,v:1}]),c=N.useMemo(()=>Z(l,i),[l,i]),m=["click","series",B(a=>{const{dataIndex:s,name:n,value:d,borderColor:S,color:g,data:p,dataType:u}=a;q(s)&&n&&u==="node"&&(_.isUndefined(o)?x(s):(s!==o&&t(_.uniqWith([...i,W([s,o].map(h=>{const v=r[h];return v?[v.k,v.kInd]:[]}))],_.isEqual)),x(void 0)))})],P=["dblclick","series",B(a=>{const{dataIndex:s,name:n,value:d,borderColor:S,color:g,data:p,dataType:u}=a,h=p;if(q(s)&&n&&u==="edge"){const{source:v,target:R}=h,J=W([v,R].map(b=>{if(typeof b=="string"){const D=b[0],K=parseInt(b.slice(1));return[D,K]}return[]})),k=i.findIndex(b=>E.every(D=>b[D]===J[D]));k!==-1&&t([...i.slice(0,k),...i.slice(k+1)])}})],L=ce();return e.jsxs(j,{elevation:24,className:V.Main??"",children:[e.jsx(Ie,{useFileName:w,useUVCount:y}),e.jsx(ee,{}),e.jsxs(j,{elevation:24,className:classNames(V["Main-Mid"],be.Mid),children:[e.jsx(te,{option:c,onParams:[P,m],style:{"--minHeight":"90vh"}}),e.jsx(H,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{const a=i.map(({u,v:h})=>`${u} ${h}`).join(`
`),s=ye(CRC32.str(a)).toString(36),n=`${s}.txt`,d=`${s}_cohesion.txt`;await Promise.all([n,d].map(ae)).then(u=>u.every(Boolean),()=>!1)||(await ne(a,n),await $(),await se(n),await $());const g=new URLSearchParams({dataset:n,BCviz_file:d});L({pathname:"/",search:`?${g.toString()}`});const p={fileInfo:{lastModified:Date.now(),name:n,size:a.length},fileData:a};oe({...re,data:p,IDBValidKey:n})}catch{}},children:"Confirm"})]})]})}export{E as UVEnumArr,Qe as default};
