import{_ as w,a as y,b as k,c as te,d as ue,e as ae,f as G}from"./tslib-xX1bOrSW.js";import{r as o}from"./react-oik9md-E.js";import{d as le,t as ve}from"./lodash-C7I7b_wX.js";import{i as de}from"./react-fast-compare-751UTDWK.js";import"./@babel-_Kefij6Y.js";var he=function(e){return function(n,r){var t=o.useRef(!1);e(function(){return function(){t.current=!1}},[]),e(function(){if(!t.current)t.current=!0;else return n()},r)}},K=function(e){return typeof e=="function"},ge=function(e){return typeof e=="string"},z=function(e){return typeof e=="number"},me=function(e){return typeof e>"u"};function _(e){var n=o.useRef(e);n.current=o.useMemo(function(){return e},[e]);var r=o.useRef();return r.current||(r.current=function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return n.current.apply(this,t)}),r.current}const F=he(o.useEffect);var ie=function(e,n){var r=n.manual,t=n.ready,u=t===void 0?!0:t,i=n.defaultParams,a=i===void 0?[]:i,c=n.refreshDeps,f=c===void 0?[]:c,s=n.refreshDepsAction,p=o.useRef(!1);return p.current=!1,F(function(){!r&&u&&(p.current=!0,e.run.apply(e,w([],y(a),!1)))},[u]),F(function(){p.current||r||(p.current=!0,s?s():e.refresh())},w([],y(f),!1)),{onBefore:function(){if(!u)return{stopNow:!0}}}};ie.onInit=function(e){var n=e.ready,r=n===void 0?!0:n,t=e.manual;return{loading:!t&&r}};const pe=ie;function J(e,n){if(e===n)return!0;for(var r=0;r<e.length;r++)if(!Object.is(e[r],n[r]))return!1;return!0}function V(e,n){var r=o.useRef({deps:n,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!J(r.deps,n))&&(r.deps=n,r.obj=e(),r.initialized=!0),r.obj}function j(e){var n=o.useRef(e);return n.current=e,n}var x=function(e){var n=j(e);o.useEffect(function(){return function(){n.current()}},[])},B=new Map,ye=function(e,n,r){var t=B.get(e);t?.timer&&clearTimeout(t.timer);var u=void 0;n>-1&&(u=setTimeout(function(){B.delete(e)},n)),B.set(e,k(k({},r),{timer:u}))},be=function(e){return B.get(e)},$=new Map,Re=function(e){return $.get(e)},we=function(e,n){$.set(e,n),n.then(function(r){return $.delete(e),r}).catch(function(){$.delete(e)})},N={},Se=function(e,n){N[e]&&N[e].forEach(function(r){return r(n)})},U=function(e,n){return N[e]||(N[e]=[]),N[e].push(n),function(){var t=N[e].indexOf(n);N[e].splice(t,1)}},Ee=function(e,n){var r=n.cacheKey,t=n.cacheTime,u=t===void 0?5*60*1e3:t,i=n.staleTime,a=i===void 0?0:i,c=n.setCache,f=n.getCache,s=o.useRef(),p=o.useRef(),l=function(h,v){c?c(v):ye(h,u,v),Se(h,v.data)},b=function(h,v){return v===void 0&&(v=[]),f?f(v):be(h)};return V(function(){if(r){var h=b(r);h&&Object.hasOwnProperty.call(h,"data")&&(e.state.data=h.data,e.state.params=h.params,(a===-1||new Date().getTime()-h.time<=a)&&(e.state.loading=!1)),s.current=U(r,function(v){e.setState({data:v})})}},[]),x(function(){var h;(h=s.current)===null||h===void 0||h.call(s)}),r?{onBefore:function(h){var v=b(r,h);return!v||!Object.hasOwnProperty.call(v,"data")?{}:a===-1||new Date().getTime()-v.time<=a?{loading:!1,data:v?.data,error:void 0,returnNow:!0}:{data:v?.data,error:void 0}},onRequest:function(h,v){var g=Re(r);return g&&g!==p.current?{servicePromise:g}:(g=h.apply(void 0,w([],y(v),!1)),p.current=g,we(r,g),{servicePromise:g})},onSuccess:function(h,v){var g;r&&((g=s.current)===null||g===void 0||g.call(s),l(r,{data:h,params:v,time:new Date().getTime()}),s.current=U(r,function(E){e.setState({data:E})}))},onMutate:function(h){var v;r&&((v=s.current)===null||v===void 0||v.call(s),l(r,{data:h,params:e.state.params,time:new Date().getTime()}),s.current=U(r,function(g){e.setState({data:g})}))}}:{}};const Ce=Ee;var Pe=function(e,n){var r=n.debounceWait,t=n.debounceLeading,u=n.debounceTrailing,i=n.debounceMaxWait,a=o.useRef(),c=o.useMemo(function(){var f={};return t!==void 0&&(f.leading=t),u!==void 0&&(f.trailing=u),i!==void 0&&(f.maxWait=i),f},[t,u,i]);return o.useEffect(function(){if(r){var f=e.runAsync.bind(e);return a.current=le(function(s){s()},r,c),e.runAsync=function(){for(var s=[],p=0;p<arguments.length;p++)s[p]=arguments[p];return new Promise(function(l,b){var h;(h=a.current)===null||h===void 0||h.call(a,function(){f.apply(void 0,w([],y(s),!1)).then(l).catch(b)})})},function(){var s;(s=a.current)===null||s===void 0||s.cancel(),e.runAsync=f}}},[r,c]),r?{onCancel:function(){var f;(f=a.current)===null||f===void 0||f.cancel()}}:{}};const Te=Pe;var _e=function(e,n){var r=n.loadingDelay,t=n.ready,u=o.useRef();if(!r)return{};var i=function(){u.current&&clearTimeout(u.current)};return{onBefore:function(){return i(),t!==!1&&(u.current=setTimeout(function(){e.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){i()},onCancel:function(){i()}}};const Le=_e;var W=!!(typeof window<"u"&&window.document&&window.document.createElement);function Q(){return W?document.visibilityState!=="hidden":!0}var D=[];function Oe(e){return D.push(e),function(){var r=D.indexOf(e);D.splice(r,1)}}if(W){var ke=function(){if(Q())for(var e=0;e<D.length;e++){var n=D[e];n()}};window.addEventListener("visibilitychange",ke,!1)}var Ae=function(e,n){var r=n.pollingInterval,t=n.pollingWhenHidden,u=t===void 0?!0:t,i=n.pollingErrorRetryCount,a=i===void 0?-1:i,c=o.useRef(),f=o.useRef(),s=o.useRef(0),p=function(){var l;c.current&&clearTimeout(c.current),(l=f.current)===null||l===void 0||l.call(f)};return F(function(){r||p()},[r]),r?{onBefore:function(){p()},onError:function(){s.current+=1},onSuccess:function(){s.current=0},onFinally:function(){a===-1||a!==-1&&s.current<=a?c.current=setTimeout(function(){!u&&!Q()?f.current=Oe(function(){e.refresh()}):e.refresh()},r):s.current=0},onCancel:function(){p()}}:{}};const Me=Ae;function Ne(e,n){var r=!1;return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];r||(r=!0,e.apply(void 0,w([],y(t),!1)),setTimeout(function(){r=!1},n))}}function Ke(){return W&&typeof navigator.onLine<"u"?navigator.onLine:!0}var H=[];function We(e){return H.push(e),function(){var r=H.indexOf(e);r>-1&&H.splice(r,1)}}if(W){var Z=function(){if(!(!Q()||!Ke()))for(var e=0;e<H.length;e++){var n=H[e];n()}};window.addEventListener("visibilitychange",Z,!1),window.addEventListener("focus",Z,!1)}var De=function(e,n){var r=n.refreshOnWindowFocus,t=n.focusTimespan,u=t===void 0?5e3:t,i=o.useRef(),a=function(){var c;(c=i.current)===null||c===void 0||c.call(i)};return o.useEffect(function(){if(r){var c=Ne(e.refresh.bind(e),u);i.current=We(function(){c()})}return function(){a()}},[r,u]),x(function(){a()}),{}};const He=De;var je=function(e,n){var r=n.retryInterval,t=n.retryCount,u=o.useRef(),i=o.useRef(0),a=o.useRef(!1);return t?{onBefore:function(){a.current||(i.current=0),a.current=!1,u.current&&clearTimeout(u.current)},onSuccess:function(){i.current=0},onError:function(){if(i.current+=1,t===-1||i.current<=t){var c=r??Math.min(1e3*Math.pow(2,i.current),3e4);u.current=setTimeout(function(){a.current=!0,e.refresh()},c)}else i.current=0},onCancel:function(){i.current=0,u.current&&clearTimeout(u.current)}}:{}};const Be=je;var $e=function(e,n){var r=n.throttleWait,t=n.throttleLeading,u=n.throttleTrailing,i=o.useRef(),a={};return t!==void 0&&(a.leading=t),u!==void 0&&(a.trailing=u),o.useEffect(function(){if(r){var c=e.runAsync.bind(e);return i.current=ve(function(f){f()},r,a),e.runAsync=function(){for(var f=[],s=0;s<arguments.length;s++)f[s]=arguments[s];return new Promise(function(p,l){var b;(b=i.current)===null||b===void 0||b.call(i,function(){c.apply(void 0,w([],y(f),!1)).then(p).catch(l)})})},function(){var f;e.runAsync=c,(f=i.current)===null||f===void 0||f.cancel()}}},[r,t,u]),r?{onCancel:function(){var c;(c=i.current)===null||c===void 0||c.cancel()}}:{}};const ze=$e;var Fe=function(e){o.useEffect(function(){e?.()},[])},xe=function(){var e=y(o.useState({}),2),n=e[1];return o.useCallback(function(){return n({})},[])},qe=function(){function e(n,r,t,u){u===void 0&&(u={}),this.serviceRef=n,this.options=r,this.subscribe=t,this.initState=u,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=k(k(k({},this.state),{loading:!r.manual}),u)}return e.prototype.setState=function(n){n===void 0&&(n={}),this.state=k(k({},this.state),n),this.subscribe()},e.prototype.runPluginHandler=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var u=this.pluginImpls.map(function(i){var a;return(a=i[n])===null||a===void 0?void 0:a.call.apply(a,w([i],y(r),!1))}).filter(Boolean);return Object.assign.apply(Object,w([{}],y(u),!1))},e.prototype.runAsync=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return te(this,void 0,void 0,function(){var t,u,i,a,c,f,s,p,l,b,h,v,g,E,T,R,P,O,d,m,C;return ue(this,function(S){switch(S.label){case 0:if(this.count+=1,t=this.count,u=this.runPluginHandler("onBefore",n),i=u.stopNow,a=i===void 0?!1:i,c=u.returnNow,f=c===void 0?!1:c,s=ae(u,["stopNow","returnNow"]),a)return[2,new Promise(function(){})];if(this.setState(k({loading:!0,params:n},s)),f)return[2,Promise.resolve(s.data)];(g=(v=this.options).onBefore)===null||g===void 0||g.call(v,n),S.label=1;case 1:return S.trys.push([1,3,,4]),p=this.runPluginHandler("onRequest",this.serviceRef.current,n).servicePromise,p||(p=(h=this.serviceRef).current.apply(h,w([],y(n),!1))),[4,p];case 2:return l=S.sent(),t!==this.count?[2,new Promise(function(){})]:(this.setState({data:l,error:void 0,loading:!1}),(T=(E=this.options).onSuccess)===null||T===void 0||T.call(E,l,n),this.runPluginHandler("onSuccess",l,n),(P=(R=this.options).onFinally)===null||P===void 0||P.call(R,n,l,void 0),t===this.count&&this.runPluginHandler("onFinally",n,l,void 0),[2,l]);case 3:if(b=S.sent(),t!==this.count)return[2,new Promise(function(){})];throw this.setState({error:b,loading:!1}),(d=(O=this.options).onError)===null||d===void 0||d.call(O,b,n),this.runPluginHandler("onError",b,n),(C=(m=this.options).onFinally)===null||C===void 0||C.call(m,n,void 0,b),t===this.count&&this.runPluginHandler("onFinally",n,void 0,b),b;case 4:return[2]}})})},e.prototype.run=function(){for(var n=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this.runAsync.apply(this,w([],y(r),!1)).catch(function(u){n.options.onError})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,w([],y(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,w([],y(this.state.params||[]),!1))},e.prototype.mutate=function(n){var r=K(n)?n(this.state.data):n;this.runPluginHandler("onMutate",r),this.setState({data:r})},e}();const Ue=qe;function Ge(e,n,r){n===void 0&&(n={}),r===void 0&&(r=[]);var t=n.manual,u=t===void 0?!1:t,i=n.ready,a=i===void 0?!0:i,c=ae(n,["manual","ready"]),f=k({manual:u,ready:a},c),s=j(e),p=xe(),l=V(function(){var b=r.map(function(h){var v;return(v=h?.onInit)===null||v===void 0?void 0:v.call(h,f)}).filter(Boolean);return new Ue(s,f,p,Object.assign.apply(Object,w([{}],y(b),!1)))},[]);return l.options=f,l.pluginImpls=r.map(function(b){return b(l,f)}),Fe(function(){if(!u&&a){var b=l.state.params||n.defaultParams||[];l.run.apply(l,w([],y(b),!1))}}),x(function(){l.cancel()}),{loading:l.state.loading,data:l.state.data,error:l.state.error,params:l.state.params||[],cancel:_(l.cancel.bind(l)),refresh:_(l.refresh.bind(l)),refreshAsync:_(l.refreshAsync.bind(l)),run:_(l.run.bind(l)),runAsync:_(l.runAsync.bind(l)),mutate:_(l.mutate.bind(l))}}function sr(e,n,r){return Ge(e,n,w(w([],y(r||[]),!1),[Te,Le,Me,He,ze,pe,Ce,Be],!1))}function Je(e,n){e===void 0&&(e=!1);var r=y(o.useState(e),2),t=r[0],u=r[1],i=o.useMemo(function(){var a=n===void 0?!e:n,c=function(){return u(function(l){return l===e?a:e})},f=function(l){return u(l)},s=function(){return u(e)},p=function(){return u(a)};return{toggle:c,set:f,setLeft:s,setRight:p}},[]);return[t,i]}function lr(e){e===void 0&&(e=!1);var n=y(Je(!!e),2),r=n[0],t=n[1],u=t.toggle,i=t.set,a=o.useMemo(function(){var c=function(){return i(!0)},f=function(){return i(!1)};return{toggle:u,set:function(s){return i(!!s)},setTrue:c,setFalse:f}},[]);return[r,a]}function X(e,n){if(W){if(!e)return n;var r;return K(e)?r=e():"current"in e?r=e.current:r=e,r}}var Ye=function(e){var n=function(r,t,u){var i=o.useRef(!1),a=o.useRef([]),c=o.useRef([]),f=o.useRef();e(function(){var s,p=Array.isArray(u)?u:[u],l=p.map(function(b){return X(b)});if(!i.current){i.current=!0,a.current=l,c.current=t,f.current=r();return}(l.length!==a.current.length||!J(a.current,l)||!J(c.current,t))&&((s=f.current)===null||s===void 0||s.call(f),a.current=l,c.current=t,f.current=r())}),x(function(){var s;(s=f.current)===null||s===void 0||s.call(f),i.current=!1})};return n},oe=Ye(o.useEffect),ce=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),de(e,n)},Ve=function(e){return function(n,r){var t=o.useRef(),u=o.useRef(0);(r===void 0||!ce(r,t.current))&&(u.current+=1),t.current=r,e(n,[u.current])}};const vr=Ve(o.useEffect);function I(e,n,r){r===void 0&&(r={});var t=r.enable,u=t===void 0?!0:t,i=j(n);oe(function(){if(u){var a=X(r.target,window);if(a?.addEventListener){var c=function(s){return i.current(s)},f=Array.isArray(e)?e:[e];return f.forEach(function(s){a.addEventListener(s,c,{capture:r.capture,once:r.once,passive:r.passive})}),function(){f.forEach(function(s){a.removeEventListener(s,c,{capture:r.capture})})}}}},[e,r.capture,r.once,r.passive,u],r.target)}var dr=function(e){e===void 0&&(e=[]);var n=o.useRef(-1),r=o.useRef([]),t=o.useCallback(function(d){n.current+=1,r.current.splice(d,0,n.current)},[]),u=y(o.useState(function(){return e.forEach(function(d,m){t(m)}),e}),2),i=u[0],a=u[1],c=o.useCallback(function(d){r.current=[],a(function(){return d.forEach(function(m,C){t(C)}),d})},[]),f=o.useCallback(function(d,m){a(function(C){var S=w([],y(C),!1);return S.splice(d,0,m),t(d),S})},[]),s=o.useCallback(function(d){return r.current[d]},[]),p=o.useCallback(function(d){return r.current.findIndex(function(m){return m===d})},[]),l=o.useCallback(function(d,m){a(function(C){var S=w([],y(C),!1);return m.forEach(function(L,A){t(d+A)}),S.splice.apply(S,w([d,0],y(m),!1)),S})},[]),b=o.useCallback(function(d,m){a(function(C){var S=w([],y(C),!1);return S[d]=m,S})},[]),h=o.useCallback(function(d){a(function(m){var C=w([],y(m),!1);C.splice(d,1);try{r.current.splice(d,1)}catch{}return C})},[]),v=o.useCallback(function(d){Array.isArray(d)&&d.length&&a(function(m){var C=[],S=m.filter(function(L,A){var M=!d.includes(A);return M&&C.push(s(A)),M});return r.current=C,S})},[]),g=o.useCallback(function(d,m){d!==m&&a(function(C){var S=w([],y(C),!1),L=S.filter(function(M,q){return q!==d});L.splice(m,0,S[d]);try{var A=r.current.filter(function(M,q){return q!==d});A.splice(m,0,r.current[d]),r.current=A}catch{}return L})},[]),E=o.useCallback(function(d){a(function(m){return t(m.length),m.concat([d])})},[]),T=o.useCallback(function(){try{r.current=r.current.slice(0,r.current.length-1)}catch{}a(function(d){return d.slice(0,d.length-1)})},[]),R=o.useCallback(function(d){a(function(m){return t(0),[d].concat(m)})},[]),P=o.useCallback(function(){try{r.current=r.current.slice(1,r.current.length)}catch{}a(function(d){return d.slice(1,d.length)})},[]),O=o.useCallback(function(d){return d.map(function(m,C){return{key:C,item:m}}).sort(function(m,C){return p(m.key)-p(C.key)}).filter(function(m){return!!m.item}).map(function(m){return m.item})},[]);return{list:i,insert:f,merge:l,replace:b,remove:h,batchRemove:v,getKey:s,getIndex:p,move:g,push:E,pop:T,unshift:R,shift:P,sortList:O,resetList:c}},Qe=function(e,n){var r=e>0?e-1:n.length+e;return r>=n.length-1&&(r=n.length-1),r<0&&(r=0),r},ee=function(e,n){var r=Qe(e,n);return{_current:n[r],_before:n.slice(0,r),_after:n.slice(r+1)}};function hr(e,n){n===void 0&&(n=0);var r=y(o.useState({present:e,past:[],future:[]}),2),t=r[0],u=r[1],i=t.present,a=t.past,c=t.future,f=o.useRef(e),s=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];var E=v.length>0?v[0]:f.current;f.current=E,u({present:E,future:[],past:[]})},p=function(v){var g=w(w([],y(a),!1),[i],!1),E=z(n)?n:Number(n);E>0&&g.length>E&&g.splice(0,1),u({present:v,future:[],past:g})},l=function(v){if(v===void 0&&(v=1),c.length!==0){var g=ee(v,c),E=g._before,T=g._current,R=g._after;u({past:w(w(w([],y(a),!1),[i],!1),y(E),!1),present:T,future:R})}},b=function(v){if(v===void 0&&(v=-1),a.length!==0){var g=ee(v,a),E=g._before,T=g._current,R=g._after;u({past:E,present:T,future:w(w(w([],y(R),!1),[i],!1),y(c),!1)})}},h=function(v){var g=z(v)?v:Number(v);if(g!==0){if(g>0)return l(g);b(g)}};return{value:i,backLength:a.length,forwardLength:c.length,setValue:_(p),go:_(h),back:_(function(){h(-1)}),forward:_(function(){h(1)}),reset:_(s)}}var Xe=function(e,n,r){var t=o.useRef(),u=o.useRef(0);ce(n,t.current)||(u.current+=1),t.current=n,oe(e,[u.current],r)},Ze=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?navigator?.platform:""),fe={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:Ze?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Y={ctrl:function(e){return e.ctrlKey},shift:function(e){return e.shiftKey},alt:function(e){return e.altKey},meta:function(e){return e.type==="keyup"?fe.meta.includes(e.keyCode):e.metaKey}};function se(e){return ge(e)||z(e)}function Ie(e){var n=Object.keys(Y).reduce(function(r,t){return Y[t](e)?r+1:r},0);return[16,17,18,91,92].includes(e.keyCode)?n:n+1}function re(e,n,r){var t,u;if(!e.key)return!1;if(z(n))return e.keyCode===n?n:!1;var i=n.split("."),a=0;try{for(var c=G(i),f=c.next();!f.done;f=c.next()){var s=f.value,p=Y[s],l=fe[s.toLowerCase()];(p&&p(e)||l&&l===e.keyCode)&&a++}}catch(b){t={error:b}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(t)throw t.error}}return r?a===i.length&&Ie(e)===i.length?n:!1:a===i.length?n:!1}function er(e,n){return K(e)?e:se(e)?function(r){return re(r,e,n)}:Array.isArray(e)?function(r){return e.find(function(t){return re(r,t,n)})}:function(){return!!e}}var rr=["keydown"];function gr(e,n,r){var t=r||{},u=t.events,i=u===void 0?rr:u,a=t.target,c=t.exactMatch,f=c===void 0?!1:c,s=t.useCapture,p=s===void 0?!1:s,l=j(n),b=j(e);Xe(function(){var h,v,g,E=X(a,window);if(E){var T=function(d){var m,C=er(b.current,f),S=C(d),L=se(S)?S:d.key;if(S)return(m=l.current)===null||m===void 0?void 0:m.call(l,d,L)};try{for(var R=G(i),P=R.next();!P.done;P=R.next()){var O=P.value;(g=E?.addEventListener)===null||g===void 0||g.call(E,O,T,p)}}catch(d){h={error:d}}finally{try{P&&!P.done&&(v=R.return)&&v.call(R)}finally{if(h)throw h.error}}return function(){var d,m,C;try{for(var S=G(i),L=S.next();!L.done;L=S.next()){var A=L.value;(C=E?.removeEventListener)===null||C===void 0||C.call(E,A,T,p)}}catch(M){d={error:M}}finally{try{L&&!L.done&&(m=S.return)&&m.call(S)}finally{if(d)throw d.error}}}}},[i],a)}var ne="AHOOKS_SYNC_STORAGE_EVENT_NAME";function nr(e){function n(r,t){t===void 0&&(t={});var u,i=t.listenStorageChange,a=i===void 0?!1:i,c=t.onError,f=c===void 0?function(R){}:c;try{u=e()}catch(R){f(R)}var s=function(R){return t.serializer?t.serializer(R):JSON.stringify(R)},p=function(R){return t.deserializer?t.deserializer(R):JSON.parse(R)};function l(){try{var R=u?.getItem(r);if(R)return p(R)}catch(P){f(P)}return K(t.defaultValue)?t.defaultValue():t.defaultValue}var b=y(o.useState(l),2),h=b[0],v=b[1];F(function(){v(l())},[r]);var g=function(R){var P=K(R)?R(h):R;a||v(P);try{var O=void 0,d=u?.getItem(r);me(P)?(O=null,u?.removeItem(r)):(O=s(P),u?.setItem(r,O)),dispatchEvent(new CustomEvent(ne,{detail:{key:r,newValue:O,oldValue:d,storageArea:u}}))}catch(m){f(m)}},E=function(R){R.key!==r||R.storageArea!==u||v(l())},T=function(R){E(R.detail)};return I("storage",E,{enable:a}),I(ne,T,{enable:a}),[h,_(g)]}return n}var mr=nr(function(){return W?localStorage:void 0});function pr(e){var n=this,r=o.useRef(!1);return o.useCallback(function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return te(n,void 0,void 0,function(){var i,a;return ue(this,function(c){switch(c.label){case 0:if(r.current)return[2];r.current=!0,c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,e.apply(void 0,w([],y(t),!1))];case 2:return i=c.sent(),[2,i];case 3:throw a=c.sent(),a;case 4:return r.current=!1,[7];case 5:return[2]}})})},[e])}var tr=function(e,n){return!Object.is(e,n)};function yr(e,n){n===void 0&&(n=tr);var r=o.useRef(),t=o.useRef();return n(t.current,e)&&(r.current=t.current,t.current=e),r.current}var br=function(e){var n=o.useRef(e),r=V(function(){return K(n.current)?n.current():n.current},[]),t=y(o.useState(r),2),u=t[0],i=t[1],a=_(function(){i(r)});return[u,i,a]},ur=function(){var e=o.useRef(!1);return o.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e};function Rr(e){var n=ur(),r=y(o.useState(e),2),t=r[0],u=r[1],i=o.useCallback(function(a){n.current||u(a)},[]);return[t,i]}var wr=function(e){var n=y(o.useState(e),2),r=n[0],t=n[1],u=_(function(i){t(function(a){var c=K(i)?i(a):i;return c?k(k({},a),c):a})});return[r,u]};export{x as a,_ as b,I as c,gr as d,xe as e,Fe as f,lr as g,mr as h,Rr as i,pr as j,yr as k,F as l,br as m,wr as n,dr as o,sr as p,V as q,hr as r,vr as u};
