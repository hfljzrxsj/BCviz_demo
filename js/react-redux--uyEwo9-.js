import{b as C,r as o}from"./react-GysCNhY8.js";import"./hoist-non-react-statics-y4nWN7rF.js";import{r as w}from"./react-dom-vCwnROQY.js";var v=C.createContext(null);function B(e){e()}var m=B,L=function(r){return m=r},U=function(){return m};function D(){var e=U(),r=null,n=null;return{clear:function(){r=null,n=null},notify:function(){e(function(){for(var u=r;u;)u.callback(),u=u.next})},get:function(){for(var u=[],c=r;c;)u.push(c),c=c.next;return u},subscribe:function(u){var c=!0,t=n={callback:u,next:null,prev:n};return t.prev?t.prev.next=t:r=t,function(){!c||r===null||(c=!1,t.next?t.next.prev=t.prev:n=t.prev,t.prev?t.prev.next=t.next:r=t.next)}}}}var g={notify:function(){},get:function(){return[]}};function R(e,r){var n,i=g;function u(d){return f(),i.subscribe(d)}function c(){i.notify()}function t(){a.onStateChange&&a.onStateChange()}function s(){return!!n}function f(){n||(n=r?r.addNestedSub(t):e.subscribe(t),i=D())}function b(){n&&(n(),n=void 0,i.clear(),i=g)}var a={addNestedSub:u,notifyNestedSubs:c,handleChangeWrapper:t,isSubscribed:s,trySubscribe:f,tryUnsubscribe:b,getListeners:function(){return i}};return a}var S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?o.useLayoutEffect:o.useEffect;function T(e){var r=e.store,n=e.context,i=e.children,u=o.useMemo(function(){var s=R(r);return{store:r,subscription:s}},[r]),c=o.useMemo(function(){return r.getState()},[r]);S(function(){var s=u.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),c!==r.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[u,c]);var t=n||v;return C.createElement(t.Provider,{value:u},i)}function E(){var e=o.useContext(v);return e}function k(e){e===void 0&&(e=v);var r=e===v?E:function(){return o.useContext(e)};return function(){var i=r(),u=i.store;return u}}var H=k();function M(e){e===void 0&&(e=v);var r=e===v?H:k(e);return function(){var i=r();return i.dispatch}}var _=M(),P=function(r,n){return r===n};function V(e,r,n,i){var u=o.useReducer(function(l){return l+1},0),c=u[1],t=o.useMemo(function(){return R(n,i)},[n,i]),s=o.useRef(),f=o.useRef(),b=o.useRef(),a=o.useRef(),d=n.getState(),p;try{if(e!==f.current||d!==b.current||s.current){var x=e(d);a.current===void 0||!r(x,a.current)?p=x:p=a.current}else p=a.current}catch(l){throw s.current&&(l.message+=`
The error may be correlated with this previous error:
`+s.current.stack+`

`),l}return S(function(){f.current=e,b.current=d,a.current=p,s.current=void 0}),S(function(){function l(){try{var h=n.getState();if(h===b.current)return;var y=f.current(h);if(r(y,a.current))return;a.current=y,b.current=h}catch(N){s.current=N}c()}return t.onStateChange=l,t.trySubscribe(),l(),function(){return t.tryUnsubscribe()}},[n,t]),p}function W(e){e===void 0&&(e=v);var r=e===v?E:function(){return o.useContext(e)};return function(i,u){u===void 0&&(u=P);var c=r(),t=c.store,s=c.subscription,f=V(i,u,t,s);return o.useDebugValue(f),f}}var j=W();L(w.unstable_batchedUpdates);export{T as P,_ as a,j as u};
